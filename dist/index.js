!function(n){var i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=70)}([function(e,t,n){"use strict";function i(){this.init=function(){var r={};this.on=function(e,t){r[e]||(r[e]=[]),r[e]=r[e].concat(t)},this.off=function(e,t){return!!r[e]&&(t=r[e].indexOf(t),r[e]=r[e].slice(),r[e].splice(t,1),-1<t)},this.trigger=function(e){var t,n,i,a=r[e];if(a)if(2===arguments.length)for(n=a.length,t=0;t<n;++t)a[t].call(this,arguments[1]);else{for(i=[],t=arguments.length,t=1;t<arguments.length;++t)i.push(arguments[t]);for(n=a.length,t=0;t<n;++t)a[t].apply(this,i)}},this.dispose=function(){r={}}}}i.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},i.prototype.push=function(e){this.trigger("data",e)},i.prototype.flush=function(e){this.trigger("done",e)},i.prototype.partialFlush=function(e){this.trigger("partialdone",e)},i.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},i.prototype.reset=function(e){this.trigger("reset",e)},e.exports=i},function(e,t){var n=function(e){return 9e4*e},i=function(e,t){return e*t},a=function(e){return e/9e4},r=function(e,t){return e/t},o=function(e,t){return n(e/t)},s=function(e,t){return a(e)*t},l=function(e,t,n){return a(n?e:e-t)};e.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:n,secondsToAudioTs:i,videoTsToSeconds:a,audioTsToSeconds:r,audioTsToVideoTs:o,videoTsToAudioTs:s,metadataTsToSeconds:l}},function(e,t,n){"use strict";var i=n(0),u=n(1).ONE_SECOND_IN_TS,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=function(s){var l,d=0;a.prototype.init.call(this),this.push=function(e){var t,n,i,a,r,o=0;if(s||(d=0),"audio"===e.type)for(l?(i=l,(l=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),l.set(e.data,i.byteLength)):l=e.data;o+5<l.length;)if(255===l[o]&&240==(246&l[o+1])){if(t=2*(1&~l[o+1]),n=(3&l[o+3])<<11|l[o+4]<<3|(224&l[o+5])>>5,r=(a=1024*(1+(3&l[o+6])))*u/c[(60&l[o+2])>>>2],n=o+n,l.byteLength<n)return;if(this.trigger("data",{pts:e.pts+d*r,dts:e.dts+d*r,sampleCount:a,audioobjecttype:1+(l[o+2]>>>6&3),channelcount:(1&l[o+2])<<2|(192&l[o+3])>>>6,samplerate:c[(60&l[o+2])>>>2],samplingfrequencyindex:(60&l[o+2])>>>2,samplesize:16,data:l.subarray(o+7+t,n)}),d++,l.byteLength===n)return void(l=void 0);l=l.subarray(n)}else o++},this.flush=function(){d=0,this.trigger("done")},this.reset=function(){l=void 0,this.trigger("reset")},this.endTimeline=function(){l=void 0,this.trigger("endedtimeline")}};a.prototype=new i,e.exports=a},function(e,t,n){"use strict";var l,i,a,r,o,s,d,u,c,p,h,f,m,y,g,v,b,_,w,k,S,x,E,T,L,A,R,O,C,D,M,I,U,B,P,j,F,N,z,q,V,G=Math.pow(2,32)-1;!function(){if(E={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var e in E)E.hasOwnProperty(e)&&(E[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);T=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),L=new Uint8Array([0,0,0,1]),R=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),C={video:R,audio:O},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0]),U=new Uint8Array([0,0,0,0,0,0,0,0]),B=U,P=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=U,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),l=function(e){for(var t,n=[],i=0,a=1;a<arguments.length;a++)n.push(arguments[a]);for(a=n.length;a--;)i+=n[a].byteLength;for(t=new Uint8Array(i+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),a=0,i=8;a<n.length;a++)t.set(n[a],i),i+=n[a].byteLength;return t},i=function(){return l(E.dinf,l(E.dref,I))},a=function(e){return l(E.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},r=function(){return l(E.ftyp,T,L,T,A)},v=function(e){return l(E.hdlr,C[e])},o=function(e){return l(E.mdat,e)},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),l(E.mdhd,t)},y=function(e){return l(E.mdia,g(e),v(e.type),d(e))},s=function(e){return l(E.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},d=function(e){return l(E.minf,"video"===e.type?l(E.vmhd,D):l(E.smhd,M),i(),_(e))},u=function(e,t){for(var n=[],i=t.length;i--;)n[i]=k(t[i]);return l.apply(null,[E.moof,s(e)].concat(n))},c=function(e){for(var t=e.length,n=[];t--;)n[t]=f(e[t]);return l.apply(null,[E.moov,h(4294967295)].concat(n).concat(p(e)))},p=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return l.apply(null,[E.mvex].concat(n))},h=function(e){e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(E.mvhd,e)},b=function(e){for(var t,n=e.samples||[],i=new Uint8Array(4+n.length),a=0;a<n.length;a++)t=n[a].flags,i[a+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return l(E.sdtp,i)},_=function(e){return l(E.stbl,w(e),l(E.stts,j),l(E.stsc,B),l(E.stsz,P),l(E.stco,U))},w=function(e){return l(E.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?F:N)(e))},F=function(e){for(var t,n,i=e.sps||[],a=e.pps||[],r=[],o=[],s=0;s<i.length;s++)r.push((65280&i[s].byteLength)>>>8),r.push(255&i[s].byteLength),r=r.concat(Array.prototype.slice.call(i[s]));for(s=0;s<a.length;s++)o.push((65280&a[s].byteLength)>>>8),o.push(255&a[s].byteLength),o=o.concat(Array.prototype.slice.call(a[s]));return t=[E.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(E.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],r,[a.length],o))),l(E.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio&&(n=e.sarRatio[0],e=e.sarRatio[1],t.push(l(E.pasp,new Uint8Array([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),l.apply(null,t)},N=function(e){return l(E.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))},m=function(e){e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return l(E.tkhd,e)},k=function(e){var t,n=l(E.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(e.baseMediaDecodeTime/(1+G)),a=Math.floor(e.baseMediaDecodeTime%(1+G)),i=l(E.tfdt,new Uint8Array([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a]));return"audio"===e.type?(t=x(e,92),l(E.traf,n,i,t)):(a=b(e),t=x(e,a.length+92),l(E.traf,n,i,t,a))},f=function(e){return e.duration=e.duration||4294967295,l(E.trak,m(e),y(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),l(E.trex,t)},z=function(e,t){var n=0,i=0,a=0,r=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(a=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,n|i|a|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},q=function(e,t){var n,i,a,r,o=e.samples||[],t=z(o,t+=20+16*o.length);for((i=new Uint8Array(t.length+16*o.length)).set(t),n=t.length,r=0;r<o.length;r++)a=o[r],i[n++]=(4278190080&a.duration)>>>24,i[n++]=(16711680&a.duration)>>>16,i[n++]=(65280&a.duration)>>>8,i[n++]=255&a.duration,i[n++]=(4278190080&a.size)>>>24,i[n++]=(16711680&a.size)>>>16,i[n++]=(65280&a.size)>>>8,i[n++]=255&a.size,i[n++]=a.flags.isLeading<<2|a.flags.dependsOn,i[n++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,i[n++]=61440&a.flags.degradationPriority,i[n++]=15&a.flags.degradationPriority,i[n++]=(4278190080&a.compositionTimeOffset)>>>24,i[n++]=(16711680&a.compositionTimeOffset)>>>16,i[n++]=(65280&a.compositionTimeOffset)>>>8,i[n++]=255&a.compositionTimeOffset;return l(E.trun,i)},V=function(e,t){var n,i,a,r,o=e.samples||[],t=z(o,t+=20+8*o.length);for((n=new Uint8Array(t.length+8*o.length)).set(t),i=t.length,r=0;r<o.length;r++)a=o[r],n[i++]=(4278190080&a.duration)>>>24,n[i++]=(16711680&a.duration)>>>16,n[i++]=(65280&a.duration)>>>8,n[i++]=255&a.duration,n[i++]=(4278190080&a.size)>>>24,n[i++]=(16711680&a.size)>>>16,n[i++]=(65280&a.size)>>>8,n[i++]=255&a.size;return l(E.trun,n)},x=function(e,t){return("audio"===e.type?V:q)(e,t)},e.exports={ftyp:r,mdat:o,moof:u,moov:c,initSegment:function(e){var t=r(),n=c(e),e=new Uint8Array(t.byteLength+n.byteLength);return e.set(t),e.set(n,t.byteLength),e}}},function(e,t){e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},function(e,t,n){var i=n(1).ONE_SECOND_IN_TS;e.exports={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/i,t=Math.floor(t)),t},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}}},function(e,t,n){"use strict";var s,l,i=n(0),a=n(22),d=n(7),r=n(24).TimestampRolloverStream,o=function(){var a=new Uint8Array(188),r=0;o.prototype.init.call(this),this.push=function(e){var t,n=0,i=188;for(r?((t=new Uint8Array(e.byteLength+r)).set(a.subarray(0,r)),t.set(e,r),r=0):t=e;i<t.byteLength;)71!==t[n]||71!==t[i]?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=188,i+=188);n<t.byteLength&&(a.set(t.subarray(n),0),r=t.byteLength-n)},this.flush=function(){188===r&&71===a[0]&&(this.trigger("data",a),r=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){r=0,this.trigger("reset")}};o.prototype=new i,(s=function(){var i,a,r,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),("pat"===t.type?a:r)(e.subarray(n),t)},a=function(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},r=function(e,t){var n,i;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],r=(31&e[i+1])<<8|e[i+2];a===d.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=r:a===d.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=r:a===d.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][r]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=d.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=d.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new i,s.STREAM_TYPES={h264:27,adts:15},(l=function(){function i(e,t,n){var i,a,r,o,s=new Uint8Array(e.size),l={type:t},d=0,u=0;if(e.data.length&&!(e.size<9)){for(l.trackId=e.data[0].pid,d=0;d<e.data.length;d++)i=e.data[d],s.set(i.data,u),u+=i.data.byteLength;a=s,(r=l).packetLength=6+(a[4]<<8|a[5]),r.dataAlignmentIndicator=0!=(4&a[6]),192&(o=a[7])&&(r.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,r.pts*=4,r.pts+=(6&a[13])>>>1,r.dts=r.pts,64&o&&(r.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,r.dts*=4,r.dts+=(6&a[18])>>>1)),r.data=a.subarray(9+a[8]),t="video"===t||l.packetLength<=e.size,(n||t)&&(e.size=0,e.data.length=0),t&&c.trigger("data",l)}}var t,c=this,a={data:[],size:0},r={data:[],size:0},o={data:[],size:0};l.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case d.H264_STREAM_TYPE:e=a,t="video";break;case d.ADTS_STREAM_TYPE:e=r,t="audio";break;case d.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&i(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=n.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),c.trigger("data",e)}})[n.type]()},this.reset=function(){a.size=0,a.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){i(a,"video"),i(r,"audio"),i(o,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new i;var u,c={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:o,TransportParseStream:s,ElementaryStream:l,TimestampRolloverStream:r,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:n(51)};for(u in d)d.hasOwnProperty(u)&&(c[u]=d[u]);e.exports=c},function(e,t,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(e,t,n){"use strict";function i(e,t){var n=0<=(n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9])?n:0;return(16&e[t+5])>>4?n+20:n+10}function s(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=i(e,t),r(e,t))};e.exports={isLikelyAacData:function(e){var t=r(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:i,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return a[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i=10;64&e[5]&&(i+=4,i+=s(e.subarray(10,14)));do{if((t=s(e.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3])){n=e.subarray(i+10,i+t+10);for(var a=0;a<n.byteLength;a++)if(0===n[a]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){for(var i="",a=t;a<n;a++)i+="%"+("00"+e[a].toString(16)).slice(-2);return i}(n,0,a)))break;var r=n.subarray(a+1),o=(1&r[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2;return o*=4,o+=3&r[7]}}}while(i+=10,(i+=t)<e.byteLength);return null}}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var l,g,i=n(0),v=n(46),d=function(){var i,a,r=0;d.prototype.init.call(this),this.push=function(e){for(var t,n=(a=a?((t=new Uint8Array(a.byteLength+e.data.byteLength)).set(a),t.set(e.data,a.byteLength),t):e.data).byteLength;r<n-3;r++)if(1===a[r+2]){i=r+5;break}for(;i<n;)switch(a[i]){case 0:if(0!==a[i-1]){i+=2;break}if(0!==a[i-2]){i++;break}for(r+3!==i-2&&this.trigger("data",a.subarray(r+3,i-2));i++,1!==a[i]&&i<n;);r=i-2,i+=3;break;case 1:if(0!==a[i-1]||0!==a[i-2]){i+=3;break}this.trigger("data",a.subarray(r+3,i-2)),r=i-2,i+=3;break;default:i+=3}a=a.subarray(r),i-=r,r=0},this.reset=function(){a=null,r=0,this.trigger("reset")},this.flush=function(){a&&3<a.byteLength&&this.trigger("data",a.subarray(r+3)),a=null,r=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};d.prototype=new i,g={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(l=function(){var n,i,a,r,o,s,y,t=new d;l.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,a=e.pts,r=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:a,dts:r,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=s(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),t.on("partialdone",function(){n.trigger("partialdone")}),t.on("reset",function(){n.trigger("reset")}),t.on("endedtimeline",function(){n.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},y=function(e,t){for(var n=8,i=8,a=0;a<e;a++)0!==i&&(i=(n+t.readExpGolomb()+256)%256),n=0===i?n:i},o=function(e){for(var t,n,i=e.byteLength,a=[],r=1;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(a.push(r+2),r+=2):r++;if(0===a.length)return e;t=i-a.length,n=new Uint8Array(t);for(var o=0,r=0;r<t;o++,r++)o===a[0]&&(o++,a.shift()),n[r]=e[o];return n},s=function(e){var t,n,i,a,r,o,s=0,l=0,d=0,u=0,c=1,p=new v(e),h=p.readUnsignedByte(),f=p.readUnsignedByte(),m=p.readUnsignedByte();if(p.skipUnsignedExpGolomb(),g[h]&&(3===(n=p.readUnsignedExpGolomb())&&p.skipBits(1),p.skipUnsignedExpGolomb(),p.skipUnsignedExpGolomb(),p.skipBits(1),p.readBoolean()))for(a=3!==n?8:12,o=0;o<a;o++)p.readBoolean()&&y(o<6?16:64,p);if(p.skipUnsignedExpGolomb(),0===(i=p.readUnsignedExpGolomb()))p.readUnsignedExpGolomb();else if(1===i)for(p.skipBits(1),p.skipExpGolomb(),p.skipExpGolomb(),t=p.readUnsignedExpGolomb(),o=0;o<t;o++)p.skipExpGolomb();if(p.skipUnsignedExpGolomb(),p.skipBits(1),e=p.readUnsignedExpGolomb(),n=p.readUnsignedExpGolomb(),i=p.readBits(1),0===i&&p.skipBits(1),p.skipBits(1),p.readBoolean()&&(s=p.readUnsignedExpGolomb(),l=p.readUnsignedExpGolomb(),d=p.readUnsignedExpGolomb(),u=p.readUnsignedExpGolomb()),p.readBoolean()&&p.readBoolean()){switch(p.readUnsignedByte()){case 1:r=[1,1];break;case 2:r=[12,11];break;case 3:r=[10,11];break;case 4:r=[16,11];break;case 5:r=[40,33];break;case 6:r=[24,11];break;case 7:r=[20,11];break;case 8:r=[32,11];break;case 9:r=[80,33];break;case 10:r=[18,11];break;case 11:r=[15,11];break;case 12:r=[64,33];break;case 13:r=[160,99];break;case 14:r=[4,3];break;case 15:r=[3,2];break;case 16:r=[2,1];break;case 255:r=[p.readUnsignedByte()<<8|p.readUnsignedByte(),p.readUnsignedByte()<<8|p.readUnsignedByte()]}r&&(c=r[0]/r[1])}return{profileIdc:h,levelIdc:m,profileCompatibility:f,width:Math.ceil((16*(e+1)-2*s-2*l)*c),height:(2-i)*(n+1)*16-2*d-2*u,sarRatio:r}}}).prototype=new i,e.exports={H264Stream:l,NalByteStream:d}},function(e,t,n){var o=n(4).toUnsigned,s=n(12),l=function(e,t){var n,i,a,r=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=o(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),a=s(e.subarray(n+4,n+8)),i=1<i?n+i:e.byteLength,a===t[0]&&(1===t.length?r.push(e.subarray(n+8,i)):(a=l(e.subarray(n+8,i),t.slice(1))).length&&(r=r.concat(a))),n=i;return r};e.exports=l},function(e,t){e.exports=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])}},function(e,t){e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},i=1&n.flags[2],a=2&n.flags[2],r=8&n.flags[2],o=16&n.flags[2],s=32&n.flags[2],l=65536&n.flags[0],d=131072&n.flags[0],e=8;return i&&(e+=4,n.baseDataOffset=t.getUint32(12),e+=4),a&&(n.sampleDescriptionIndex=t.getUint32(e),e+=4),r&&(n.defaultSampleDuration=t.getUint32(e),e+=4),o&&(n.defaultSampleSize=t.getUint32(e),e+=4),s&&(n.defaultSampleFlags=t.getUint32(e)),l&&(n.durationIsEmpty=!0),!i&&d&&(n.baseDataOffsetIsMoof=!0),n}},function(e,t,n){var p=n(49);e.exports=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),a=1&n.flags[2],r=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],l=4&n.flags[1],d=8&n.flags[1],u=i.getUint32(4),c=8;for(a&&(n.dataOffset=i.getInt32(c),c+=4),r&&u&&(t={flags:p(e.subarray(c,c+4))},c+=4,o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),d&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t),u--);u--;)t={},o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),l&&(t.flags=p(e.subarray(c,c+4)),c+=4),d&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t);return n}},function(e,t,n){var i=n(4).toUnsigned;e.exports=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:i(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=i(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}},function(e,t,n){"use strict";function u(e,t){var n;if(e.length===t.length){for(n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}function c(e,t,n,i,a,r){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(a-n)},prependedContentDuration:r,baseMediaDecodeTime:e}}var p,s,l,i=n(0),h=n(3),f=n(20),m=n(21),y=n(5),d=n(6),g=n(1),v=n(2),b=n(10).H264Stream,_=n(25),w=n(8).isLikelyAacData,k=n(1).ONE_SECOND_IN_TS,S=n(26),x=n(27),E=function(a,r){var o=[],s=0,l=0,d=0,u=1/0;r=r||{},E.prototype.init.call(this),this.push=function(t){y.collectDtsInfo(a,t),a&&S.forEach(function(e){a[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e},this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){d=e},this.flush=function(){var e,t,n,i;0!==o.length&&(e=m.trimAdtsFramesByEarliestDts(o,a,l),a.baseMediaDecodeTime=y.calculateTrackBaseMediaDecodeTime(a,r.keepOriginalTimestamps),m.prefixWithSilence(a,e,d,u),a.samples=m.generateSampleTable(e),t=h.mdat(m.concatenateFrameData(e)),o=[],i=h.moof(s,[a]),n=new Uint8Array(i.byteLength+t.byteLength),s++,n.set(i),n.set(t,i.byteLength),y.clearDtsInfo(a),i=Math.ceil(1024*k/a.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+e.length*i}),this.trigger("data",{track:a,boxes:n})),this.trigger("done","AudioSegmentStream")},this.reset=function(){y.clearDtsInfo(a),o=[],this.trigger("reset")}};E.prototype=new i,(p=function(o,r){var t,n,s=0,l=[],d=[];r=r||{},p.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){y.collectDtsInfo(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],x.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,o.pps=[e.data]),l.push(e)},this.flush=function(){for(var e,t,n,i=0;l.length&&"access_unit_delimiter_rbsp"!==l[0].nalUnitType;)l.shift();if(0===l.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=f.groupNalsIntoFrames(l),(t=f.groupFramesIntoGops(e))[0][0].keyFrame||((n=this.getGopForFusion_(l[0],o))?(i=n.duration,t.unshift(n),t.byteLength+=n.byteLength,t.nalCount+=n.nalCount,t.pts=n.pts,t.dts=n.dts,t.duration+=n.duration):t=f.extendFirstKeyFrame(t)),d.length){var a=r.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t);if(!a)return this.gopCache_.unshift({gop:t.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),l=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");y.clearDtsInfo(o),t=a}y.collectDtsInfo(o,t),o.samples=f.generateSampleTable(t),e=h.mdat(f.concatenateNalData(t)),o.baseMediaDecodeTime=y.calculateTrackBaseMediaDecodeTime(o,r.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),n=t[0],a=t[t.length-1],this.trigger("segmentTimingInfo",c(o.baseMediaDecodeTime,n.dts,n.pts,a.dts+a.duration,a.pts+a.duration,i)),this.trigger("timingInfo",{start:t[0].pts,end:t[t.length-1].pts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),l=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),i=h.moof(s,[o]),t=new Uint8Array(i.byteLength+e.byteLength),s++,t.set(i),t.set(e,i.byteLength),this.trigger("data",{track:o,boxes:t}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),l=[],this.gopCache_.length=0,d.length=0,this.trigger("reset")},this.resetStream_=function(){y.clearDtsInfo(o),n=t=void 0},this.getGopForFusion_=function(e){for(var t,n,i,a=1/0,r=0;r<this.gopCache_.length;r++)n=(i=this.gopCache_[r]).gop,o.pps&&u(o.pps[0],i.pps[0])&&o.sps&&u(o.sps[0],i.sps[0])&&(n.dts<o.timelineStartInfo.dts||-1e4<=(n=e.dts-n.dts-n.duration)&&n<=45e3&&(!t||n<a)&&(t=i,a=n));return t?t.gop:null},this.alignGopsAtStart_=function(e){for(var t,n,i,a,r=e.byteLength,o=e.nalCount,s=e.duration,l=t=0;l<d.length&&t<e.length&&(n=d[l],i=e[t],n.pts!==i.pts);)i.pts>n.pts?l++:(t++,r-=i.byteLength,o-=i.nalCount,s-=i.duration);return 0===t?e:t===e.length?null:((a=e.slice(t)).byteLength=r,a.duration=s,a.nalCount=o,a.pts=a[0].pts,a.dts=a[0].dts,a)},this.alignGopsAtEnd_=function(e){for(var t,n,i=d.length-1,a=e.length-1,r=null,o=!1;0<=i&&0<=a;){if(t=d[i],n=e[a],t.pts===n.pts){o=!0;break}t.pts>n.pts?i--:(i===d.length-1&&(r=a),a--)}if(!o&&null===r)return null;if(0===(l=o?a:r))return e;var s=e.slice(l),l=s.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return s.byteLength=l.byteLength,s.duration=l.duration,s.nalCount=l.nalCount,s.pts=s[0].pts,s.dts=s[0].dts,s},this.alignGopsWith=function(e){d=e}}).prototype=new i,(l=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,l.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new i,l.prototype.flush=function(e){var t,n,i,a=0,r={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,x.forEach(function(e){r.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,S.forEach(function(e){r.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?r.type=this.pendingTracks[0].type:r.type="combined",this.emittedTracks+=this.pendingTracks.length,e=h.initSegment(this.pendingTracks),r.initSegment=new Uint8Array(e.byteLength),r.initSegment.set(e),r.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)r.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=g.metadataTsToSeconds(t.startPts,o,this.keepOriginalTimestamps),t.endTime=g.metadataTsToSeconds(t.endPts,o,this.keepOriginalTimestamps),r.captionStreams[t.stream]=!0,r.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=g.metadataTsToSeconds(n.pts,o,this.keepOriginalTimestamps),r.metadata.push(n);for(r.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",r),i=0;i<r.captions.length;i++)t=r.captions[i],this.trigger("caption",t);for(i=0;i<r.metadata.length;i++)n=r.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},l.prototype.setRemux=function(e){this.remuxTracks=e},(s=function(i){var a,r,o=this,n=!0;s.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new d.MetadataStream,t.aacStream=new _,t.audioTimestampRolloverStream=new d.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new d.TimestampRolloverStream("timed-metadata"),t.adtsStream=new v,t.coalesceStream=new l(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||t.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new E(r,i),t.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream),o.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!a}))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new d.MetadataStream,n.packetStream=new d.TransportPacketStream,n.parseStream=new d.TransportParseStream,n.elementaryStream=new d.ElementaryStream,n.timestampRolloverStream=new d.TimestampRolloverStream,n.adtsStream=new v,n.h264Stream=new b,n.captionStream=new d.CaptionStream,n.coalesceStream=new l(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream).pipe(n.timestampRolloverStream),n.timestampRolloverStream.pipe(n.h264Stream),n.timestampRolloverStream.pipe(n.adtsStream),n.timestampRolloverStream.pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)a||"video"!==e.tracks[t].type?r||"audio"!==e.tracks[t].type||((r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;a&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new p(a,i),n.videoSegmentStream.on("timelineStartInfo",function(e){r&&!i.keepOriginalTimestamps&&(r.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts-o.baseMediaDecodeTime))}),n.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),n.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){r&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.videoSegmentStream.on("timingInfo",o.trigger.bind(o,"videoTimingInfo")),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),r&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new E(r,i),n.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!a})}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("id3Frame",function(e){e.dispatchType=n.metadataStream.dispatchType,o.trigger("id3Frame",e)}),n.coalesceStream.on("caption",this.trigger.bind(this,"caption")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,y.clearDtsInfo(r),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),a&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,y.clearDtsInfo(a),t.captionStream.reset()),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;i.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){var t;n&&((t=w(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new i,e.exports={Transmuxer:s,VideoSegmentStream:p,AudioSegmentStream:E,AUDIO_PROPERTIES:S,VIDEO_PROPERTIES:x,generateVideoSegmentTimingInfo:c}},function(e,t,n){"use strict";var d=function(e,t){function a(e,t){(t=e.position+t)<e.bytes.byteLength||((t=new Uint8Array(2*t)).set(e.bytes.subarray(0,e.position),0),e.bytes=t,e.view=new DataView(e.bytes.buffer))}var n,i=0,r=16384,o=d.widthBytes||new Uint8Array("width".length),s=d.heightBytes||new Uint8Array("height".length),l=d.videocodecidBytes||new Uint8Array("videocodecid".length);if(!d.widthBytes){for(n=0;n<"width".length;n++)o[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)s[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)l[n]="videocodecid".charCodeAt(n);d.widthBytes=o,d.heightBytes=s,d.videocodecidBytes=l}switch(this.keyFrame=!1,e){case d.VIDEO_TAG:this.length=16,r*=6;break;case d.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case d.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i=t||0,t=i+(n=n||e.byteLength);a(this,n),this.bytes.set(e.subarray(i,t),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(0<i)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===i+4?this.length-=4:0<i&&(t=i+4,n=this.length-t,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),i=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var e;switch(this.bytes[0]){case d.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case d.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case d.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return e=this.length-11,this.bytes[1]=(16711680&e)>>>16,this.bytes[2]=(65280&e)>>>8,this.bytes[3]=(255&e)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=d.frameTime(this.bytes),this}};d.AUDIO_TAG=8,d.VIDEO_TAG=9,d.METADATA_TAG=18,d.isAudioFrame=function(e){return d.AUDIO_TAG===e[0]},d.isVideoFrame=function(e){return d.VIDEO_TAG===e[0]},d.isMetaData=function(e){return d.METADATA_TAG===e[0]},d.isKeyFrame=function(e){return d.isVideoFrame(e)?23===e[11]:!!d.isAudioFrame(e)||!!d.isMetaData(e)},d.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},e.exports=d},function(e,t,n){"use strict";var i={codecs:n(19),mp4:n(47),flv:n(53),mp2t:n(58),partial:n(59)};i.mp4.tools=n(63),i.flv.tools=n(65),i.mp2t.tools=n(66),e.exports=i},function(e,t,n){e.exports={Adts:n(2),h264:n(10)}},function(e,t){function l(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n}e.exports={groupNalsIntoFrames:function(e){var t,n,i=[],a=[];for(a.byteLength=0,a.nalCount=0,a.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,a.byteLength+=i.byteLength,a.nalCount+=i.length,a.duration+=i.duration,a.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return a.length&&(!i.duration||i.duration<=0)&&(i.duration=a[a.length-1].duration),a.byteLength+=i.byteLength,a.nalCount+=i.length,a.duration+=i.duration,a.push(i),a},groupFramesIntoGops:function(e){var t,n,i=[],a=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=e[0].pts,a.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(a.push(i),a.byteLength+=i.byteLength,a.nalCount+=i.nalCount,a.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return a.length&&i.duration<=0&&(i.duration=a[a.length-1].duration),a.byteLength+=i.byteLength,a.nalCount+=i.nalCount,a.duration+=i.duration,a.push(i),a},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){for(var n,i,a,r=t||0,o=[],s=0;s<e.length;s++)for(i=e[s],n=0;n<i.length;n++)a=i[n],r+=(a=l(a,r)).size,o.push(a);return o},concatenateNalData:function(e){for(var t,n,i,a,r,o=0,s=e.byteLength,l=e.nalCount,d=new Uint8Array(s+4*l),u=new DataView(d.buffer),c=0;c<e.length;c++)for(i=e[c],t=0;t<i.length;t++)for(a=i[t],n=0;n<a.length;n++)r=a[n],u.setUint32(o,r.data.byteLength),o+=4,d.set(r.data,o),o+=r.data.byteLength;return d},generateSampleTableForFrame:function(e,t){var n=[],t=l(e,t||0);return n.push(t),n},concatenateNalDataForFrame:function(e){for(var t,n=0,i=e.byteLength,a=e.length,r=new Uint8Array(i+4*a),o=new DataView(r.buffer),s=0;s<e.length;s++)t=e[s],o.setUint32(n,t.data.byteLength),n+=4,r.set(t.data,n),n+=t.data.byteLength;return r}}},function(e,t,n){var p=n(50),h=n(1);e.exports={prefixWithSilence:function(e,t,n,i){var a,r,o,s,l,d,u=0,c=0;if(t.length&&(a=h.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(h.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(o=a-Math.max(n,i),c=(u=Math.floor(o/r))*r),!(u<1||c>h.ONE_SECOND_IN_TS/2))){for(s=(s=p()[e.samplerate])||t[0].data,l=0;l<u;l++)d=t[0],t.splice(0,0,{data:s,dts:d.dts-r,pts:d.pts-r});e.baseMediaDecodeTime-=Math.floor(h.videoTsToAudioTs(c,e.samplerate))}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i],n.push({size:t.data.byteLength,duration:1024});return n},concatenateFrameData:function(e){for(var t,n=0,i=new Uint8Array(function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].data.byteLength;return t}(e)),a=0;a<e.length;a++)t=e[a],i.set(t.data,n),n+=t.data.byteLength;return i}}},function(e,t,n){"use strict";var i=n(0),a=n(23),r=function(){r.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new u(0,0),new u(0,1),new u(1,0),new u(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};r.prototype=new i,r.prototype.push=function(e){var t,n;if("sei_rbsp"===e.nalUnitType&&(t=a.parseSei(e.escapedRBSP),t.payloadType===a.USER_DATA_REGISTERED_ITU_T_T35&&(n=a.parseUserData(t))))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=a.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},r.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},r.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},r.prototype.flush=function(){return this.flushStream("flush")},r.prototype.partialFlush=function(){return this.flushStream("partialFlush")},r.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},r.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},r.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},r.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},r.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};function o(e){return null===e?"":(e=l[e]||e,String.fromCharCode(e))}function s(){for(var e=[],t=15;t--;)e.push("");return e}var l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},d=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(e,t){u.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,a,r=32639&e.ccData;r!==this.lastControlCode_?(4096==(61440&r)?this.lastControlCode_=r:r!==this.PADDING_&&(this.lastControlCode_=null),t=r>>>8,n=255&r,r===this.PADDING_||(r===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":r===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),a=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=a,this.startPts_=e.pts):r===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):r===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):r===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):r===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):r===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):r===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=s()):r===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=s():r===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=s()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,n)?(i=o((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isExtCharacter(t,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=o((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isMidRowCode(t,n)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&n)&&this.addFormatting(e.pts,["i"]),1==(1&n)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,n)?this.column_+=3&n:this.isPAC(t,n)?(a=d.indexOf(7968&r),"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&r)&&(this.column_=4*((14&r)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===n&&(n=null),i=o(t),i+=o(n),this[this.mode_](e.pts,i),this.column_+=i.length))):this.lastControlCode_=null}};u.prototype=new i,u.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},u.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=s(),this.nonDisplayed_=s(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},u.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},u.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},u.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},u.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},u.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},u.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},u.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},u.prototype.isNormalChar=function(e){return 32<=e&&e<=127},u.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=s(),this.displayed_=s()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},u.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);t=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,t)},u.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},u.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},u.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},u.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},u.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},e.exports={CaptionStream:r,Cea608Stream:u}},function(e,t,n){"use strict";e.exports={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,a=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)a+=255,t++;if(a+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=a,n.payload=e.subarray(t,t+a);break}n.payload=void 0}t+=a,a=i=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,a,r,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)r={type:3&t[2+(a=3*n)],pts:e},4&t[2+a]&&(r.ccData=t[3+a]<<8|t[4+a],o.push(r));return o},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,a=[],r=1;r<i-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(a.push(r+2),r+=2):r++;if(0===a.length)return e;t=i-a.length,n=new Uint8Array(t);for(var o=0,r=0;r<t;o++,r++)o===a[0]&&(o++,a.shift()),n[r]=e[o];return n},USER_DATA_REGISTERED_ITU_T_T35:4}},function(e,t,n){"use strict";function i(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}var n=n(0),a=function(e){var t,n;a.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=i(e.dts,n),e.pts=i(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};a.prototype=new n,e.exports={TimestampRolloverStream:a,handleRollover:i}},function(e,t,n){"use strict";var i=n(0),s=n(8),a=function(){var r=new Uint8Array,o=0;a.prototype.init.call(this),this.setTimestamp=function(e){o=e},this.push=function(e){var t,n,i=0,a=0;for(r.length?(n=r.length,(r=new Uint8Array(e.byteLength+n)).set(r.subarray(0,n)),r.set(e,n)):r=e;3<=r.length-a;)if(r[a]!=="I".charCodeAt(0)||r[a+1]!=="D".charCodeAt(0)||r[a+2]!=="3".charCodeAt(0))if(255!=(255&r[a])||240!=(240&r[a+1]))a++;else{if(r.length-a<7)break;if(a+(i=s.parseAdtsSize(r,a))>r.length)break;t={type:"audio",data:r.subarray(a,a+i),pts:o,dts:o},this.trigger("data",t),a+=i}else{if(r.length-a<10)break;if(a+(i=s.parseId3TagSize(r,a))>r.length)break;t={type:"timed-metadata",data:r.subarray(a,a+i)},this.trigger("data",t),a+=i}e=r.length-a,r=0<e?r.subarray(a):new Uint8Array},this.reset=function(){r=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){r=new Uint8Array,this.trigger("endedtimeline")}};a.prototype=new i,e.exports=a},function(e,t){e.exports=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"]},function(e,t){e.exports=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"]},function(e,a,r){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}a.setTimeout=function(){return new i(n.call(setTimeout,t,arguments),clearTimeout)},a.setInterval=function(){return new i(n.call(setInterval,t,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this._id)},a.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},a.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},a._unrefActive=a.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(68),a.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,a.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(9))},function(e,t,n){var i=n(36),a=n(37),r=n(38),o=n(40);e.exports=function(e,t){return i(e)||a(e,t)||r(e,t)||o()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(t,e,n){(function(e){t.exports=function i(a,r,o){function s(t,e){if(!r[t]){if(!a[t]){if(0,l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}n=r[t]={exports:{}};a[t][0].call(n.exports,function(e){return s(a[t][1][e]||e)},n,n.exports,i,a,r,o)}return r[t].exports}for(var l=!1,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(V,n,i){(function(z,q){var e,t;e=this,t=function(){"use strict";function d(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<w;e+=2)(0,R[e])(R[e+1]),R[e]=void 0,R[e+1]=void 0;w=0}function o(e,t){var n=this,i=new this.constructor(l);void 0===i[C]&&v(i);var a,r=n._state;return r?(a=arguments[r-1],x(function(){return g(r,i,a,n._result)})):m(n,i,e,t),i}function s(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(l);return p(t,e),t}function l(){}function u(e){try{return e.then}catch(e){return U.error=e,U}}function r(e,i,a){x(function(t){var n=!1,e=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(a,i,function(e){n||(n=!0,(i!==e?p:h)(t,e))},function(e){n||(n=!0,f(t,e))},t._label);!n&&e&&(n=!0,f(t,e))},e)}function c(e,t,n){var i,a;t.constructor===e.constructor&&n===o&&t.constructor.resolve===s?(i=e,(a=t)._state===M?h(i,a._result):a._state===I?f(i,a._result):m(a,void 0,function(e){return p(i,e)},function(e){return f(i,e)})):n===U?(f(e,U.error),U.error=null):void 0!==n&&d(n)?r(e,t,n):h(e,t)}function p(e,t){var n,i;e===t?f(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!=i&&"function"!=i?h(e,t):c(e,t,u(t)))}function i(e){e._onerror&&e._onerror(e._result),y(e)}function h(e,t){e._state===D&&(e._result=t,e._state=M,0!==e._subscribers.length&&x(y,e))}function f(e,t){e._state===D&&(e._state=I,e._result=t,x(i,e))}function m(e,t,n,i){var a=e._subscribers,r=a.length;e._onerror=null,a[r]=t,a[r+M]=n,a[r+I]=i,0===r&&e._state&&x(y,e)}function y(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,a=void 0,r=e._result,o=0;o<t.length;o+=3)i=t[o],a=t[o+n],i?g(n,i,a,r):a(r);e._subscribers.length=0}}function g(e,t,n,i){var a=d(n),r=void 0,o=void 0,s=void 0,l=void 0;if(a){if((r=function(e,t){try{return e(t)}catch(e){return U.error=e,U}}(n,i))===U?(l=!0,o=r.error,r.error=null):s=!0,t===r)return void f(t,new TypeError("A promises callback cannot return that same promise."))}else r=i,s=!0;t._state!==D||(a&&s?p(t,r):l?f(t,o):e===M?h(t,r):e===I&&f(t,r))}function v(e){e[C]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var e,a,b,_=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},w=0,k=void 0,S=void 0,x=function(e,t){R[w]=e,R[w+1]=t,2===(w+=2)&&(S?S(n):O())},E="undefined"!=typeof window?window:void 0,T=E||{},L=T.MutationObserver||T.WebKitMutationObserver,A="undefined"==typeof self&&void 0!==z&&"[object process]"==={}.toString.call(z),T="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,R=new Array(1e3),O=void 0,O=A?function(){return z.nextTick(n)}:L?(a=0,L=new L(n),b=document.createTextNode(""),L.observe(b,{characterData:!0}),function(){b.data=a=++a%2}):T?((e=new MessageChannel).port1.onmessage=n,function(){return e.port2.postMessage(0)}):(void 0===E&&"function"==typeof V?function(){try{var e=Function("return this")().require("vertx");return void 0!==(k=e.runOnLoop||e.runOnContext)?function(){k(n)}:t()}catch(e){return t()}}:t)(),C=Math.random().toString(36).substring(2),D=void 0,M=1,I=2,U={error:null},B=0,P=(N.prototype._enumerate=function(e){for(var t=0;this._state===D&&t<e.length;t++)this._eachEntry(e[t],t)},N.prototype._eachEntry=function(t,e){var n,i,a=this._instanceConstructor,r=a.resolve;r===s?(n=u(t))===o&&t._state!==D?this._settledAt(t._state,e,t._result):"function"!=typeof n?(this._remaining--,this._result[e]=t):a===j?(c(i=new a(l),t,n),this._willSettleAt(i,e)):this._willSettleAt(new a(function(e){return e(t)}),e):this._willSettleAt(r(t),e)},N.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===D&&(this._remaining--,e===I?f(i,n):this._result[t]=n),0===this._remaining&&h(i,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,function(e){return n._settledAt(M,t,e)},function(e){return n._settledAt(I,t,e)})},N),j=(F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(t){var n=this.constructor;return d(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},F);function F(e){this[C]=B++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof F?function(t,e){try{e(function(e){p(t,e)},function(e){f(t,e)})}catch(e){f(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function N(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[C]||v(this.promise),_(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):f(this.promise,new Error("Array Methods must be provided an Array"))}return j.prototype.then=o,j.all=function(e){return new P(this,e).promise},j.race=function(a){var r=this;return new r(_(a)?function(e,t){for(var n=a.length,i=0;i<n;i++)r.resolve(a[i]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},j.resolve=s,j.reject=function(e){var t=new this(l);return f(t,e),t},j._setScheduler=function(e){S=e},j._setAsap=function(e){x=e},j._asap=x,j.polyfill=function(){var e=void 0;if(void 0!==q)e=q;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j},"object"==typeof i&&void 0!==n?n.exports=t():e.ES6Promise=t()}).call(this,V("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function d(e){return void 0===e}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,a,r;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(d(o=this._events[e]))return!1;if(s(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),o.apply(this,i)}else if(l(o))for(i=Array.prototype.slice.call(arguments,1),n=(r=o.slice()).length,a=0;a<n;a++)r[a].apply(this,i);return!0},i.prototype.on=i.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(n=d(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,a,r;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,i=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(r=a;0<r--;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],3:[function(e,t,n){function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(){f&&p&&(f=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!f){var e=r(o);f=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,f=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===a||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var u,c,t=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{c="function"==typeof clearTimeout?clearTimeout:a}catch(e){c=a}}();var p,h=[],f=!1,m=-1;t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||f||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],4:[function(e,t,n){var p=arguments[3],h=arguments[4],f=arguments[5],m=JSON.stringify;t.exports=function(e,t){for(var n,i=Object.keys(f),a=0,r=i.length;a<r;a++){var o=i[a],s=f[o].exports;if(s===e||s&&s.default===e){n=o;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},a=0,r=i.length;a<r;a++)l[o=i[a]]=o;h[n]=["function(require,module,exports){"+e+"(self); }",l]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};u[n]=n,h[d]=["function(require,module,exports){var f = require("+m(n)+");(f.default ? f.default : f)(self);}",u];var c={};!function e(t){for(var n in c[t]=!0,h[t][1]){var i=h[t][1][n];c[i]||e(i)}}(d);u="("+p+")({"+Object.keys(c).map(function(e){return m(e)+":["+h[e][0]+","+m(h[e][1])+"]"}).join(",")+"},{},["+m(d)+"])",d=window.URL||window.webkitURL||window.mozURL||window.msURL,u=new Blob([u],{type:"text/javascript"});if(t&&t.bare)return u;d=d.createObjectURL(u),u=new Worker(d);return u.objectURL=d,u}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createDefaultConfig=function(){return Object.assign({},i)};var i=n.defaultConfig={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},a=e("../io/io-controller.js"),r=a&&a.__esModule?a:{default:a},o=e("../config.js"),i=(i(s,null,[{key:"supportMSEH264Playback",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"supportNetworkStreamIO",value:function(){var e=new r.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t}},{key:"getNetworkLoaderTypeName",value:function(){var e=new r.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t}},{key:"supportNativeMediaPlayback",value:function(e){null==s.videoElement&&(s.videoElement=window.document.createElement("video"));e=s.videoElement.canPlayType(e);return"probably"===e||"maybe"==e}},{key:"getFeatureList",value:function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=s.supportMSEH264Playback(),e.networkStreamIO=s.supportNetworkStreamIO(),e.networkLoaderName=s.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=s.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeWebmVP8Playback=s.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=s.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"../config.js":5,"../io/io-controller.js":23}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"isComplete",value:function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}},{key:"getNearestKeyframe",value:function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,e=this._search(t.times,e);return{index:e,milliseconds:t.times[e],fileposition:t.filepositions[e]}}},{key:"_search",value:function(e,t){var n,i=0,a=e.length-1,r=0,o=a;for(t<e[0]&&(i=0,r=o+1);r<=o;){if((n=r+Math.floor((o-r)/2))===a||t>=e[n]&&t<e[n+1]){i=n;break}e[n]<t?r=n+1:o=n-1}return i}}]),a);function a(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{}],8:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){o(this,r),this._type=e,this._list=[],this._lastAppendLocation=-1}function s(){o(this,s),this._list=[]}function l(){o(this,l),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}n.SampleInfo=function e(t,n,i,a,r){o(this,e),this.dts=t,this.pts=n,this.duration=i,this.originalDts=a,this.isSyncPoint=r,this.fileposition=null},n.MediaSegmentInfo=(i(l,[{key:"appendSyncPoint",value:function(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}]),l),n.IDRSampleList=(i(s,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}},{key:"getLastSyncPointBeforeDts",value:function(e){if(0==this._list.length)return null;var t,n=this._list,i=0,a=n.length-1,r=0,o=a;for(e<n[0].dts&&(i=0,r=o+1);r<=o;){if((t=r+Math.floor((o-r)/2))===a||e>=n[t].dts&&e<n[t+1].dts){i=t;break}n[t].dts<e?r=t+1:o=t-1}return this._list[i]}}]),s),n.MediaSegmentInfoList=(i(r,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n,i=t.length-1,a=0,r=i,o=0;if(e<t[0].originalBeginDts)return-1;for(;a<=r;){if((n=a+Math.floor((r-a)/2))===i||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){o=n;break}t[n].originalBeginDts<e?a=n+1:r=n-1}return o}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=e,i=this._lastAppendLocation,e=0;-1!==i&&i<t.length&&n.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&n.originalBeginDts<t[i+1].originalBeginDts)?e=i+1:0<t.length&&(e=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=e,this._list.splice(e,0,n)}},{key:"getLastSegmentBefore",value:function(e){e=this._searchNearestSegmentBefore(e);return 0<=e?this._list[e]:null}},{key:"getLastSampleBefore",value:function(e){e=this.getLastSegmentBefore(e);return null!=e?e.lastSample:null}},{key:"getLastSyncPointBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)t--,n=this._list[t].syncPoints;return 0<n.length?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),r)},{}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e},r=i(e("events")),l=i(e("../utils/logger.js")),d=i(e("../utils/browser.js")),o=i(e("./mse-events.js")),s=e("./media-segment-info.js"),u=e("../utils/exception.js"),a=(a(c,[{key:"destroy",value:function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){if(this._mediaSource)throw new u.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL}},{key:"detachMediaElement",value:function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n=this._pendingSegments[e];n.splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null;var i=this._sourceBuffers[e];if(i){if("closed"!==t.readyState){try{t.removeSourceBuffer(i)}catch(t){l.default.e(this.TAG,t.message)}i.removeEventListener("error",this.e.onSourceBufferError),i.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){l.default.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}},{key:"appendInitSegment",value:function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var n=e,i=""+n.container;n.codec&&0<n.codec.length&&(i+=";codecs="+n.codec);var a=!1;if(l.default.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])l.default.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+i);else{a=!0;try{var r=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);r.addEventListener("error",this.e.onSourceBufferError),r.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return l.default.e(this.TAG,e.message),void this._emitter.emit(o.default.ERROR,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),a||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),d.default.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}},{key:"appendMediaSegment",value:function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();e=this._sourceBuffers[e.type];!e||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}},{key:"seek",value:function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){l.default.e(this.TAG,e.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var a,r=0;r<n.buffered.length;r++){var o=n.buffered.start(r),s=n.buffered.end(r);this._pendingRemoveRanges[t].push({start:o,end:s})}n.updating||this._doRemoveRanges(),d.default.safari&&(a=this._lastInitSegments[t])&&(this._pendingSegments[t].push(a),n.updating||this._doAppendSegments())}}}},{key:"endOfStream",value:function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}},{key:"getNearestKeyframe",value:function(e){return this._idrList.getLastSyncPointBeforeDts(e)}},{key:"_needCleanupSourceBuffer",value:function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){n=n.buffered;if(1<=n.length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1}},{key:"_doCleanupSourceBuffer",value:function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var i=n.buffered,a=!1,r=0;r<i.length;r++){var o,s=i.start(r),l=i.end(r);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(a=!0,o=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:o})):l<t&&(a=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}a&&!n.updating&&this._doRemoveRanges()}}}},{key:"_updateMediaSourceDuration",value:function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(e=this._mediaSource.duration,0<(t=this._pendingMediaDuration)&&(isNaN(e)||e<t)&&(l.default.v(this.TAG,"Update MediaSource duration from "+e+" to "+t),this._mediaSource.duration=t),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)}},{key:"_doRemoveRanges",value:function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var i=n.shift();t.remove(i.start,i.end)}}},{key:"_doAppendSegments",value:function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,i,a=t[e].shift();if(a.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,i=a.timestampOffset/1e3,.1<Math.abs(n-i)&&(l.default.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+i),this._sourceBuffers[e].timestampOffset=i),delete a.timestampOffset),!a.data||0===a.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(a.data),this._isBufferFull=!1,"video"===e&&a.hasOwnProperty("info")&&this._idrList.appendArray(a.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(a),22===t.code?(this._isBufferFull||this._emitter.emit(o.default.BUFFER_FULL),this._isBufferFull=!0):(l.default.e(this.TAG,t.message),this._emitter.emit(o.default.ERROR,{code:t.code,msg:t.message}))}}}},{key:"_onSourceOpen",value:function(){if(l.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(o.default.SOURCE_OPEN)}},{key:"_onSourceEnded",value:function(){l.default.v(this.TAG,"MediaSource onSourceEnded")}},{key:"_onSourceClose",value:function(){l.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"_hasPendingSegments",value:function(){var e=this._pendingSegments;return 0<e.video.length||0<e.audio.length}},{key:"_hasPendingRemoveRanges",value:function(){var e=this._pendingRemoveRanges;return 0<e.video.length||0<e.audio.length}},{key:"_onSourceBufferUpdateEnd",value:function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(o.default.UPDATE_END)}},{key:"_onSourceBufferError",value:function(e){l.default.e(this.TAG,"SourceBuffer Error: "+e)}}]),c);function c(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,c),this.TAG="MSEController",this._config=e,this._emitter=new r.default,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new s.IDRSampleList}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./media-segment-info.js":8,"./mse-events.js":10,events:2}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},{}],11:[function(a,e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e},r=n(a("events")),o=n(a("../utils/logger.js")),s=n(a("../utils/logging-control.js")),l=n(a("./transmuxing-controller.js")),d=n(a("./transmuxing-events.js")),u=n(a("./transmuxing-worker.js")),c=n(a("./media-info.js")),i=(i(p,[{key:"destroy",value:function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),s.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"hasWorker",value:function(){return null!=this._worker}},{key:"open",value:function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()}},{key:"close",value:function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()}},{key:"seek",value:function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)}},{key:"pause",value:function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()}},{key:"resume",value:function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()}},{key:"_onInitSegment",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(d.default.INIT_SEGMENT,e,t)})}},{key:"_onMediaSegment",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(d.default.MEDIA_SEGMENT,e,t)})}},{key:"_onLoadingComplete",value:function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(d.default.LOADING_COMPLETE)})}},{key:"_onRecoveredEarlyEof",value:function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(d.default.RECOVERED_EARLY_EOF)})}},{key:"_onMediaInfo",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(d.default.MEDIA_INFO,e)})}},{key:"_onMetaDataArrived",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(d.default.METADATA_ARRIVED,e)})}},{key:"_onScriptDataArrived",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(d.default.SCRIPTDATA_ARRIVED,e)})}},{key:"_onStatisticsInfo",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(d.default.STATISTICS_INFO,e)})}},{key:"_onIOError",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(d.default.IO_ERROR,e,t)})}},{key:"_onDemuxError",value:function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(d.default.DEMUX_ERROR,e,t)})}},{key:"_onRecommendSeekpoint",value:function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(d.default.RECOMMEND_SEEKPOINT,e)})}},{key:"_onLoggingConfigChanged",value:function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})}},{key:"_onWorkerMessage",value:function(e){var t=e.data,e=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case d.default.INIT_SEGMENT:case d.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,e.type,e.data);break;case d.default.LOADING_COMPLETE:case d.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case d.default.MEDIA_INFO:Object.setPrototypeOf(e,c.default.prototype),this._emitter.emit(t.msg,e);break;case d.default.METADATA_ARRIVED:case d.default.SCRIPTDATA_ARRIVED:case d.default.STATISTICS_INFO:this._emitter.emit(t.msg,e);break;case d.default.IO_ERROR:case d.default.DEMUX_ERROR:this._emitter.emit(t.msg,e.type,e.info);break;case d.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,e);break;case"logcat_callback":o.default.emitter.emit("log",e.type,e.logcat)}}}]),p);function p(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.TAG="Transmuxer",this._emitter=new r.default,n.enableWorker&&"undefined"!=typeof Worker)try{var e=a("webworkify");this._worker=e(u.default),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[t,n]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},s.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:s.default.getConfig()})}catch(e){o.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new l.default(t,n)}else this._controller=new l.default(t,n);var i;this._controller&&((i=this._controller).on(d.default.IO_ERROR,this._onIOError.bind(this)),i.on(d.default.DEMUX_ERROR,this._onDemuxError.bind(this)),i.on(d.default.INIT_SEGMENT,this._onInitSegment.bind(this)),i.on(d.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),i.on(d.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),i.on(d.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),i.on(d.default.MEDIA_INFO,this._onMediaInfo.bind(this)),i.on(d.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),i.on(d.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),i.on(d.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),i.on(d.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)))}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}t.default=i},{"../utils/logger.js":41,"../utils/logging-control.js":42,"./media-info.js":7,"./transmuxing-controller.js":12,"./transmuxing-events.js":13,"./transmuxing-worker.js":14,events:2,webworkify:4}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e},r=i(e("events")),o=i(e("../utils/logger.js")),s=i(e("../utils/browser.js")),l=i(e("./media-info.js")),d=i(e("../demux/flv-demuxer.js")),u=i(e("../remux/mp4-remuxer.js")),c=i(e("../demux/demux-errors.js")),p=i(e("../io/io-controller.js")),h=i(e("./transmuxing-events.js")),a=(e("../io/loader.js"),a(f,[{key:"destroy",value:function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"start",value:function(){this._loadSegment(0),this._enableStatisticsReporter()}},{key:"_loadSegment",value:function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],e=this._ioctl=new p.default(n,this._config,e);e.onError=this._onIOException.bind(this),e.onSeeked=this._onIOSeeked.bind(this),e.onComplete=this._onIOComplete.bind(this),e.onRedirect=this._onIORedirect.bind(this),e.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):e.onDataArrival=this._onInitChunkArrival.bind(this),e.open(t)}},{key:"stop",value:function(){this._internalAbort(),this._disableStatisticsReporter()}},{key:"_internalAbort",value:function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}},{key:"pause",value:function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())}},{key:"resume",value:function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}},{key:"seek",value:function(e){var t,n,i;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(n=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(i=n.getNearestKeyframe(e),this._remuxer.seek(i.milliseconds),this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds):null==(i=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(i=i.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())}},{key:"_searchSegmentIndexContains",value:function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n}},{key:"_onInitChunkArrival",value:function(e,t){var n,i=this,a=null;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._demuxer.parseChunks(e,t)):(a=d.default.probe(e)).match?(this._demuxer=new d.default(a,this._config),this._remuxer||(this._remuxer=new u.default(this._config)),null==(n=this._mediaDataSource).duration||isNaN(n.duration)||(this._demuxer.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._demuxer.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._demuxer.overridedHasVideo=n.hasVideo),this._demuxer.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),this._demuxer.parseChunks(e,t)):(a=null,o.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){i._internalAbort()}),this._emitter.emit(h.default.DEMUX_ERROR,c.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),0)}},{key:"_onMediaInfo",value:function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,l.default.prototype));e=Object.assign({},e);Object.setPrototypeOf(e,l.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)})}},{key:"_onMetaDataArrived",value:function(e){this._emitter.emit(h.default.METADATA_ARRIVED,e)}},{key:"_onScriptDataArrived",value:function(e){this._emitter.emit(h.default.SCRIPTDATA_ARRIVED,e)}},{key:"_onIOSeeked",value:function(){this._remuxer.insertDiscontinuity()}},{key:"_onIOComplete",value:function(e){e+=1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(h.default.LOADING_COMPLETE),this._disableStatisticsReporter())}},{key:"_onIORedirect",value:function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e}},{key:"_onIORecoveredEarlyEof",value:function(){this._emitter.emit(h.default.RECOVERED_EARLY_EOF)}},{key:"_onIOException",value:function(e,t){o.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(h.default.IO_ERROR,e,t),this._disableStatisticsReporter()}},{key:"_onDemuxException",value:function(e,t){o.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(h.default.DEMUX_ERROR,e,t)}},{key:"_onRemuxerInitSegmentArrival",value:function(e,t){this._emitter.emit(h.default.INIT_SEGMENT,e,t)}},{key:"_onRemuxerMediaSegmentArrival",value:function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(h.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,s.default.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(h.default.RECOMMEND_SEEKPOINT,t))}},{key:"_enableStatisticsReporter",value:function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}},{key:"_disableStatisticsReporter",value:function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"_reportSegmentMediaInfo",value:function(e){e=this._mediaInfo.segments[e],e=Object.assign({},e);e.duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(h.default.MEDIA_INFO,e)}},{key:"_reportStatisticsInfo",value:function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(h.default.STATISTICS_INFO,e)}}]),f);function f(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,f),this.TAG="TransmuxingController",this._emitter=new r.default,this._config=n,t.segments||(t.segments=[{duration:t.duration,filesize:t.filesize,url:t.url}]),"boolean"!=typeof t.cors&&(t.cors=!0),"boolean"!=typeof t.withCredentials&&(t.withCredentials=!1),this._mediaDataSource=t;var i=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach(function(e){e.timestampBase=i,i+=e.duration,e.cors=t.cors,e.withCredentials=t.withCredentials,n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy)}),isNaN(i)||this._mediaDataSource.duration===i||(this._mediaDataSource.duration=i),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../demux/demux-errors.js":16,"../demux/flv-demuxer.js":18,"../io/io-controller.js":23,"../io/loader.js":24,"../remux/mp4-remuxer.js":38,"../utils/browser.js":39,"../utils/logger.js":41,"./media-info.js":7,"./transmuxing-events.js":13,events:2}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},{}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=(i(e("../utils/logger.js")),e("../utils/logging-control.js")),r=i(a),o=i(e("../utils/polyfill.js")),s=i(e("./transmuxing-controller.js")),l=i(e("./transmuxing-events.js"));n.default=function(n){var t=null,i=function(e,t){n.postMessage({msg:"logcat_callback",data:{type:e,logcat:t}})}.bind(this);o.default.install(),n.addEventListener("message",function(e){switch(e.data.cmd){case"init":(t=new s.default(e.data.param[0],e.data.param[1])).on(l.default.IO_ERROR,function(e,t){n.postMessage({msg:l.default.IO_ERROR,data:{type:e,info:t}})}.bind(this)),t.on(l.default.DEMUX_ERROR,function(e,t){n.postMessage({msg:l.default.DEMUX_ERROR,data:{type:e,info:t}})}.bind(this)),t.on(l.default.INIT_SEGMENT,function(e,t){e={msg:l.default.INIT_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),t.on(l.default.MEDIA_SEGMENT,function(e,t){e={msg:l.default.MEDIA_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),t.on(l.default.LOADING_COMPLETE,function(){var e={msg:l.default.LOADING_COMPLETE};n.postMessage(e)}.bind(this)),t.on(l.default.RECOVERED_EARLY_EOF,function(){var e={msg:l.default.RECOVERED_EARLY_EOF};n.postMessage(e)}.bind(this)),t.on(l.default.MEDIA_INFO,function(e){e={msg:l.default.MEDIA_INFO,data:e},n.postMessage(e)}.bind(this)),t.on(l.default.METADATA_ARRIVED,function(e){e={msg:l.default.METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),t.on(l.default.SCRIPTDATA_ARRIVED,function(e){e={msg:l.default.SCRIPTDATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),t.on(l.default.STATISTICS_INFO,function(e){e={msg:l.default.STATISTICS_INFO,data:e},n.postMessage(e)}.bind(this)),t.on(l.default.RECOMMEND_SEEKPOINT,function(e){n.postMessage({msg:l.default.RECOMMEND_SEEKPOINT,data:e})}.bind(this));break;case"destroy":t&&(t.destroy(),t=null),n.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(e.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":e=e.data.param;r.default.applyConfig(e),!0===e.enableCallback?r.default.addLogListener(i):r.default.removeLogListener(i)}})}},{"../utils/logger.js":41,"../utils/logging-control.js":42,"../utils/polyfill.js":43,"./transmuxing-controller.js":12,"./transmuxing-events.js":13}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},g=i(e("../utils/logger.js")),r=i(e("../utils/utf8-conv.js")),v=e("../utils/exception.js"),b=(e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]),a=(a(_,null,[{key:"parseScriptData",value:function(e,t,n){var i={};try{var a=_.parseValue(e,t,n),r=_.parseValue(e,t+a.size,n-a.size);i[a.data]=r.data}catch(e){g.default.e("AMF",e.toString())}return i}},{key:"parseObject",value:function(e,t,n){if(n<3)throw new v.IllegalStateException("Data not enough when parse ScriptDataObject");var i=_.parseString(e,t,n),t=_.parseValue(e,t+i.size,n-i.size),n=t.objectEnd;return{data:{name:i.data,value:t.data},size:i.size+t.size,objectEnd:n}}},{key:"parseVariable",value:function(e,t,n){return _.parseObject(e,t,n)}},{key:"parseString",value:function(e,t,n){if(n<2)throw new v.IllegalStateException("Data not enough when parse String");n=new DataView(e,t,n).getUint16(0,!b);return{data:0<n?(0,r.default)(new Uint8Array(e,t+2,n)):"",size:2+n}}},{key:"parseLongString",value:function(e,t,n){if(n<4)throw new v.IllegalStateException("Data not enough when parse LongString");n=new DataView(e,t,n).getUint32(0,!b);return{data:0<n?(0,r.default)(new Uint8Array(e,t+4,n)):"",size:4+n}}},{key:"parseDate",value:function(e,t,n){if(n<10)throw new v.IllegalStateException("Data size invalid when parse Date");t=new DataView(e,t,n),n=t.getFloat64(0,!b);return n+=60*t.getInt16(8,!b)*1e3,{data:new Date(n),size:10}}},{key:"parseValue",value:function(e,t,n){if(n<1)throw new v.IllegalStateException("Data not enough when parse Value");var i=new DataView(e,t,n),a=1,r=i.getUint8(0),o=void 0,s=!1;try{switch(r){case 0:o=i.getFloat64(1,!b),a+=8;break;case 1:o=!!i.getUint8(1),a+=1;break;case 2:var l=_.parseString(e,t+1,n-1),o=l.data;a+=l.size;break;case 3:o={};var d=0;for(9==(16777215&i.getUint32(n-4,!b))&&(d=3);a<n-4;){var u=_.parseObject(e,t+a,n-a-d);if(u.objectEnd)break;o[u.data.name]=u.data.value,a+=u.size}a<=n-3&&9==(16777215&i.getUint32(a-1,!b))&&(a+=3);break;case 8:o={},a+=4;var c=0;for(9==(16777215&i.getUint32(n-4,!b))&&(c=3);a<n-8;){var p=_.parseVariable(e,t+a,n-a-c);if(p.objectEnd)break;o[p.data.name]=p.data.value,a+=p.size}a<=n-3&&9==(16777215&i.getUint32(a-1,!b))&&(a+=3);break;case 9:a=1,s=!(o=void 0);break;case 10:o=[];var h=i.getUint32(1,!b);a+=4;for(var f=0;f<h;f++){var m=_.parseValue(e,t+a,n-a);o.push(m.data),a+=m.size}break;case 11:var y=_.parseDate(e,t+1,n-1);o=y.data,a+=y.size;break;case 12:y=_.parseString(e,t+1,n-1);o=y.data,a+=y.size;break;default:a=n,g.default.w("AMF","Unsupported AMF value type "+r)}}catch(e){g.default.e("AMF",e.toString())}return{data:o,size:a,objectEnd:s}}}]),_);function _(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../utils/exception.js":40,"../utils/logger.js":41,"../utils/utf8-conv.js":44}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=e("../utils/exception.js"),i=(i(r,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new a.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),e=new Uint8Array(4);e.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(e.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(32<e)throw new a.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;t=e-this._current_word_bits_left;this._fillCurrentWord();e=Math.min(t,this._current_word_bits_left),t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,n<<e|t}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){for(var e=void 0,e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),r);function r(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"../utils/exception.js":40}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},k=i(e("../utils/logger.js")),o=i(e("./amf-parser.js")),S=i(e("./sps-parser.js")),x=i(e("./demux-errors.js")),s=i(e("../core/media-info.js")),d=e("../utils/exception.js"),a=(a(u,[{key:"destroy",value:function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}},{key:"bindDataSource",value:function(e){return e.onDataArrival=this.parseChunks.bind(this),this}},{key:"resetMediaInfo",value:function(){this._mediaInfo=new s.default}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}},{key:"parseChunks",value:function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new d.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=u.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&k.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(e,n).getUint32(0,!i)&&k.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var a=new DataView(e,n);if(n+11+4>e.byteLength)break;var r=a.getUint8(0),o=16777215&a.getUint32(0,!i);if(n+11+o+4>e.byteLength)break;if(8===r||9===r||18===r){var s=a.getUint8(4),l=a.getUint8(5),l=a.getUint8(6)|l<<8|s<<16|a.getUint8(7)<<24;0!=(16777215&a.getUint32(7,!i))&&k.default.w(this.TAG,"Meet tag which has StreamID != 0!");s=n+11;switch(r){case 8:this._parseAudioData(e,s,o,l);break;case 9:this._parseVideoData(e,s,o,l,t+n);break;case 18:this._parseScriptData(e,s,o)}a=a.getUint32(11+o,!i);a!==11+o&&k.default.w(this.TAG,"Invalid PrevTagSize "+a),n+=11+o+4}else k.default.w(this.TAG,"Unsupported tag type "+r+", skipped"),n+=11+o+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n}},{key:"_parseScriptData",value:function(e,t,n){t=o.default.parseScriptData(e,t,n);if(t.hasOwnProperty("onMetaData")){if(null==t.onMetaData||"object"!==r(t.onMetaData))return void k.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&k.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=t;var i,a,n=this._metadata.onMetaData;this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},n)),"boolean"==typeof n.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration?this._durationOverrided||(i=Math.floor(n.duration*this._timescale),this._duration=i,this._mediaInfo.duration=i):this._mediaInfo.duration=0,"number"!=typeof n.framerate||0<(i=Math.floor(1e3*n.framerate))&&(a=i/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=a,this._referenceFrameRate.fps_num=i,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=a),"object"===r(n.keyframes)?(this._mediaInfo.hasKeyframesIndex=!0,a=n.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(a),n.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=n,k.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(t).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},t))}},{key:"_parseKeyframesIndex",value:function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var a=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(a),n.push(e.filepositions[i])}return{times:t,filepositions:n}}},{key:"_parseAudioData",value:function(e,t,n,i){if(n<=1)k.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){var a=(this._littleEndian,new DataView(e,t,n)).getUint8(0),r=a>>>4;if(2==r||10==r){var o,s=(12&a)>>>2;if(0<=s&&s<=4){o=this._flvSoundRateTable[s];var l=1&a,d=this._audioMetadata,a=this._audioTrack;if(d||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(d=this._audioMetadata={}).type="audio",d.id=a.id,d.timescale=this._timescale,d.duration=this._duration,d.audioSampleRate=o,d.channelCount=0==l?1:2),10==r){var u=this._parseAACAudioData(e,t+1,n-1);null!=u&&(0===u.packetType?(d.config&&k.default.w(this.TAG,"Found another AudioSpecificConfig!"),l=u.data,d.audioSampleRate=l.samplingRate,d.channelCount=l.channelCount,d.codec=l.codec,d.originalCodec=l.originalCodec,d.config=l.config,d.refSampleDuration=1024/d.audioSampleRate*d.timescale,k.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",d),(l=this._mediaInfo).audioCodec=d.originalCodec,l.audioSampleRate=d.audioSampleRate,l.audioChannelCount=d.channelCount,l.hasVideo?null!=l.videoCodec&&(l.mimeType='video/x-flv; codecs="'+l.videoCodec+","+l.audioCodec+'"'):l.mimeType='video/x-flv; codecs="'+l.audioCodec+'"',l.isComplete()&&this._onMediaInfo(l)):1===u.packetType?(c=this._timestampBase+i,c={unit:u.data,length:u.data.byteLength,dts:c,pts:c},a.samples.push(c),a.length+=u.data.length):k.default.e(this.TAG,"Flv: Unsupported AAC data type "+u.packetType))}else if(2==r){if(!d.codec){var c=this._parseMP3AudioData(e,t+1,n-1,!0);if(null==c)return;d.audioSampleRate=c.samplingRate,d.channelCount=c.channelCount,d.codec=c.codec,d.originalCodec=c.originalCodec,d.refSampleDuration=1152/d.audioSampleRate*d.timescale,k.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",d);u=this._mediaInfo;u.audioCodec=d.codec,u.audioSampleRate=d.audioSampleRate,u.audioChannelCount=d.channelCount,u.audioDataRate=c.bitRate,u.hasVideo?null!=u.videoCodec&&(u.mimeType='video/x-flv; codecs="'+u.videoCodec+","+u.audioCodec+'"'):u.mimeType='video/x-flv; codecs="'+u.audioCodec+'"',u.isComplete()&&this._onMediaInfo(u)}n=this._parseMP3AudioData(e,t+1,n-1,!1);null!=n&&(i=this._timestampBase+i,i={unit:n,length:n.byteLength,dts:i,pts:i},a.samples.push(i),a.length+=n.length)}}else this._onError(x.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+s)}else this._onError(x.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+r)}}},{key:"_parseAACAudioData",value:function(e,t,n){if(!(n<=1)){var i={},a=new Uint8Array(e,t,n);return i.packetType=a[0],0===a[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):i.data=a.subarray(1),i}k.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(e,t,n){var i,a,r=new Uint8Array(e,t,n),o=null,s=0,e=null,s=i=r[0]>>>3;if((a=(7&r[0])<<1|r[1]>>>7)<0||a>=this._mpegSamplingRates.length)this._onError(x.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{t=this._mpegSamplingRates[a],n=(120&r[1])>>>3;if(!(n<0||8<=n)){5===s&&(e=(7&r[1])<<1|r[2]>>>7,r[2]);r=self.navigator.userAgent.toLowerCase();return-1!==r.indexOf("firefox")?e=6<=a?(s=5,o=new Array(4),a-3):(s=2,o=new Array(2),a):-1!==r.indexOf("android")?(s=2,o=new Array(2),e=a):(s=5,e=a,o=new Array(4),6<=a?e=a-3:1==n&&(s=2,o=new Array(2),e=a)),o[0]=s<<3,o[0]|=(15&a)>>>1,o[1]=(15&a)<<7,o[1]|=(15&n)<<3,5===s&&(o[1]|=(15&e)>>>1,o[2]=(1&e)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:t,channelCount:n,codec:"mp4a.40."+s,originalCodec:"mp4a.40."+i}}this._onError(x.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_parseMP3AudioData",value:function(e,t,n,i){if(!(n<4)){var a=(this._littleEndian,new Uint8Array(e,t,n)),r=null;if(i){if(255!==a[0])return;var o=a[1]>>>3&3,s=(6&a[1])>>1,l=(240&a[2])>>>4,e=(12&a[2])>>>2,t=3!=(a[3]>>>6&3)?2:1,n=0,i=0;switch(o){case 0:n=this._mpegAudioV25SampleRateTable[e];break;case 2:n=this._mpegAudioV20SampleRateTable[e];break;case 3:n=this._mpegAudioV10SampleRateTable[e]}switch(s){case 1:l<this._mpegAudioL3BitRateTable.length&&(i=this._mpegAudioL3BitRateTable[l]);break;case 2:l<this._mpegAudioL2BitRateTable.length&&(i=this._mpegAudioL2BitRateTable[l]);break;case 3:l<this._mpegAudioL1BitRateTable.length&&(i=this._mpegAudioL1BitRateTable[l])}r={bitRate:i,samplingRate:n,channelCount:t,codec:"mp3",originalCodec:"mp3"}}else r=a;return r}k.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")}},{key:"_parseVideoData",value:function(e,t,n,i,a){var r,o;n<=1?k.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(r=(240&(o=new Uint8Array(e,t,n)[0]))>>>4,7==(o=15&o)?this._parseAVCVideoPacket(e,t+1,n-1,i,a,r):this._onError(x.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+o))}},{key:"_parseAVCVideoPacket",value:function(e,t,n,i,a,r){if(n<4)k.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),o=(16777215&s.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,i,a,r,o);else if(2!==l)return void this._onError(x.default.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(e,t,n){if(n<7)k.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,a=this._videoTrack,r=this._littleEndian,o=new DataView(e,t,n);i?void 0!==i.avcc&&k.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=a.id,i.timescale=this._timescale,i.duration=this._duration);var s=o.getUint8(0),a=o.getUint8(1);if(o.getUint8(2),o.getUint8(3),1===s&&0!==a)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var l=31&o.getUint8(5);if(0!=l){1<l&&k.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+l);for(var d=6,u=0;u<l;u++){var c=o.getUint16(d,!r);if(d+=2,0!==c){var p=new Uint8Array(e,t+d,c);d+=c;var h=S.default.parseSPS(p);if(0===u){i.codecWidth=h.codec_size.width,i.codecHeight=h.codec_size.height,i.presentWidth=h.present_size.width,i.presentHeight=h.present_size.height,i.profile=h.profile_string,i.level=h.level_string,i.bitDepth=h.bit_depth,i.chromaFormat=h.chroma_format,i.sarRatio=h.sar_ratio,i.frameRate=h.frame_rate,!1!==h.frame_rate.fixed&&0!==h.frame_rate.fps_num&&0!==h.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var f=i.frameRate.fps_den,c=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(f/c);for(var m=p.subarray(1,4),y="avc1.",g=0;g<3;g++){var v=m[g].toString(16);v.length<2&&(v="0"+v),y+=v}i.codec=y;p=this._mediaInfo;p.width=i.codecWidth,p.height=i.codecHeight,p.fps=i.frameRate.fps,p.profile=i.profile,p.level=i.level,p.refFrames=h.ref_frames,p.chromaFormat=h.chroma_format_string,p.sarNum=i.sarRatio.width,p.sarDen=i.sarRatio.height,p.videoCodec=y,p.hasAudio?null!=p.audioCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.videoCodec+'"',p.isComplete()&&this._onMediaInfo(p)}}}var b=o.getUint8(d);if(0!==b){1<b&&k.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+b),d++;for(var _=0;_<b;_++){var w=o.getUint16(d,!r);d+=2,0!==w&&(d+=w)}i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),k.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(x.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(x.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(x.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(x.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"_parseAVCVideoData",value:function(e,t,n,i,a,r,o){for(var s=this._littleEndian,l=new DataView(e,t,n),d=[],u=0,c=0,p=this._naluLengthSize,h=this._timestampBase+i,f=1===r;c<n;){if(n<=c+4){k.default.w(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+c+", dataSize = "+n);break}var m=l.getUint32(c,!s);if(3===p&&(m>>>=8),n-p<m)return void k.default.w(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var y=31&l.getUint8(c+p);5==y&&(f=!0);var g=new Uint8Array(e,t+c,p+m),y={type:y,data:g};d.push(y),u+=g.byteLength,c+=p+m}d.length&&(r=this._videoTrack,o={units:d,length:u,isKeyframe:f,dts:h,cts:o,pts:h+o},f&&(o.fileposition=a),r.samples.push(o),r.length+=u)}},{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e}},{key:"onMetaDataArrived",get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e}},{key:"onScriptDataArrived",get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(e){this._timestampBase=e}},{key:"overridedDuration",get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e}},{key:"overridedHasAudio",set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e}},{key:"overridedHasVideo",set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e}}],[{key:"probe",value:function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var i=(4&t[4])>>>2!=0,a=0!=(1&t[4]),t=(e=t)[t=5]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<9?n:{match:!0,consumed:t,dataOffset:t,hasAudioTrack:i,hasVideoTrack:a}}}]),u);function u(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,u),this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0])}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../core/media-info.js":7,"../utils/exception.js":40,"../utils/logger.js":41,"./amf-parser.js":15,"./demux-errors.js":16,"./sps-parser.js":19}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},e=e("./exp-golomb.js"),L=e&&e.__esModule?e:{default:e},i=(i(A,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),a=0,r=0;r<n;r++)2<=r&&3===t[r]&&0===t[r-1]&&0===t[r-2]||(i[a]=t[r],a++);return new Uint8Array(i.buffer,0,a)}},{key:"parseSPS",value:function(e){var t=A._ebsp2rbsp(e),n=new L.default(t);n.readByte();var i=n.readByte();n.readByte();var a=n.readByte();n.readUEG();var r=A.getProfileString(i),o=A.getLevelString(a),s=1,l=420,d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(s=n.readUEG())&&n.readBits(1),s<=3&&(l=[0,420,422,444][s]),d=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var u=3!==s?8:12,c=0;c<u;c++)n.readBool()&&A._skipScalingList(n,c<6?16:64);n.readUEG();var p=n.readUEG();if(0===p)n.readUEG();else if(1===p){n.readBits(1),n.readSEG(),n.readSEG();for(var h=n.readUEG(),f=0;f<h;f++)n.readSEG()}var m=n.readUEG();n.readBits(1);var y=n.readUEG(),g=n.readUEG(),v=n.readBits(1);0===v&&n.readBits(1),n.readBits(1);var b=0,_=0,w=0,k=0;n.readBool()&&(b=n.readUEG(),_=n.readUEG(),w=n.readUEG(),k=n.readUEG());var S=1,e=1,t=0,a=!0,i=0,p=0;n.readBool()&&(n.readBool()&&(0<(x=n.readByte())&&x<16?(S=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][x-1],e=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][x-1]):255===x&&(S=n.readByte()<<8|n.readByte(),e=n.readByte()<<8|n.readByte())),n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()&&(T=n.readBits(32),E=n.readBits(32),a=n.readBool(),t=(i=E)/(p=2*T)));var x=1;1===S&&1===e||(x=S/e);var E=0,T=0;T=0===s?(E=1,2-v):(E=3===s?1:2,(1===s?2:1)*(2-v));y=16*(y+1),v=16*(g+1)*(2-v);y-=(b+_)*E,v-=(w+k)*T;x=Math.ceil(y*x);return n.destroy(),n=null,{profile_string:r,level_string:o,bit_depth:d,ref_frames:m,chroma_format:l,chroma_format_string:A.getChromaFormatString(l),frame_rate:{fixed:a,fps:t,fps_den:p,fps_num:i},sar_ratio:{width:S,height:e},codec_size:{width:y,height:v},present_size:{width:x,height:v}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,i=8,a=0;a<t;a++)0!==i&&(i=(n+e.readSEG()+256)%256),n=0===i?n:i}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),A);function A(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"./exp-golomb.js":17}],20:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(e("./utils/polyfill.js")),o=i(e("./core/features.js")),s=e("./io/loader.js"),l=i(e("./player/flv-player.js")),d=i(e("./player/native-player.js")),u=i(e("./player/player-events.js")),c=e("./player/player-errors.js"),p=i(e("./utils/logging-control.js")),h=e("./utils/exception.js");r.default.install();r={createPlayer:function(e,t){if(null==e||"object"!==(void 0===e?"undefined":a(e)))throw new h.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!e.hasOwnProperty("type"))throw new h.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");return new("flv"!==e.type?d:l).default(e,t)},isSupported:function(){return o.default.supportMSEH264Playback()},getFeatureList:function(){return o.default.getFeatureList()}};r.BaseLoader=s.BaseLoader,r.LoaderStatus=s.LoaderStatus,r.LoaderErrors=s.LoaderErrors,r.Events=u.default,r.ErrorTypes=c.ErrorTypes,r.ErrorDetails=c.ErrorDetails,r.FlvPlayer=l.default,r.NativePlayer=d.default,r.LoggingControl=p.default,Object.defineProperty(r,"version",{enumerable:!0,get:function(){return"1.5.0"}}),n.default=r},{"./core/features.js":6,"./io/loader.js":24,"./player/flv-player.js":32,"./player/native-player.js":33,"./player/player-errors.js":34,"./player/player-events.js":35,"./utils/exception.js":40,"./utils/logging-control.js":42,"./utils/polyfill.js":43}],21:[function(e,t,n){"use strict";t.exports=e("./flv.js").default},{"./flv.js":20}],22:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(n):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,n)}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e},o=(i(e("../utils/logger.js")),e("../utils/browser.js")),s=i(o),u=e("./loader.js"),c=e("../utils/exception.js"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,u.BaseLoader),r(l,null,[{key:"isSupported",value:function(){try{var e=s.default.msedge&&15048<=s.default.version.minor,t=!s.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}}}]),r(l,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){var n=this;this._dataSource=e,this._range=t;var i=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL);var a=this._seekHandler.getConfig(i,t),r=new self.Headers;if("object"===d(a.headers)){var o,s=a.headers;for(o in s)s.hasOwnProperty(o)&&r.append(o,s[o])}t={method:"GET",headers:r,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===d(this._config.headers))for(var l in this._config.headers)r.append(l,this._config.headers[l]);!1===e.cors&&(t.mode="same-origin"),e.withCredentials&&(t.credentials="include"),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),this._status=u.LoaderStatus.kConnecting,self.fetch(a.url,t).then(function(e){if(n._requestAbort)return n._requestAbort=!1,void(n._status=u.LoaderStatus.kIdle);if(e.ok&&200<=e.status&&e.status<=299){e.url!==a.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t));var t=e.headers.get("Content-Length");return null!=t&&(n._contentLength=parseInt(t),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength)),n._pump.call(n,e.body.getReader())}if(n._status=u.LoaderStatus.kError,!n._onError)throw new c.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}).catch(function(e){if(n._status=u.LoaderStatus.kError,!n._onError)throw e;n._onError(u.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})})}},{key:"abort",value:function(){this._requestAbort=!0}},{key:"_pump",value:function(i){var a=this;return i.read().then(function(e){if(e.done)if(null!==a._contentLength&&a._receivedLength<a._contentLength){a._status=u.LoaderStatus.kError;var t=u.LoaderErrors.EARLY_EOF,n={code:-1,msg:"Fetch stream meet Early-EOF"};if(!a._onError)throw new c.RuntimeException(n.msg);a._onError(t,n)}else a._status=u.LoaderStatus.kComplete,a._onComplete&&a._onComplete(a._range.from,a._range.from+a._receivedLength-1);else{if(!0===a._requestAbort)return a._requestAbort=!1,a._status=u.LoaderStatus.kComplete,i.cancel();a._status=u.LoaderStatus.kBuffering;n=e.value.buffer,e=a._range.from+a._receivedLength;a._receivedLength+=n.byteLength,a._onDataArrival&&a._onDataArrival(n,e,a._receivedLength),a._pump(i)}}).catch(function(e){if(11!==e.code||!s.default.msedge){a._status=u.LoaderStatus.kError;var t=0,n=null,n=19!==e.code&&"network error"!==e.message||!(null===a._contentLength||null!==a._contentLength&&a._receivedLength<a._contentLength)?(t=u.LoaderErrors.EXCEPTION,{code:e.code,msg:e.message}):(t=u.LoaderErrors.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!a._onError)throw new c.RuntimeException(n.msg);a._onError(t,n)}})}}]),l);function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,"fetch-stream-loader"));return n.TAG="FetchStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=r},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e},r=i(e("../utils/logger.js")),o=i(e("./speed-sampler.js")),s=e("./loader.js"),l=i(e("./fetch-stream-loader.js")),d=i(e("./xhr-moz-chunked-loader.js")),u=(i(e("./xhr-msstream-loader.js")),e("./xhr-range-loader.js")),c=i(u),p=i(e("./websocket-loader.js")),h=i(e("./range-seek-handler.js")),f=i(e("./param-seek-handler.js")),m=e("../utils/exception.js"),a=(a(y,[{key:"destroy",value:function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}},{key:"isWorking",value:function(){return this._loader&&this._loader.isWorking()&&!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"_selectSeekHandler",value:function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new h.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new f.default(t,n)}else{if("custom"!==e.seekType)throw new m.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new m.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}}},{key:"_selectLoader",value:function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=p.default;else if(l.default.isSupported())this._loaderClass=l.default;else if(d.default.isSupported())this._loaderClass=d.default;else{if(!c.default.isSupported())throw new m.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=c.default}}},{key:"_createLoader",value:function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)}},{key:"open",value:function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))}},{key:"abort",value:function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}},{key:"pause",value:function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}},{key:"resume",value:function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))}},{key:"seek",value:function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)}},{key:"_internalSeek",value:function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;e={from:e,to:-1};this._currentRange={from:e.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,e),this._onSeeked&&this._onSeeked()}},{key:"updateUrl",value:function(e){if(!e||"string"!=typeof e||0===e.length)throw new m.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e}},{key:"_expandBuffer",value:function(e){for(var t,n,i=this._stashSize;i+1048576<e;)i*=2;(i+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(i),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,i).set(n,0)),this._stashBuffer=t,this._bufferSize=i)}},{key:"_normalizeSpeed",value:function(e){var t,n=this._speedNormalizeList,i=n.length-1,a=0,r=i;if(e<n[0])return n[0];for(;a<=r;){if((t=a+Math.floor((r-a)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?a=t+1:r=t-1}}},{key:"_adjustStashSize",value:function(e){var t=0;8192<(t=this._config.isLive||e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)&&(t=8192);e=1024*t+1048576;this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t}},{key:"_dispatchChunks",value:function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)}},{key:"_onURLRedirect",value:function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)}},{key:"_onContentLengthKnown",value:function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)}},{key:"_onLoaderChunkArrival",value:function(e,t,n){if(!this._onDataArrival)throw new m.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");var i,a,r,o,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength),0!==(i=this._speedSampler.lastSecondKBps)&&(a=this._normalizeSpeed(i),this._speedNormalized!==a&&(this._speedNormalized=a,this._adjustStashSize(a))),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?(new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(i=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(a=this._stashBuffer.slice(0,this._stashUsed),(r=this._dispatchChunks(a,this._stashByteStart))<a.byteLength?0<r&&(a=new Uint8Array(a,r),i.set(a,0),this._stashUsed=a.byteLength,this._stashByteStart+=r):(this._stashUsed=0,this._stashByteStart+=r),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&(this._expandBuffer(r),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o))):0===this._stashUsed?(s=this._dispatchChunks(e,t))<e.byteLength&&((o=e.byteLength-s)>this._bufferSize&&this._expandBuffer(o),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(e,s),0),this._stashUsed+=o,this._stashByteStart=t+s):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(t=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(s=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<s&&(e=new Uint8Array(this._stashBuffer,s),t.set(e,0)),this._stashUsed-=s,this._stashByteStart+=s))}},{key:"_flushStashBuffer",value:function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;r.default.w(this.TAG,i+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,i}return 0}},{key:"_onLoaderComplete",value:function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}},{key:"_onLoaderError",value:function(e,t){switch(r.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=s.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case s.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var n=this._currentRange.to+1;return void(n<this._totalLength&&(r.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)))}e=s.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case s.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case s.LoaderErrors.CONNECTING_TIMEOUT:case s.LoaderErrors.HTTP_STATUS_CODE_INVALID:case s.LoaderErrors.EXCEPTION:}if(!this._onError)throw new m.RuntimeException("IOException: "+t.msg);this._onError(e,t)}},{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(e){this._extraData=e}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(e){this._onSeeked=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onComplete",get:function(){return this._onComplete},set:function(e){this._onComplete=e}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(e){this._onRedirect=e}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===c.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}}]),y);function y(e,t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,y),this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../utils/exception.js":40,"../utils/logger.js":41,"./fetch-stream-loader.js":22,"./loader.js":24,"./param-seek-handler.js":25,"./range-seek-handler.js":26,"./speed-sampler.js":27,"./websocket-loader.js":28,"./xhr-moz-chunked-loader.js":29,"./xhr-msstream-loader.js":30,"./xhr-range-loader.js":31}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BaseLoader=n.LoaderErrors=n.LoaderStatus=void 0;var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=e("../utils/exception.js"),r=n.LoaderStatus={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}n.LoaderErrors={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},n.BaseLoader=(i(s,[{key:"destroy",value:function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},{key:"isWorking",value:function(){return this._status===r.kConnecting||this._status===r.kBuffering}},{key:"open",value:function(e,t){throw new a.NotImplementedException("Unimplemented abstract function!")}},{key:"abort",value:function(){throw new a.NotImplementedException("Unimplemented abstract function!")}},{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e}},{key:"onError",get:function(){return this._onError},set:function(e){this._onError=e}},{key:"onComplete",get:function(){return this._onComplete},set:function(e){this._onComplete=e}}]),s)},{"../utils/exception.js":40}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getConfig",value:function(e,t){var n=e;return 0===t.from&&-1===t.to||(e=!0,-1===n.indexOf("?")&&(n+="?",e=!1),e&&(n+="&"),n+=this._startName+"="+t.from.toString(),-1!==t.to&&(n+="&"+this._endName+"="+t.to.toString())),{url:n,headers:{}}}},{key:"removeURLParameters",value:function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?");-1!==i&&(n=e.substring(i+1));var a="";if(null!=n&&0<n.length)for(var r=n.split("&"),o=0;o<r.length;o++){var s=r[o].split("="),l=0<o;s[0]!==this._startName&&s[0]!==this._endName&&(l&&(a+="&"),a+=r[o])}return 0===a.length?t:t+"?"+a}}]),a);function a(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this._startName=e,this._endName=t}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getConfig",value:function(e,t){var n,i={};return 0!==t.from||-1!==t.to?(n=void 0,n=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",i.Range=n):this._zeroStart&&(i.Range="bytes=0-"),{url:e,headers:i}}},{key:"removeURLParameters",value:function(e){return e}}]),a);function a(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this._zeroStart=e||!1}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0}},{key:"averageKBps",get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}}]),a);function a(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(n):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,n)}var i=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e},r=e("../utils/logger.js"),o=(r&&r.__esModule,e("./loader.js")),s=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o.BaseLoader),i(l,null,[{key:"isSupported",value:function(){try{return void 0!==self.WebSocket}catch(e){return!1}}}]),i(l,[{key:"destroy",value:function(){this._ws&&this.abort(),a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"destroy",this).call(this)}},{key:"open",value:function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(e){this._status=o.LoaderStatus.kError;var n={code:e.code,msg:e.message};if(!this._onError)throw new s.RuntimeException(n.msg);this._onError(o.LoaderErrors.EXCEPTION,n)}}},{key:"abort",value:function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.LoaderStatus.kComplete}},{key:"_onWebSocketOpen",value:function(e){this._status=o.LoaderStatus.kBuffering}},{key:"_onWebSocketClose",value:function(e){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1}},{key:"_onWebSocketMessage",value:function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=o.LoaderStatus.kError;e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new s.RuntimeException(e.msg);this._onError(o.LoaderErrors.EXCEPTION,e)}}},{key:"_dispatchArrayBuffer",value:function(e){var t=e,e=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength)}},{key:"_onWebSocketError",value:function(e){this._status=o.LoaderStatus.kError;e={code:e.code,msg:e.message};if(!this._onError)throw new s.RuntimeException(e.msg);this._onError(o.LoaderErrors.EXCEPTION,e)}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,"websocket-loader"));return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(n):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,n)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},r=e("../utils/logger.js"),o=r&&r.__esModule?r:{default:r},d=e("./loader.js"),s=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,d.BaseLoader),i(u,null,[{key:"isSupported",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return o.default.w("MozChunkedLoader",e.message),!1}}}]),i(u,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),a(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._dataSource=e,this._range=t;var n=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL);t=this._seekHandler.getConfig(n,t);this._requestURL=t.url;var i=this._xhr=new XMLHttpRequest;if(i.open("GET",t.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"===l(t.headers)){var a,r=t.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"===l(this._config.headers)){var o,s=this._config.headers;for(o in s)s.hasOwnProperty(o)&&i.setRequestHeader(o,s[o])}this._status=d.LoaderStatus.kConnecting,i.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=d.LoaderStatus.kComplete}},{key:"_onReadyStateChange",value:function(e){var t=e.target;if(2===t.readyState)if(null!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect&&(e=this._seekHandler.removeURLParameters(t.responseURL),this._onURLRedirect(e)),0!==t.status&&(t.status<200||299<t.status)){if(this._status=d.LoaderStatus.kError,!this._onError)throw new s.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(d.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=d.LoaderStatus.kBuffering}},{key:"_onProgress",value:function(e){var t;this._status!==d.LoaderStatus.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength))}},{key:"_onLoadEnd",value:function(e){!0!==this._requestAbort?this._status!==d.LoaderStatus.kError&&(this._status=d.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1}},{key:"_onXhrError",value:function(e){this._status=d.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&e.loaded<this._contentLength?(t=d.LoaderErrors.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=d.LoaderErrors.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new s.RuntimeException(n.msg);this._onError(t,n)}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,"xhr-moz-chunked-loader"));return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(n):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,n)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},r=e("../utils/logger.js"),o=r&&r.__esModule?r:{default:r},d=e("./loader.js"),s=e("../utils/exception.js"),i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,d.BaseLoader),i(u,null,[{key:"isSupported",value:function(){try{if(void 0===self.MSStream||void 0===self.MSStreamReader)return!1;var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="ms-stream")===e.responseType}catch(e){return o.default.w("MSStreamLoader",e.message),!1}}}]),i(u,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),a(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._internalOpen(e,t,!1)}},{key:"_internalOpen",value:function(e,t,n){this._dataSource=e,n?this._currentRange=t:this._totalRange=t;n=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL));n=this._seekHandler.getConfig(n,t);this._currentRequestURL=n.url;t=this._reader=new self.MSStreamReader;t.onprogress=this._msrOnProgress.bind(this),t.onload=this._msrOnLoad.bind(this),t.onerror=this._msrOnError.bind(this);var i=this._xhr=new XMLHttpRequest;if(i.open("GET",n.url,!0),i.responseType="ms-stream",i.onreadystatechange=this._xhrOnReadyStateChange.bind(this),i.onerror=this._xhrOnError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"===l(n.headers)){var a,r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"===l(this._config.headers)){var o,s=this._config.headers;for(o in s)s.hasOwnProperty(o)&&i.setRequestHeader(o,s[o])}this._isReconnecting?this._isReconnecting=!1:this._status=d.LoaderStatus.kConnecting,i.send()}},{key:"abort",value:function(){this._internalAbort(),this._status=d.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)}},{key:"_xhrOnReadyStateChange",value:function(e){e=e.target;if(2===e.readyState)if(200<=e.status&&e.status<=299){this._status=d.LoaderStatus.kBuffering,null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect&&this._onURLRedirect(t)));var t=e.getResponseHeader("Content-Length");null==t||null!=this._contentLength||0<(t=parseInt(t))&&(this._contentLength=t,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}else{if(this._status=d.LoaderStatus.kError,!this._onError)throw new s.RuntimeException("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(d.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else 3===e.readyState&&200<=e.status&&e.status<=299&&(this._status=d.LoaderStatus.kBuffering,e=e.response,this._reader.readAsArrayBuffer(e))}},{key:"_xhrOnError",value:function(e){this._status=d.LoaderStatus.kError;var t=d.LoaderErrors.EXCEPTION,e={code:-1,msg:e.constructor.name+" "+e.type};if(!this._onError)throw new s.RuntimeException(e.msg);this._onError(t,e)}},{key:"_msrOnProgress",value:function(e){var t,n=e.target.result;null!=n?(t=n.slice(this._lastTimeBufferSize),this._lastTimeBufferSize=n.byteLength,e=this._totalRange.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n.byteLength>=this._bufferLimit&&(o.default.v(this.TAG,"MSStream buffer exceeded max size near "+(e+t.byteLength)+", reconnecting..."),this._doReconnectIfNeeded())):this._doReconnectIfNeeded()}},{key:"_doReconnectIfNeeded",value:function(){var e;(null==this._contentLength||this._receivedLength<this._contentLength)&&(this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort(),e={from:this._totalRange.from+this._receivedLength,to:-1},this._internalOpen(this._dataSource,e,!0))}},{key:"_msrOnLoad",value:function(e){this._status=d.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)}},{key:"_msrOnError",value:function(e){this._status=d.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&this._receivedLength<this._contentLength?(t=d.LoaderErrors.EARLY_EOF,{code:-1,msg:"MSStream meet Early-Eof"}):(t=d.LoaderErrors.EARLY_EOF,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new s.RuntimeException(n.msg);this._onError(t,n)}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,"xhr-msstream-loader"));return n.TAG="MSStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._reader=null,n._totalRange=null,n._currentRange=null,n._currentRequestURL=null,n._currentRedirectedURL=null,n._contentLength=null,n._receivedLength=0,n._bufferLimit=16777216,n._lastTimeBufferSize=0,n._isReconnecting=!1,n}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],31:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i?"value"in i?i.value:void 0!==(i=i.get)?i.call(n):void 0:null===(e=Object.getPrototypeOf(e))?void 0:a(e,t,n)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e},o=i(e("../utils/logger.js")),s=i(e("./speed-sampler.js")),d=e("./loader.js"),u=e("../utils/exception.js"),r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,d.BaseLoader),r(c,null,[{key:"isSupported",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return o.default.w("RangeLoader",e.message),!1}}}]),r(c,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),a(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"destroy",this).call(this)}},{key:"open",value:function(e,t){this._dataSource=e,this._range=t,this._status=d.LoaderStatus.kConnecting;t=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(t=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||t?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}},{key:"_openSubRange",value:function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,e=t+e;null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)}},{key:"_internalOpen",value:function(e,t){this._lastTimeLoaded=0;var n=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL));t=this._seekHandler.getConfig(n,t);this._currentRequestURL=t.url;var i=this._xhr=new XMLHttpRequest;if(i.open("GET",t.url,!0),i.responseType="arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onload=this._onLoad.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"===l(t.headers)){var a,r=t.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"===l(this._config.headers)){var o,s=this._config.headers;for(o in s)s.hasOwnProperty(o)&&i.setRequestHeader(o,s[o])}i.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._internalAbort(),this._status=d.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}},{key:"_onReadyStateChange",value:function(e){var t=e.target;if(2===t.readyState)if(null!=t.responseURL&&(e=this._seekHandler.removeURLParameters(t.responseURL),t.responseURL!==this._currentRequestURL&&e!==this._currentRedirectedURL&&(this._currentRedirectedURL=e,this._onURLRedirect&&this._onURLRedirect(e))),200<=t.status&&t.status<=299)this._waitForTotalLength||(this._status=d.LoaderStatus.kBuffering);else{if(this._status=d.LoaderStatus.kError,!this._onError)throw new u.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(d.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},{key:"_onProgress",value:function(e){if(this._status!==d.LoaderStatus.kError){if(null===this._contentLength){var t,n=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,n=this._totalLengthReceived=!0,t=e.total,this._internalAbort(),null!=t&0!==t&&(this._totalLength=t)),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,n)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}}},{key:"_normalizeSpeed",value:function(e){var t,n=this._chunkSizeKBList,i=n.length-1,a=0,r=i;if(e<n[0])return n[0];for(;a<=r;){if((t=a+Math.floor((r-a)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?a=t+1:r=t-1}}},{key:"_onLoad",value:function(e){var t,n;this._status!==d.LoaderStatus.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)===(t=this._speedSampler.lastSecondKBps)&&3<=++this._zeroSpeedChunkCount&&(t=this._speedSampler.currentKBps),0!==t&&(n=this._normalizeSpeed(t),this._currentSpeedNormalized!==n&&(this._currentSpeedNormalized=n,this._currentChunkSizeKB=n)),t=e.target.response,n=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,e=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():e=!0,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength),e&&(this._status=d.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))))}},{key:"_onXhrError",value:function(e){this._status=d.LoaderStatus.kError;var t=0,n=null,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=d.LoaderErrors.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=d.LoaderErrors.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new u.RuntimeException(n.msg);this._onError(t,n)}},{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}}]),c);function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,"xhr-range-loader"));return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new s.default,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=r},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24,"./speed-sampler.js":27}],32:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e},o=i(e("events")),s=i(e("../utils/logger.js")),l=i(e("../utils/browser.js")),d=i(e("./player-events.js")),u=i(e("../core/transmuxer.js")),c=i(e("../core/transmuxing-events.js")),p=i(e("../core/mse-controller.js")),h=i(e("../core/mse-events.js")),f=e("./player-errors.js"),m=e("../config.js"),y=e("../utils/exception.js"),r=(r(g,[{key:"destroy",value:function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){var n=this;e===d.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){n._emitter.emit(d.default.MEDIA_INFO,n.mediaInfo)}):e===d.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){n._emitter.emit(d.default.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new p.default(this._config),this._msectl.on(h.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(h.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(h.default.SOURCE_OPEN,function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())}),this._msectl.on(h.default.ERROR,function(e){t._emitter.emit(d.default.ERROR,f.ErrorTypes.MEDIA_ERROR,f.ErrorDetails.MEDIA_MSE_ERROR,e)}),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}},{key:"load",value:function(){var i=this;if(!this._mediaElement)throw new y.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new y.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new u.default(this._mediaDataSource,this._config),this._transmuxer.on(c.default.INIT_SEGMENT,function(e,t){i._msectl.appendInitSegment(t)}),this._transmuxer.on(c.default.MEDIA_SEGMENT,function(e,t){var n;i._msectl.appendMediaSegment(t),i._config.lazyLoad&&!i._config.isLive&&(n=i._mediaElement.currentTime,t.info.endDts>=1e3*(n+i._config.lazyLoadMaxDuration)&&null==i._progressChecker&&(s.default.v(i.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),i._suspendTransmuxer()))}),this._transmuxer.on(c.default.LOADING_COMPLETE,function(){i._msectl.endOfStream(),i._emitter.emit(d.default.LOADING_COMPLETE)}),this._transmuxer.on(c.default.RECOVERED_EARLY_EOF,function(){i._emitter.emit(d.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(c.default.IO_ERROR,function(e,t){i._emitter.emit(d.default.ERROR,f.ErrorTypes.NETWORK_ERROR,e,t)}),this._transmuxer.on(c.default.DEMUX_ERROR,function(e,t){i._emitter.emit(d.default.ERROR,f.ErrorTypes.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(c.default.MEDIA_INFO,function(e){i._mediaInfo=e,i._emitter.emit(d.default.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(c.default.METADATA_ARRIVED,function(e){i._emitter.emit(d.default.METADATA_ARRIVED,e)}),this._transmuxer.on(c.default.SCRIPTDATA_ARRIVED,function(e){i._emitter.emit(d.default.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(c.default.STATISTICS_INFO,function(e){i._statisticsInfo=i._fillStatisticsInfo(e),i._emitter.emit(d.default.STATISTICS_INFO,Object.assign({},i._statisticsInfo))}),this._transmuxer.on(c.default.RECOMMEND_SEEKPOINT,function(e){i._mediaElement&&!i._config.accurateSeek&&(i._requestSetTime=!0,i._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()))}},{key:"unload",value:function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_fillStatisticsInfo",value:function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t,n=!0,i=0,a=0;return this._mediaElement.getVideoPlaybackQuality?(i=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,a=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,a=this._mediaElement.webkitDroppedFrameCount):n=!1,n&&(e.decodedFrames=i,e.droppedFrames=a),e}},{key:"_onmseUpdateEnd",value:function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,i=0;i<e.length;i++){var a=e.start(i),r=e.end(i);if(a<=t&&t<r){n=r;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(s.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}},{key:"_onmseBufferFull",value:function(){s.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}},{key:"_suspendTransmuxer",value:function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}},{key:"_checkProgressAndResume",value:function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var a=t.start(i),r=t.end(i);if(a<=e&&e<r){e>=r-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(s.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))}},{key:"_isTimepointBuffered",value:function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),a=t.end(n);if(i<=e&&e<a)return!0}return!1}},{key:"_internalSeek",value:function(e){var t,n=this._isTimepointBuffered(e),i=!1,a=0;e<1&&0<this._mediaElement.buffered.length&&(((t=this._mediaElement.buffered.start(0))<1&&e<t||l.default.safari)&&(i=!0,a=l.default.safari?.1:t)),i?(this._requestSetTime=!0,this._mediaElement.currentTime=a):n?(this._alwaysSeekKeyframe?(n=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=n?n.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}},{key:"_checkAndApplyUnbufferedSeekpoint",value:function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},{key:"_checkAndResumeStuckPlayback",value:function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(s.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+e.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)}},{key:"_onvLoadedMetadata",value:function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)}},{key:"_onvSeeking",value:function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length){var i=n.start(0);if(i<1&&t<i||l.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=l.default.safari?.1:i)}if(this._isTimepointBuffered(t))return!this._alwaysSeekKeyframe||null!=(i=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=i.dts/1e3),void(null!=this._progressChecker&&this._checkProgressAndResume());this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}},{key:"_onvCanPlay",value:function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)}},{key:"_onvStalled",value:function(e){this._checkAndResumeStuckPlayback(!0)}},{key:"_onvProgress",value:function(e){this._checkAndResumeStuckPlayback()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e}},{key:"mediaInfo",get:function(){return Object.assign({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}}]),g);function g(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new o.default,this._config=(0,m.createDefaultConfig)(),"object"===(void 0===t?"undefined":a(t))&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new y.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;e=l.default.chrome&&(l.default.version.major<50||50===l.default.version.major&&l.default.version.build<2661);this._alwaysSeekKeyframe=!!(e||l.default.msedge||l.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=r},{"../config.js":5,"../core/mse-controller.js":9,"../core/mse-events.js":10,"../core/transmuxer.js":11,"../core/transmuxing-events.js":13,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./player-errors.js":34,"./player-events.js":35,events:2}],33:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e},o=i(e("events")),s=i(e("./player-events.js")),l=e("../config.js"),d=e("../utils/exception.js"),r=(r(u,[{key:"destroy",value:function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(e,t){var n=this;e===s.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(s.default.MEDIA_INFO,n.mediaInfo)}):e===s.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(s.default.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)}},{key:"off",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"attachMediaElement",value:function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"load",value:function(){if(!this._mediaElement)throw new d.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}},{key:"unload",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_onvLoadedMetadata",value:function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(s.default.MEDIA_INFO,this.mediaInfo)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(s.default.STATISTICS_INFO,this.statisticsInfo)}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e}},{key:"mediaInfo",get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e}},{key:"statisticsInfo",get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t,n=!0,i=0,a=0;return this._mediaElement.getVideoPlaybackQuality?(i=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,a=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,a=this._mediaElement.webkitDroppedFrameCount):n=!1,n&&(e.decodedFrames=i,e.droppedFrames=a),e}}]),u);function u(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new o.default,this._config=(0,l.createDefaultConfig)(),"object"===(void 0===t?"undefined":a(t))&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new d.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new d.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=r},{"../config.js":5,"../utils/exception.js":40,"./player-events.js":35,events:2}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorDetails=n.ErrorTypes=void 0;var i=e("../io/loader.js"),e=e("../demux/demux-errors.js"),e=e&&e.__esModule?e:{default:e};n.ErrorTypes={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},n.ErrorDetails={NETWORK_EXCEPTION:i.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:i.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:i.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:i.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:e.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:e.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:e.default.CODEC_UNSUPPORTED}},{"../demux/demux-errors.js":16,"../io/loader.js":24}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=i},{}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(u,null,[{key:"init",value:function(){for(var e in u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]})u.types.hasOwnProperty(e)&&(u.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=u.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),a=i.length,r=0;r<a;r++)t+=i[r].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var o=8,s=0;s<a;s++)n.set(i[s],o),o+=i[s].byteLength;return n}},{key:"generateInitSegment",value:function(e){var t=u.box(u.types.ftyp,u.constants.FTYP),n=u.moov(e),e=new Uint8Array(t.byteLength+n.byteLength);return e.set(t,0),e.set(n,t.byteLength),e}},{key:"moov",value:function(e){var t=u.mvhd(e.timescale,e.duration),n=u.trak(e),e=u.mvex(e);return u.box(u.types.moov,t,n,e)}},{key:"mvhd",value:function(e,t){return u.box(u.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(e){return u.box(u.types.trak,u.tkhd(e),u.mdia(e))}},{key:"tkhd",value:function(e){var t=e.id,n=e.duration,i=e.presentWidth,e=e.presentHeight;return u.box(u.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,e>>>8&255,255&e,0,0]))}},{key:"mdia",value:function(e){return u.box(u.types.mdia,u.mdhd(e),u.hdlr(e),u.minf(e))}},{key:"mdhd",value:function(e){var t=e.timescale,e=e.duration;return u.box(u.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))}},{key:"hdlr",value:function(e){var t="audio"===e.type?u.constants.HDLR_AUDIO:u.constants.HDLR_VIDEO;return u.box(u.types.hdlr,t)}},{key:"minf",value:function(e){var t="audio"===e.type?u.box(u.types.smhd,u.constants.SMHD):u.box(u.types.vmhd,u.constants.VMHD);return u.box(u.types.minf,t,u.dinf(),u.stbl(e))}},{key:"dinf",value:function(){return u.box(u.types.dinf,u.box(u.types.dref,u.constants.DREF))}},{key:"stbl",value:function(e){return u.box(u.types.stbl,u.stsd(e),u.box(u.types.stts,u.constants.STTS),u.box(u.types.stsc,u.constants.STSC),u.box(u.types.stsz,u.constants.STSZ),u.box(u.types.stco,u.constants.STCO))}},{key:"stsd",value:function(e){return"audio"===e.type?"mp3"===e.codec?u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp3(e)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp4a(e)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.avc1(e))}},{key:"mp3",value:function(e){var t=e.channelCount,e=e.audioSampleRate,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]);return u.box(u.types[".mp3"],e)}},{key:"mp4a",value:function(e){var t=e.channelCount,n=e.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return u.box(u.types.mp4a,n,u.esds(e))}},{key:"esds",value:function(e){var t=e.config||[],e=t.length,t=new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t).concat([6,1,2]));return u.box(u.types.esds,t)}},{key:"avc1",value:function(e){var t=e.avcc,n=e.codecWidth,e=e.codecHeight,e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return u.box(u.types.avc1,e,u.box(u.types.avcC,t))}},{key:"mvex",value:function(e){return u.box(u.types.mvex,u.trex(e))}},{key:"trex",value:function(e){e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.box(u.types.trex,e)}},{key:"moof",value:function(e,t){return u.box(u.types.moof,u.mfhd(e.sequenceNumber),u.traf(e,t))}},{key:"mfhd",value:function(e){e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return u.box(u.types.mfhd,e)}},{key:"traf",value:function(e,t){var n=e.id,i=u.box(u.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),n=u.box(u.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),t=u.sdtp(e),e=u.trun(e,t.byteLength+16+16+8+16+8+8);return u.box(u.types.traf,i,n,e,t)}},{key:"sdtp",value:function(e){for(var t=e.samples||[],n=t.length,i=new Uint8Array(4+n),a=0;a<n;a++){var r=t[a].flags;i[a+4]=r.isLeading<<6|r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy}return u.box(u.types.sdtp,i)}},{key:"trun",value:function(e,t){var n=e.samples||[],i=n.length,e=12+16*i,a=new Uint8Array(e);t+=8+e,a.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var r=0;r<i;r++){var o=n[r].duration,s=n[r].size,l=n[r].flags,d=n[r].cts;a.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*r)}return u.box(u.types.trun,a)}},{key:"mdat",value:function(e){return u.box(u.types.mdat,e)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}i.init(),n.default=i},{}],38:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e},B=i(e("../utils/logger.js")),P=i(e("./mp4-generator.js")),j=i(e("./aac-silent.js")),F=i(e("../utils/browser.js")),N=e("../core/media-segment-info.js"),r=e("../utils/exception.js"),a=(a(o,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(e,t){if(!this._onMediaSegment)throw new r.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}},{key:"_onTrackMetadataReceived",value:function(e,t){var n=null,i="mp4",a=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(i="mpeg",a="",new Uint8Array):P.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=P.default.generateInitSegment(t)}if(!this._onInitSegment)throw new r.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:a,container:e+"/"+i,mediaDuration:t.duration})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"flushStashedSamples",value:function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length);e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)}},{key:"_remuxAudio",value:function(e,t){if(null!=this._audioMeta){var n=e,i=n.samples,a=void 0,r=-1,o=this._audioMeta.refSampleDuration,s="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,l=this._dtsBaseInited&&void 0===this._audioNextDts,e=!1;if(i&&0!==i.length&&(1!==i.length||t)){var d=0,u=null,c=0,c=s?(d=0,n.length):(d=8)+n.length,p=null;1<i.length&&(c-=(p=i.pop()).length),null!=this._audioStashedLastSample&&(m=this._audioStashedLastSample,this._audioStashedLastSample=null,i.unshift(m),c+=m.length),null!=p&&(this._audioStashedLastSample=p);var h,f,m=i[0].dts-this._dtsBase;this._audioNextDts?a=m-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(a=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(e=!0)):a=null!=(h=this._audioSegmentInfoList.getLastSampleBefore(m))?((f=m-(h.originalDts+h.duration))<=3&&(f=0),m-(h.dts+h.duration+f)):0,e&&(h=m-a,null!=(f=this._videoSegmentInfoList.getLastSegmentBefore(m))&&f.beginDts<h?(I=j.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(m=f.beginDts,f=h-f.beginDts,B.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+m+", duration: "+f),i.unshift({unit:I,dts:m,pts:m}),c+=I.byteLength):e=!1);for(var y=[],g=0;g<i.length;g++){var v=i[g],b=v.unit,_=v.dts-this._dtsBase,w=_-a;-1===r&&(r=w);var k=0,S=!1,x=null;if(1.5*o<(k=g!==i.length-1?i[g+1].dts-this._dtsBase-a-w:null!=p?p.dts-this._dtsBase-a-w:1<=y.length?y[y.length-1].duration:Math.floor(o))&&"mp3"!==this._audioMeta.codec&&this._fillAudioTimestampGap&&!F.default.safari){S=!0;var E=Math.abs(k-o),T=Math.ceil(E/o),L=w+o;B.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\ndts: "+(w+k)+" ms, expected: "+(w+Math.round(o))+" ms, delta: "+Math.round(E)+" ms, generate: "+T+" frames");var A=j.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==A&&(B.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),A=b),x=[];for(var R=0;R<T;R++){var O,C=Math.round(L);0<x.length&&((O=x[x.length-1]).duration=C-O.dts);C={dts:C,pts:C,cts:0,unit:A,size:A.byteLength,duration:0,originalDts:_,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};x.push(C),c+=C.size,L+=o}b=x[x.length-1];b.duration=w+k-b.dts,k=Math.round(o)}y.push({dts:w,pts:w,cts:0,unit:v.unit,size:v.unit.byteLength,duration:k,originalDts:_,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),S&&y.push.apply(y,x)}s?u=new Uint8Array(c):((u=new Uint8Array(c))[0]=c>>>24&255,u[1]=c>>>16&255,u[2]=c>>>8&255,u[3]=255&c,u.set(P.default.types.mdat,4));for(var D=0;D<y.length;D++){var M=y[D].unit;u.set(M,d),d+=M.byteLength}var I=y[y.length-1],U=I.dts+I.duration;this._audioNextDts=U;e=new N.MediaSegmentInfo;e.beginDts=r,e.endDts=U,e.beginPts=r,e.endPts=U,e.originalBeginDts=y[0].originalDts,e.originalEndDts=I.originalDts+I.duration,e.firstSample=new N.SampleInfo(y[0].dts,y[0].pts,y[0].duration,y[0].originalDts,!1),e.lastSample=new N.SampleInfo(I.dts,I.pts,I.duration,I.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(e),n.samples=y,n.sequenceNumber++;I=null,I=s?new Uint8Array:P.default.moof(n,r);n.samples=[],n.length=0;e={type:"audio",data:this._mergeBoxes(I,u).buffer,sampleCount:y.length,info:e};s&&l&&(e.timestampOffset=r),this._onMediaSegment("audio",e)}}}},{key:"_remuxVideo",value:function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,a=void 0,r=-1,o=-1;if(i&&0!==i.length&&(1!==i.length||t)){var s=8,l=null,t=8+e.length,d=null;1<i.length&&(t-=(d=i.pop()).length),null!=this._videoStashedLastSample&&(c=this._videoStashedLastSample,this._videoStashedLastSample=null,i.unshift(c),t+=c.length),null!=d&&(this._videoStashedLastSample=d);var u,c,e=i[0].dts-this._dtsBase;a=this._videoNextDts?e-this._videoNextDts:!this._videoSegmentInfoList.isEmpty()&&null!=(u=this._videoSegmentInfoList.getLastSampleBefore(e))?((c=e-(u.originalDts+u.duration))<=3&&(c=0),e-(u.dts+u.duration+c)):0;for(var p=new N.MediaSegmentInfo,h=[],f=0;f<i.length;f++){var m=i[f],y=m.dts-this._dtsBase,g=m.isKeyframe,v=y-a,b=m.cts,_=v+b;-1===r&&(r=v,o=_);var w,k=0;k=f!==i.length-1?i[f+1].dts-this._dtsBase-a-v:null!=d?d.dts-this._dtsBase-a-v:1<=h.length?h[h.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),g&&((w=new N.SampleInfo(v,_,k,m.dts,!0)).fileposition=m.fileposition,p.appendSyncPoint(w)),h.push({dts:v,pts:_,cts:b,units:m.units,size:m.length,isKeyframe:g,duration:k,originalDts:y,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}(l=new Uint8Array(t))[0]=t>>>24&255,l[1]=t>>>16&255,l[2]=t>>>8&255,l[3]=255&t,l.set(P.default.types.mdat,4);for(var S=0;S<h.length;S++)for(var x=h[S].units;x.length;){var E=x.shift().data;l.set(E,s),s+=E.byteLength}var t=h[h.length-1],T=t.dts+t.duration,L=t.pts+t.duration;this._videoNextDts=T,p.beginDts=r,p.endDts=T,p.beginPts=o,p.endPts=L,p.originalBeginDts=h[0].originalDts,p.originalEndDts=t.originalDts+t.duration,p.firstSample=new N.SampleInfo(h[0].dts,h[0].pts,h[0].duration,h[0].originalDts,h[0].isKeyframe),p.lastSample=new N.SampleInfo(t.dts,t.pts,t.duration,t.originalDts,t.isKeyframe),this._isLive||this._videoSegmentInfoList.append(p),n.samples=h,n.sequenceNumber++,this._forceFirstIDR&&((A=h[0].flags).dependsOn=2,A.isNonSync=0);var A=P.default.moof(n,r);n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(A,l).buffer,sampleCount:h.length,info:p})}}}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e}}]),o);function o(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new N.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new N.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!F.default.chrome||!(F.default.version.major<50||50===F.default.version.major&&F.default.version.build<2661)),this._fillSilentAfterSeek=F.default.msedge||F.default.msie,this._mp3UseMpegAudio=!F.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.default=a},{"../core/media-segment-info.js":8,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./aac-silent.js":36,"./mp4-generator.js":37}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={};!function(){var e,t=self.navigator.userAgent.toLowerCase(),n=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0<=t.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(t)||[],i=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],t={browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",majorVersion:n[4]||n[2]||"0",platform:i[0]||""},n={};for(e in t.browser&&(n[t.browser]=!0,i=t.majorVersion.split("."),n.version={major:parseInt(t.majorVersion,10),string:t.version},1<i.length&&(n.version.minor=parseInt(i[1],10)),2<i.length&&(n.version.build=parseInt(i[2],10))),t.platform&&(n[t.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),(n.rv||n.iemobile)&&(n.rv&&delete n.rv,t.browser="msie",n.msie=!0),n.edge&&(delete n.edge,t.browser="msedge",n.msedge=!0),n.opr&&(t.browser="opera",n.opera=!0),n.safari&&n.android&&(t.browser="android",n.android=!0),n.name=t.browser,n.platform=t.platform,a)a.hasOwnProperty(e)&&delete a[e];Object.assign(a,n)}(),n.default=a},{}],40:[function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e},s=n.RuntimeException=(o(l,[{key:"toString",value:function(){return this.name+": "+this.message}},{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}}]),l);function l(e){r(this,l),this._message=e}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return r(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e))}function c(e){return r(this,c),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e))}function p(e){return r(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e))}n.IllegalStateException=(a(p,s),o(p,[{key:"name",get:function(){return"IllegalStateException"}}]),p),n.InvalidArgumentException=(a(c,s),o(c,[{key:"name",get:function(){return"InvalidArgumentException"}}]),c),n.NotImplementedException=(a(u,s),o(u,[{key:"name",get:function(){return"NotImplementedException"}}]),u)},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},e=e("events"),e=e&&e.__esModule?e:{default:e},i=(i(a,null,[{key:"e",value:function(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);t="["+e+"] > "+t;a.ENABLE_CALLBACK&&a.emitter.emit("log","error",t),a.ENABLE_ERROR&&(console.error?console.error(t):console.warn?console.warn(t):console.log(t))}},{key:"i",value:function(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);t="["+e+"] > "+t;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",t),a.ENABLE_INFO&&(console.info?console.info(t):console.log(t))}},{key:"w",value:function(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);t="["+e+"] > "+t;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",t),a.ENABLE_WARN&&(console.warn?console.warn(t):console.log(t))}},{key:"d",value:function(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);t="["+e+"] > "+t;a.ENABLE_CALLBACK&&a.emitter.emit("log","debug",t),a.ENABLE_DEBUG&&(console.debug?console.debug(t):console.log(t))}},{key:"v",value:function(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);t="["+e+"] > "+t;a.ENABLE_CALLBACK&&a.emitter.emit("log","verbose",t),a.ENABLE_VERBOSE&&console.log(t)}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new e.default,n.default=i},{events:2}],42:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},r=i(e("events")),o=i(e("./logger.js")),a=(a(s,null,[{key:"getConfig",value:function(){return{globalTag:o.default.GLOBAL_TAG,forceGlobalTag:o.default.FORCE_GLOBAL_TAG,enableVerbose:o.default.ENABLE_VERBOSE,enableDebug:o.default.ENABLE_DEBUG,enableInfo:o.default.ENABLE_INFO,enableWarn:o.default.ENABLE_WARN,enableError:o.default.ENABLE_ERROR,enableCallback:o.default.ENABLE_CALLBACK}}},{key:"applyConfig",value:function(e){o.default.GLOBAL_TAG=e.globalTag,o.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,o.default.ENABLE_VERBOSE=e.enableVerbose,o.default.ENABLE_DEBUG=e.enableDebug,o.default.ENABLE_INFO=e.enableInfo,o.default.ENABLE_WARN=e.enableWarn,o.default.ENABLE_ERROR=e.enableError,o.default.ENABLE_CALLBACK=e.enableCallback}},{key:"_notifyChange",value:function(){var e,t=s.emitter;0<t.listenerCount("change")&&(e=s.getConfig(),t.emit("change",e))}},{key:"registerListener",value:function(e){s.emitter.addListener("change",e)}},{key:"removeListener",value:function(e){s.emitter.removeListener("change",e)}},{key:"addLogListener",value:function(e){o.default.emitter.addListener("log",e),0<o.default.emitter.listenerCount("log")&&(o.default.ENABLE_CALLBACK=!0,s._notifyChange())}},{key:"removeLogListener",value:function(e){o.default.emitter.removeListener("log",e),0===o.default.emitter.listenerCount("log")&&(o.default.ENABLE_CALLBACK=!1,s._notifyChange())}},{key:"forceGlobalTag",get:function(){return o.default.FORCE_GLOBAL_TAG},set:function(e){o.default.FORCE_GLOBAL_TAG=e,s._notifyChange()}},{key:"globalTag",get:function(){return o.default.GLOBAL_TAG},set:function(e){o.default.GLOBAL_TAG=e,s._notifyChange()}},{key:"enableAll",get:function(){return o.default.ENABLE_VERBOSE&&o.default.ENABLE_DEBUG&&o.default.ENABLE_INFO&&o.default.ENABLE_WARN&&o.default.ENABLE_ERROR},set:function(e){o.default.ENABLE_VERBOSE=e,o.default.ENABLE_DEBUG=e,o.default.ENABLE_INFO=e,o.default.ENABLE_WARN=e,o.default.ENABLE_ERROR=e,s._notifyChange()}},{key:"enableDebug",get:function(){return o.default.ENABLE_DEBUG},set:function(e){o.default.ENABLE_DEBUG=e,s._notifyChange()}},{key:"enableVerbose",get:function(){return o.default.ENABLE_VERBOSE},set:function(e){o.default.ENABLE_VERBOSE=e,s._notifyChange()}},{key:"enableInfo",get:function(){return o.default.ENABLE_INFO},set:function(e){o.default.ENABLE_INFO=e,s._notifyChange()}},{key:"enableWarn",get:function(){return o.default.ENABLE_WARN},set:function(e){o.default.ENABLE_WARN=e,s._notifyChange()}},{key:"enableError",get:function(){return o.default.ENABLE_ERROR},set:function(e){o.default.ENABLE_ERROR=e,s._notifyChange()}}]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.emitter=new r.default,n.default=a},{"./logger.js":41,events:2}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"install",value:function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t},"function"!=typeof self.Promise&&e("es6-promise").polyfill()}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}i.install(),n.default=i},{"es6-promise":1}],44:[function(e,t,n){"use strict";function s(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return;return 1}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(var t=[],n=e,i=0,a=e.length;i<a;)if(n[i]<128)t.push(String.fromCharCode(n[i])),++i;else{if(!(n[i]<192))if(n[i]<224){if(s(n,i,1)){var r=(31&n[i])<<6|63&n[i+1];if(128<=r){t.push(String.fromCharCode(65535&r)),i+=2;continue}}}else if(n[i]<240){if(s(n,i,2)){var o=(15&n[i])<<12|(63&n[i+1])<<6|63&n[i+2];if(2048<=o&&55296!=(63488&o)){t.push(String.fromCharCode(65535&o)),i+=3;continue}}}else if(n[i]<248&&s(n,i,3)){o=(7&n[i])<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3];if(65536<o&&o<1114112){o-=65536,t.push(String.fromCharCode(o>>>10|55296)),t.push(String.fromCharCode(1023&o|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")}},{}]},{},[21])(21)}).call(this,n(9))},function(e,t,n){(function(r,o){window,e.exports=function(n){var i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=n,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=58)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=n(6),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function l(e){return null!==e&&"object"===r(e)}function d(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!==r(e)&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:d,isStream:function(e){return l(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function n(){var i={};function e(e,t){"object"===r(i[t])&&"object"===r(e)?i[t]=n(i[t],e):i[t]=e}for(var t=0,a=arguments.length;t<a;t++)u(arguments[t],e);return i},deepMerge:function n(){var i={};function e(e,t){"object"===r(i[t])&&"object"===r(e)?i[t]=n(i[t],e):"object"===r(e)?i[t]=n({},e):i[t]=e}for(var t=0,a=arguments.length;t<a;t++)u(arguments[t],e);return i},extend:function(n,e,i){return u(e,function(e,t){n[t]=i&&"function"==typeof e?a(e,i):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){var u=n(14);e.exports=function(e){"use strict";var t="",n=(e=e||{},0),i=e.subtitle,a=e.current,r=e.airplay,o=e.pic,s=u.$escape,l=e.screenshot,d=e.preload,e=e.url,n=i&&"webvtt"===i.type;return t+='\n<video\n    class="dplayer-video ',a&&(t+="dplayer-video-current"),t+='"\n    webkit-playsinline\n    ',r&&(t+=' x-webkit-airplay="allow" '),t+="\n    playsinline\n    ",o&&(t+='poster="',t+=s(o),t+='"'),t+="\n    ",(l||n)&&(t+='crossorigin="anonymous"'),t+="\n    ",d&&(t+='preload="',t+=s(d),t+='"'),t+="\n    ",e&&(t+='src="',t+=s(e),t+='"'),t+="\n    >\n    ",n&&(t+='\n    <track kind="metadata" default src="',t+=s(i.url),t+='"></track>\n    '),t+"\n</video>"}},function(e,t,n){e.exports=n(41)},function(e,t,n){"use strict";e.exports=function(r){var l=[];return l.toString=function(){return this.map(function(a){var e=function(){var e=a[1]||"",t=a[3];if(!t)return e;if(r&&"function"==typeof btoa){var n=(n=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),i=t.sources.map(function(e){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(e," */")});return[e].concat(i).concat([n]).join("\n")}return[e].join("\n")}();return a[2]?"@media ".concat(a[2]," {").concat(e,"}"):e}).join("")},l.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var s=[].concat(e[o]);n&&i[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),l.push(s))}},l}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(i=window)}e.exports=i},function(e,t){var n,i,e=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var s,l=[],d=!1,u=-1;function c(){d&&s&&(d=!1,s.length?l=s.concat(l):u=-1,l.length&&p())}function p(){if(!d){var e=o(c);d=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||d||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=function(n,i){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(i,e)}}},function(e,t,n){"use strict";var a=n(0);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i,n=n?n(t):a.isURLSearchParams(t)?t.toString():(i=[],a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),i.push(r(t)+"="+r(e))}))}),i.join("&"));return n&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(s,e,l){"use strict";(function(e){var n=l(0),i=l(46),t={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r,o={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(r=l(10)),r),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){o.headers[e]={}}),n.forEach(["post","put","patch"],function(e){o.headers[e]=n.merge(t)}),s.exports=o}).call(this,l(5))},function(e,t,l){"use strict";var d=l(0),u=l(47),c=l(7),p=l(49),h=l(52),f=l(53),m=l(11);e.exports=function(s){return new Promise(function(t,n){var i=s.data,a=s.headers;d.isFormData(i)&&delete a["Content-Type"];var r=new XMLHttpRequest;s.auth&&(o=s.auth.username||"",e=s.auth.password||"",a.Authorization="Basic "+btoa(o+":"+e));var e,o=p(s.baseURL,s.url);if(r.open(s.method.toUpperCase(),c(o,s.params,s.paramsSerializer),!0),r.timeout=s.timeout,r.onreadystatechange=function(){var e;r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in r?h(r.getAllResponseHeaders()):null,e={data:s.responseType&&"text"!==s.responseType?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:e,config:s,request:r},u(t,n,e),r=null)},r.onabort=function(){r&&(n(m("Request aborted",s,"ECONNABORTED",r)),r=null)},r.onerror=function(){n(m("Network Error",s,null,r)),r=null},r.ontimeout=function(){var e="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(e=s.timeoutErrorMessage),n(m(e,s,"ECONNABORTED",r)),r=null},d.isStandardBrowserEnv()&&(e=l(54),(e=(s.withCredentials||f(o))&&s.xsrfCookieName?e.read(s.xsrfCookieName):void 0)&&(a[s.xsrfHeaderName]=e)),"setRequestHeader"in r&&d.forEach(a,function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete a[t]:r.setRequestHeader(t,e)}),d.isUndefined(s.withCredentials)||(r.withCredentials=!!s.withCredentials),s.responseType)try{r.responseType=s.responseType}catch(t){if("json"!==s.responseType)throw t}"function"==typeof s.onDownloadProgress&&r.addEventListener("progress",s.onDownloadProgress),"function"==typeof s.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(e){r&&(r.abort(),n(e),r=null)}),void 0===i&&(i=null),r.send(i)})}},function(e,t,n){"use strict";var r=n(48);e.exports=function(e,t,n,i,a){e=new Error(e);return r(e,t,n,i,a)}},function(e,t,n){"use strict";var s=n(0);e.exports=function(t,n){n=n||{};var i={},e=["url","method","params","data"],a=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];s.forEach(e,function(e){void 0!==n[e]&&(i[e]=n[e])}),s.forEach(a,function(e){s.isObject(n[e])?i[e]=s.deepMerge(t[e],n[e]):void 0!==n[e]?i[e]=n[e]:s.isObject(t[e])?i[e]=s.deepMerge(t[e]):void 0!==t[e]&&(i[e]=t[e])}),s.forEach(r,function(e){void 0!==n[e]?i[e]=n[e]:void 0!==t[e]&&(i[e]=t[e])});var o=e.concat(a).concat(r),r=Object.keys(n).filter(function(e){return-1===o.indexOf(e)});return s.forEach(r,function(e){void 0!==n[e]?i[e]=n[e]:void 0!==t[e]&&(i[e]=t[e])}),i}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,n){"use strict";e.exports=n(57)},function(e,h,f){"use strict";(function(t){var e=f(16);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=setTimeout;function d(e){return Boolean(e&&void 0!==e.length)}function i(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function a(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var e,t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void s(i.promise,e)}o(i.promise,e)}else(1===n._state?o:s)(i.promise,n._value)})):n._deferreds.push(i)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===l(t)||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void p((i=n,a=t,function(){i.apply(a,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}var i,a}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new c(e,t,n)),n},r.prototype.finally=e.a,r.all=function(t){return new r(function(a,r){if(!d(t))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return a([]);var s=o.length;for(var e=0;e<o.length;e++)!function t(n,e){try{if(e&&("object"===l(e)||"function"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,function(e){t(n,e)},r),0}o[n]=e,0==--s&&a(o)}catch(n){r(n)}}(e,o[e])})},r.resolve=function(t){return t&&"object"===l(t)&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(n){return new r(function(e,t){t(n)})},r.race=function(a){return new r(function(e,t){if(!d(a))return t(new TypeError("Promise.race accepts an array"));for(var n=0,i=a.length;n<i;n++)r.resolve(a[n]).then(e,t)})},r._immediateFn="function"==typeof t?function(e){t(e)}:function(e){n(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},h.a=r}).call(this,f(39).setImmediate)},function(e,t,n){"use strict";t.a=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="diplayer-loading-dot diplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="diplayer-loading-dot diplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},function(e,t,u){var c=u(14);e.exports=function(e){"use strict";var n="",t=function(e){return n+=e},i=(e=e||{}).video,a=e.options,r=c.$escape,o=e.tran,s=e.icons,l=e.index,d=c.$each;return e.$value,e.$index,n+='<div class="dplayer-mask"></div>\n<div class="dplayer-video-wrap">\n    ',t(u(1)(i)),n+="\n    ",a.logo&&(n+='\n    <div class="dplayer-logo">\n        <img src="',n+=r(a.logo),n+='">\n    </div>\n    '),n+='\n    <div class="dplayer-danmaku"',a.danmaku&&a.danmaku.bottm&&(n+=' style="margin-bottom:',n+=r(a.danmaku.bottm),n+='"'),n+='>\n        <div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div>\n    </div>\n    <div class="dplayer-subtitle"></div>\n    <div class="dplayer-bezel">\n        <span class="dplayer-bezel-icon"></span>\n        ',a.danmaku&&(n+='\n        <span class="dplayer-danloading">',n+=r(o("Danmaku is loading")),n+="</span>\n        "),n+='\n        <span class="diplayer-loading-icon">',n+=s.loading,n+='</span>\n    </div>\n</div>\n<div class="dplayer-controller-mask"></div>\n<div class="dplayer-controller">\n    <div class="dplayer-icons dplayer-comment-box">\n        <button class="dplayer-icon dplayer-comment-setting-icon" data-balloon="',n+=r(o("Setting")),n+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',n+=s.pallette,n+='</span>\n        </button>\n        <div class="dplayer-comment-setting-box">\n            <div class="dplayer-comment-setting-color">\n                <div class="dplayer-comment-setting-title">',n+=r(o("Set danmaku color")),n+='</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#fff" checked>\n                    <span style="background: #fff;"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#e54256">\n                    <span style="background: #e54256"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#ffe133">\n                    <span style="background: #ffe133"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#64DD17">\n                    <span style="background: #64DD17"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#39ccff">\n                    <span style="background: #39ccff"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',n+=r(l),n+='" value="#D500F9">\n                    <span style="background: #D500F9"></span>\n                </label>\n            </div>\n            <div class="dplayer-comment-setting-type">\n                <div class="dplayer-comment-setting-title">',n+=r(o("Set danmaku type")),n+='</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',n+=r(l),n+='" value="1">\n                    <span>',n+=r(o("Top")),n+='</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',n+=r(l),n+='" value="0" checked>\n                    <span>',n+=r(o("Rolling")),n+='</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',n+=r(l),n+='" value="2">\n                    <span>',n+=r(o("Bottom")),n+='</span>\n                </label>\n            </div>\n        </div>\n        <input class="dplayer-comment-input" type="text" placeholder="',n+=r(o("Input danmaku, hit Enter")),n+='" maxlength="30">\n        <button class="dplayer-icon dplayer-send-icon" data-balloon="',n+=r(o("Send")),n+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',n+=s.send,n+='</span>\n        </button>\n    </div>\n    <div class="dplayer-icons dplayer-icons-left">\n        <button class="dplayer-icon dplayer-play-icon">\n            <span class="dplayer-icon-content">',n+=s.play,n+='</span>\n        </button>\n        <div class="dplayer-volume">\n            <button class="dplayer-icon dplayer-volume-icon">\n                <span class="dplayer-icon-content">',n+=s.volumeDown,n+='</span>\n            </button>\n            <div class="dplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="dplayer-volume-bar">\n                    <div class="dplayer-volume-bar-inner" style="background: ',n+=r(a.theme),n+=';">\n                        <span class="dplayer-thumb" style="background: ',n+=r(a.theme),n+='"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <span class="dplayer-time">\n            <span class="dplayer-ptime">0:00</span> /\n            <span class="dplayer-dtime">0:00</span>\n        </span>\n        ',a.live&&(n+='\n        <span class="dplayer-live-badge"><span class="dplayer-live-dot" style="background: ',n+=r(a.theme),n+=';"></span>',n+=r(o("Live")),n+="</span>\n        "),n+='\n    </div>\n    <div class="dplayer-icons dplayer-icons-right">\n        ',a.video.quality&&(n+='\n        <div class="dplayer-quality">\n            <button class="dplayer-icon dplayer-quality-icon">',n+=r(a.video.quality[a.video.defaultQuality].name),n+='</button>\n            <div class="dplayer-quality-mask">\n                <div class="dplayer-quality-list">\n                ',d(a.video.quality,function(e,t){n+='\n                    <div class="dplayer-quality-item" data-index="',n+=r(t),n+='">',n+=r(e.name),n+="</div>\n                "}),n+="\n                </div>\n            </div>\n        </div>\n        "),n+="\n        ",a.screenshot&&(n+='\n        <div class="dplayer-icon dplayer-camera-icon" data-balloon="',n+=r(o("Screenshot")),n+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',n+=s.camera,n+="</span>\n        </div>\n        "),n+="\n        ",a.airplay&&(n+='\n        <div class="dplayer-icon dplayer-airplay-icon" data-balloon="',n+=r(o("AirPlay")),n+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',n+=s.airplay,n+="</span>\n        </div>\n        "),n+='\n        <div class="dplayer-comment">\n            <button class="dplayer-icon dplayer-comment-icon" data-balloon="',n+=r(o("Send danmaku")),n+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',n+=s.comment,n+="</span>\n            </button>\n        </div>\n        ",a.subtitle&&(n+='\n        <div class="dplayer-subtitle-btn">\n            <button class="dplayer-icon dplayer-subtitle-icon" data-balloon="',n+=r(o("Hide subtitle")),n+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',n+=s.subtitle,n+="</span>\n            </button>\n        </div>\n        "),n+='\n        <div class="dplayer-setting">\n            <button class="dplayer-icon dplayer-setting-icon" data-balloon="',n+=r(o("Setting")),n+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',n+=s.setting,n+='</span>\n            </button>\n            <div class="dplayer-setting-box">\n                <div class="dplayer-setting-origin-panel">\n                    <div class="dplayer-setting-item dplayer-setting-speed">\n                        <span class="dplayer-label">',n+=r(o("Speed")),n+='</span>\n                        <div class="dplayer-toggle">',n+=s.right,n+='</div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-loop">\n                        <span class="dplayer-label">',n+=r(o("Loop")),n+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle">\n                            <label for="dplayer-toggle"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-showdan">\n                        <span class="dplayer-label">',n+=r(o("Show danmaku")),n+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan">\n                            <label for="dplayer-toggle-dan"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danunlimit">\n                        <span class="dplayer-label">',n+=r(o("Unlimited danmaku")),n+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit">\n                            <label for="dplayer-toggle-danunlimit"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danmaku">\n                        <span class="dplayer-label">',n+=r(o("Opacity for danmaku")),n+='</span>\n                        <div class="dplayer-danmaku-bar-wrap">\n                            <div class="dplayer-danmaku-bar">\n                                <div class="dplayer-danmaku-bar-inner">\n                                    <span class="dplayer-thumb"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="dplayer-setting-speed-panel">\n                    ',d(a.playbackSpeed,function(e,t){n+='\n                        <div class="dplayer-setting-speed-item" data-speed="',n+=r(e),n+='">\n                            <span class="dplayer-label">',n+=r(1===e?o("Normal"):e),n+="</span>\n                        </div>\n                    "}),n+='\n                </div>\n            </div>\n        </div>\n        <div class="dplayer-full">\n            <button class="dplayer-icon dplayer-full-in-icon" data-balloon="',n+=r(o("Web full screen")),n+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',n+=s.fullWeb,n+='</span>\n            </button>\n            <button class="dplayer-icon dplayer-full-icon" data-balloon="',n+=r(o("Full screen")),n+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',n+=s.full,n+='</span>\n            </button>\n        </div>\n    </div>\n    <div class="dplayer-bar-wrap">\n        <div class="dplayer-bar-time hidden">00:00</div>\n        <div class="dplayer-bar-preview"></div>\n        <div class="dplayer-bar">\n            <div class="dplayer-loaded" style="width: 0;"></div>\n            <div class="dplayer-played" style="width: 0; background: ',n+=r(a.theme),n+='">\n                <span class="dplayer-thumb" style="background: ',n+=r(a.theme),n+='"></span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="dplayer-info-panel dplayer-info-panel-hide">\n    <div class="dplayer-info-panel-close">[x]</div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-version">\n        <span class="dplayer-info-panel-item-title">Player version</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-fps">\n        <span class="dplayer-info-panel-item-title">Player FPS</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-type">\n        <span class="dplayer-info-panel-item-title">Video type</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-url">\n        <span class="dplayer-info-panel-item-title">Video url</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-resolution">\n        <span class="dplayer-info-panel-item-title">Video resolution</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-duration">\n        <span class="dplayer-info-panel-item-title">Video duration</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    ',a.danmaku&&(n+='\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-id">\n        <span class="dplayer-info-panel-item-title">Danmaku id</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-api">\n        <span class="dplayer-info-panel-item-title">Danmaku api</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-amount">\n        <span class="dplayer-info-panel-item-title">Danmaku amount</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    '),n+='\n</div>\n<div class="dplayer-menu">\n    ',d(a.contextmenu,function(e,t){n+='\n        <div class="dplayer-menu-item">\n            <a',e.link&&(n+=' target="_blank"'),n+=' href="',n+=r(e.link||"javascript:void(0);"),n+='">',n+=r(o(e.text)),n+="</a>\n        </div>\n    "}),n+='\n</div>\n<div class="dplayer-notice"></div>\n<button class="dplayer-mobile-play">\n    ',n+=s.play,n+="\n</button>"}},function(e,t,n){var i=n(36),n=n(37);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,a){"use strict";var n,i,r=(i={},function(e){if(void 0===i[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}i[e]=t}return i[e]}),d=[];function u(e){for(var t=-1,n=0;n<d.length;n++)if(d[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},i=[],a=0;a<e.length;a++){var r=e[a],o=t.base?r[0]+t.base:r[0],s=n[o]||0,l="".concat(o," ").concat(s);n[o]=s+1;s=u(l),r={css:r[1],media:r[2],sourceMap:r[3]};-1!==s?(d[s].references++,d[s].updater(r)):d.push({identifier:l,updater:function(t,e){var n,i,a;{var r;a=e.singleton?(r=f++,n=h=h||c(e),i=p.bind(null,n,r,!1),p.bind(null,n,r,!0)):(n=c(e),i=function(e,t,n){var i=n.css,a=n.media,n=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),n&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,n,e),function(){null!==n.parentNode&&n.parentNode.removeChild(n)})}return i(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||i(t=e):a()}}(r,t),references:1}),i.push(l)}return i}function c(e){var t,n=document.createElement("style"),i=e.attributes||{};if(void 0!==i.nonce||(t=a.nc)&&(i.nonce=t),Object.keys(i).forEach(function(e){n.setAttribute(e,i[e])}),"function"==typeof e.insert)e.insert(n);else{e=r(e.insert||"head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(n)}return n}var o,l=(o=[],function(e,t){return o[e]=t,o.filter(Boolean).join("\n")});function p(e,t,n,i){n=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;e.styleSheet?e.styleSheet.cssText=l(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}var h=null,f=0;e.exports=function(e,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var o=s(e=e||[],r);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<o.length;t++){var n=u(o[t]);d[n].references--}for(var e=s(e,r),i=0;i<o.length;i++){var a=u(o[i]);0===d[a].references&&(d[a].updater(),d.splice(a,1))}o=e}}}},function(e,t,n){var i=n(3),n=n(38);(t=i(!1)).i(n),t.push([e.i,'@-webkit-keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{transform:translateY(1.5px) rotate(1.5deg)}4%{transform:translateY(-1.5px) rotate(-.5deg)}6%{transform:translateY(1.5px) rotate(-1.5deg)}8%{transform:translateY(-1.5px) rotate(-1.5deg)}10%{transform:translateY(2.5px) rotate(1.5deg)}12%{transform:translateY(-.5px) rotate(1.5deg)}14%{transform:translateY(-1.5px) rotate(1.5deg)}16%{transform:translateY(-.5px) rotate(-1.5deg)}18%{transform:translateY(.5px) rotate(-1.5deg)}20%{transform:translateY(-1.5px) rotate(2.5deg)}22%{transform:translateY(.5px) rotate(-1.5deg)}24%{transform:translateY(1.5px) rotate(1.5deg)}26%{transform:translateY(.5px) rotate(.5deg)}28%{transform:translateY(.5px) rotate(1.5deg)}30%{transform:translateY(-.5px) rotate(2.5deg)}32%{transform:translateY(1.5px) rotate(-.5deg)}34%{transform:translateY(1.5px) rotate(-.5deg)}36%{transform:translateY(-1.5px) rotate(2.5deg)}38%{transform:translateY(1.5px) rotate(-1.5deg)}40%{transform:translateY(-.5px) rotate(2.5deg)}42%{transform:translateY(2.5px) rotate(-1.5deg)}44%{transform:translateY(1.5px) rotate(.5deg)}46%{transform:translateY(-1.5px) rotate(2.5deg)}48%{transform:translateY(-.5px) rotate(.5deg)}50%{transform:translateY(.5px) rotate(.5deg)}52%{transform:translateY(2.5px) rotate(2.5deg)}54%{transform:translateY(-1.5px) rotate(1.5deg)}56%{transform:translateY(2.5px) rotate(2.5deg)}58%{transform:translateY(.5px) rotate(2.5deg)}60%{transform:translateY(2.5px) rotate(2.5deg)}62%{transform:translateY(-.5px) rotate(2.5deg)}64%{transform:translateY(-.5px) rotate(1.5deg)}66%{transform:translateY(1.5px) rotate(-.5deg)}68%{transform:translateY(-1.5px) rotate(-.5deg)}70%{transform:translateY(1.5px) rotate(.5deg)}72%{transform:translateY(2.5px) rotate(1.5deg)}74%{transform:translateY(-.5px) rotate(.5deg)}76%{transform:translateY(-.5px) rotate(2.5deg)}78%{transform:translateY(-.5px) rotate(1.5deg)}80%{transform:translateY(1.5px) rotate(1.5deg)}82%{transform:translateY(-.5px) rotate(.5deg)}84%{transform:translateY(1.5px) rotate(2.5deg)}86%{transform:translateY(-1.5px) rotate(-1.5deg)}88%{transform:translateY(-.5px) rotate(2.5deg)}90%{transform:translateY(2.5px) rotate(-.5deg)}92%{transform:translateY(.5px) rotate(-.5deg)}94%{transform:translateY(2.5px) rotate(.5deg)}96%{transform:translateY(-.5px) rotate(1.5deg)}98%{transform:translateY(-1.5px) rotate(-.5deg)}0%,to{transform:translate(0) rotate(0deg)}}.dplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.dplayer *{box-sizing:content-box}.dplayer svg{width:100%;height:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0;transform:translate(0)}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{-webkit-animation:danmaku-center 6s linear;animation:danmaku-center 6s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{-webkit-animation:danmaku 8s linear;animation:danmaku 8s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live.dplayer-no-danmaku .dplayer-setting,.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-showdan,.dplayer.dplayer-no-danmaku .dplayer-danmaku{display:none}.dplayer.dplayer-arrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-arrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{-webkit-animation-play-state:running;animation-play-state:running}@media (min-width:900px){.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}}.dplayer.dplayer-loading .dplayer-bezel .diplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{-webkit-animation-play-state:paused;animation-play-state:paused}.dplayer.dplayer-hide-controller{cursor:none}.dplayer.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-hide-controller .dplayer-controller-mask{opacity:0;transform:translateY(100%)}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{position:fixed;z-index:100000;left:0;top:0;width:100%!important;height:100%!important}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-airplay-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-camera-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-play-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:static;display:inline-block}.dplayer.dplayer-mobile .dplayer-bar-time,.dplayer.dplayer-mobile.dplayer-hide-controller .dplayer-mobile-play{display:none}.dplayer.dplayer-mobile .dplayer-mobile-play{display:block}.dplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}[data-balloon]:before{display:none}[data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}[data-balloon][data-balloon-pos=up]:after{margin-bottom:0}.dplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2)}}.dplayer-bezel .dplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-bezel .diplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-hide{display:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot{-webkit-animation:diplayer-loading-dot-fade .8s ease infinite;animation:diplayer-loading-dot-fade .8s ease infinite;opacity:0;transform-origin:4px 4px}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}@keyframes diplayer-loading-dot-fade{0%{opacity:.7;transform:scale(1.2)}50%{opacity:.25;transform:scale(.9)}to{opacity:.25;transform:scale(.85)}}.dplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.dplayer-controller{left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;width:8px;transform:translateX(-4px);top:4px;height:40%}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;transform:translateX(-3px);transition:all .2s ease-in-out}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover~.dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;transform:translateX(-50%)}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:hsla(0,0%,100%,.4);transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons{height:38px;position:absolute;bottom:0}.dplayer-controller .dplayer-icons.dplayer-comment-box{display:none;position:absolute;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{position:absolute;left:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box.dplayer-comment-setting-open{transform:scale(1)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box label{cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;box-sizing:border-box;text-align:center;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;box-sizing:border-box;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;box-sizing:border-box;width:100%;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}.dplayer-controller .dplayer-icons .dplayer-live-badge,.dplayer-controller .dplayer-icons .dplayer-time{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}.dplayer-controller .dplayer-icons .dplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}.dplayer-controller .dplayer-icons .dplayer-icon{width:40px;height:100%;border:none;background-color:transparent;outline:none;cursor:pointer;vertical-align:middle;box-sizing:border-box;display:inline-block}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{transition:all .2s ease-in-out;opacity:.8}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10px 9px 9px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-setting-icon{padding-top:8.5px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;transform:scale(0)}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box{position:absolute;right:0;bottom:50px;transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;transition:all .3s ease-in-out;overflow:hidden;z-index:2}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-open{transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-narrow{width:70px;text-align:center}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item{height:30px;padding:5px 10px;box-sizing:border-box;cursor:pointer;position:relative}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item:hover,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku{padding:5px 0}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-label{padding:0 10px;display:inline}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{padding:0 10px;box-sizing:border-box;display:none;vertical-align:middle;height:100%;width:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{position:relative;top:8.5px;width:100%;height:3px;background:#fff;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;background:#aaa;will-change:width}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#aaa}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-full:hover .dplayer-full-in-icon{display:block}.dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:absolute;top:-30px;z-index:1;display:none}.dplayer-controller .dplayer-icons .dplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-list,.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-mask{display:block}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item{height:25px;box-sizing:border-box;cursor:pointer;line-height:25px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}.dplayer-controller .dplayer-icons .dplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.dplayer-controller .dplayer-icons .dplayer-toggle input{max-height:0;max-width:0;display:none}.dplayer-controller .dplayer-icons .dplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after,.dplayer-controller .dplayer-icons .dplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:after{left:12px}.dplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:transparent;outline:none;cursor:pointer;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.dplayer-danmaku{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff}.dplayer-danmaku .dplayer-danmaku-item{display:inline-block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;white-space:nowrap;text-shadow:.5px .5px .5px rgba(0,0,0,.5)}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{will-change:transform;-webkit-animation:danmaku 5s linear;animation:danmaku 5s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku{0%{transform:translateX(100%)}}@keyframes danmaku{0%{transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{position:absolute;width:100%;text-align:center;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{will-change:visibility;-webkit-animation:danmaku-center 4s linear;animation:danmaku-center 4s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}.dplayer-logo img{max-width:100%;max-height:100%;background:none}.dplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:3;display:none}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{height:30px;box-sizing:border-box;cursor:pointer}.dplayer-menu .dplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}.dplayer-menu .dplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;display:inline-block;vertical-align:middle;width:100%;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}.dplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:.5px .5px .5px rgba(0,0,0,.5);font-size:20px}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.dplayer-video-wrap .dplayer-video{width:100%;height:100%;display:none}.dplayer-video-wrap .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-prepare{display:none}.dplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-info-panel .dplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}.dplayer-info-panel .dplayer-info-panel-item-data{width:260px}',""]),e.exports=t},function(e,t,n){(t=n(3)(!1)).push([e.i,':root{--balloon-border-radius:2px;--balloon-color:rgba(16,16,16,0.95);--balloon-text-color:#fff;--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{position:relative;cursor:pointer}[aria-label][data-balloon-pos]:after{text-indent:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:var(--balloon-font-size);background:var(--balloon-color);border-radius:2px;color:var(--balloon-text-color);border-radius:var(--balloon-border-radius);content:attr(aria-label);padding:.5em 1em;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[aria-label][data-balloon-pos]:before{width:0;height:0;border:5px solid transparent;border-top:5px solid var(--balloon-color);content:""}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:after,[aria-label][data-balloon-pos]:not([data-balloon-nofocus]):focus:before,[aria-label][data-balloon-pos][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-visible]:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos].font-awesome:after{font-family:FontAwesome,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}[aria-label][data-balloon-pos][data-balloon-break]:after{white-space:pre}[aria-label][data-balloon-pos][data-balloon-break][data-balloon-length]:after{white-space:pre-line;word-break:break-word}[aria-label][data-balloon-pos][data-balloon-blunt]:after,[aria-label][data-balloon-pos][data-balloon-blunt]:before{transition:none}[aria-label][data-balloon-pos][data-balloon-pos=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{bottom:100%;left:50%;transform:translate(-50%,var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:after{bottom:100%;left:0;margin-bottom:10px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:before{bottom:100%;left:5px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up-left][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:after{bottom:100%;right:0;margin-bottom:10px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:before{bottom:100%;right:5px;transform:translateY(var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=up-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=up-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=down]:after{left:50%;margin-top:10px;top:100%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);left:50%;top:100%;transform:translate(-50%,calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down][data-balloon-visible]:before{transform:translate(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:after{left:0;margin-top:10px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);left:5px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down-left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down-left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down-left][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:after{right:0;margin-top:10px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:before{width:0;height:0;border:5px solid transparent;border-bottom:5px solid var(--balloon-color);right:5px;top:100%;transform:translateY(calc(var(--balloon-move)*-1))}[aria-label][data-balloon-pos][data-balloon-pos=down-right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=down-right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=down-right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=down-right][data-balloon-visible]:before{transform:translate(0)}[aria-label][data-balloon-pos][data-balloon-pos=left]:after{margin-right:10px;right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:before{width:0;height:0;border:5px solid transparent;border-left:5px solid var(--balloon-color);right:100%;top:50%;transform:translate(var(--balloon-move),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=left]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=left][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:after{left:100%;margin-left:10px;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:before{width:0;height:0;border:5px solid transparent;border-right:5px solid var(--balloon-color);left:100%;top:50%;transform:translate(calc(var(--balloon-move)*-1),-50%)}[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=right]:hover:before,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:after,[aria-label][data-balloon-pos][data-balloon-pos=right][data-balloon-visible]:before{transform:translateY(-50%)}[aria-label][data-balloon-pos][data-balloon-length=small]:after{white-space:normal;width:80px}[aria-label][data-balloon-pos][data-balloon-length=medium]:after{white-space:normal;width:150px}[aria-label][data-balloon-pos][data-balloon-length=large]:after{white-space:normal;width:260px}[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{white-space:normal;width:380px}@media screen and (max-width:768px){[aria-label][data-balloon-pos][data-balloon-length=xlarge]:after{white-space:normal;width:90vw}}[aria-label][data-balloon-pos][data-balloon-length=fit]:after{white-space:normal;width:100%}',""]),e.exports=t},function(e,t,n){var i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(40),t.setImmediate=r,t.clearImmediate=o},function(e,t,n){(function(e,f){!function(n,i){"use strict";var a,t,r,e,o,s,l,d,u,c;function p(e){delete s[e]}function h(e){if(l)setTimeout(h,0,e);else{var n=s[e];if(n){l=!0;try{!function(){var e=n.callback,t=n.args;switch(t.length){case 0:e();break;case 1:e(t[0]);break;case 2:e(t[0],t[1]);break;case 3:e(t[0],t[1],t[2]);break;default:e.apply(i,t)}}()}finally{p(e),l=!1}}}}n.setImmediate||(o=1,l=!(s={}),d=n.document,u=(u=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&u.setTimeout?u:n,c="[object process]"==={}.toString.call(n.process)?function(e){f.nextTick(function(){h(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(r="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(r)&&h(+e.data.slice(r.length))},n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),function(e){n.postMessage(r+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){t.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];e={callback:e,args:t};return s[o]=e,c(o),o++},u.clearImmediate=p)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(4),n(5))},function(e,t,n){"use strict";var i=n(0),a=n(6),r=n(42),o=n(12);function s(e){var t=new r(e),e=a(r.prototype.request,t);return i.extend(e,r.prototype,t),i.extend(e,t),e}var l=s(n(9));l.Axios=r,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=n(13),l.CancelToken=n(55),l.isCancel=n(8),l.all=function(e){return Promise.all(e)},l.spread=n(56),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var a=n(0),i=n(7),r=n(43),o=n(44),s=n(12);function l(e){this.defaults=e,this.interceptors={request:new r,response:new r}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(a.merge(t||{},{method:n,url:e}))}}),a.forEach(["post","put","patch"],function(i){l.prototype[i]=function(e,t,n){return this.request(a.merge(n||{},{method:i,url:e,data:t}))}}),e.exports=l},function(e,t,n){"use strict";var i=n(0);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=a},function(e,t,n){"use strict";var i=n(0),a=n(45),r=n(8),o=n(9);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return s(t),t.headers=t.headers||{},t.data=a(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return s(t),e.data=a(e.data,e.headers,t.transformResponse),e},function(e){return r(e)||(s(t),e&&e.response&&(e.response.data=a(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,n){"use strict";var i=n(0);e.exports=function(t,n,e){return i.forEach(e,function(e){t=e(t,n)}),t}},function(e,t,n){"use strict";var a=n(0);e.exports=function(n,i){a.forEach(n,function(e,t){t!==i&&t.toUpperCase()===i.toUpperCase()&&(n[i]=e,delete n[t])})}},function(e,t,n){"use strict";var a=n(11);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(a("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,a){return e.config=t,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var i=n(50),a=n(51);e.exports=function(e,t){return e&&!i(t)?a(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var a=n(0),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i={};return e&&a.forEach(e.split("\n"),function(e){n=e.indexOf(":"),t=a.trim(e.substr(0,n)).toLowerCase(),n=a.trim(e.substr(n+1)),t&&(i[t]&&0<=r.indexOf(t)||(i[t]="set-cookie"===t?(i[t]||[]).concat([n]):i[t]?i[t]+", "+n:n))}),i}},function(e,t,n){"use strict";var i,a,r,o=n(0);function s(e){return a&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}e.exports=o.isStandardBrowserEnv()?(a=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i=s(window.location.href),function(e){e=o.isString(e)?s(e):e;return e.protocol===i.protocol&&e.host===i.host}):function(){return!0}},function(e,t,n){"use strict";var s=n(0);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,i,a,r){var o=[];o.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),s.isString(i)&&o.push("path="+i),s.isString(a)&&o.push("domain="+a),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var i=n(13);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var t;return{token:new a(function(e){t=e}),cancel:t}},e.exports=a},function(e,t,n){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";(function(e){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},e=Object.create(e),s=/["&'<>]/;e.$escape=function(e){return function(e){var t=""+e,n=s.exec(t);if(!n)return e;for(var i="",a=void 0,r=void 0,o=void 0,a=n.index,r=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}r!==a&&(i+=t.substring(r,a)),r=a+1,i+=o}return r!==a?i+t.substring(r,a):i}(function e(t){return"string"!=typeof t&&(t=null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t)),t}(e))},e.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var a in e)t(e[a],a)},t.exports=e}).call(this,n(4))},function(e,t,n){"use strict";n.r(t),n(35);var i=n(15),a=/mobile/i.test(window.navigator.userAgent),p={secondToTime:function(e){if(0===(e=e||0)||e===1/0||"NaN"===e.toString())return"00:00";var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),e=Math.floor(e-3600*t-60*n);return(0<t?[t,n,e]:[n,e]).map(function(e){return e<10?"0"+e:""+e}).join(":")},getElementViewLeft:function(e){var t=e.offsetLeft,n=e.offsetParent,i=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==n&&n!==e;)t+=n.offsetLeft,n=n.offsetParent;else for(;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t-i},getBoundingClientRectViewLeft:function(e){var t=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(e.getBoundingClientRect){"number"!=typeof this.getBoundingClientRectViewLeft.offset&&((n=document.createElement("div")).style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(n),this.getBoundingClientRectViewLeft.offset=-n.getBoundingClientRect().top-t,document.body.removeChild(n),n=null);var t=e.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return t.left+n}return this.getElementViewLeft(e)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(e){var t=e.left,t=void 0===t?0:t,e=e.top,e=void 0===e?0:e;this.isFirefox?(document.documentElement.scrollLeft=t,document.documentElement.scrollTop=e):window.scrollTo(t,e)},isMobile:a,isSafari:/Safari/i.test(window.navigator.userAgent),isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},nameMap:{dragStart:a?"touchstart":"mousedown",dragMove:a?"touchmove":"mousemove",dragEnd:a?"touchend":"mouseup"},color2Number:function(e){return"#"===e[0]&&(e=e.substr(1)),3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2])),parseInt(e,16)+0&16777215},number2Color:function(e){return"#"+("00000"+e.toString(16)).slice(-6)},number2Type:function(e){switch(e){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}}},r=n(2),o=n.n(r),s={send:function(t){o.a.post(t.url,t.data).then(function(e){e=e.data;e&&0===e.code?t.success&&t.success(e):t.error&&t.error(e&&e.msg)}).catch(function(e){console.error(e),t.error&&t.error()})},read:function(t){o.a.get(t.url).then(function(e){e=e.data;e&&0===e.code?t.success&&t.success(e.data.map(function(e){return{time:e[0],type:e[1],color:e[2],author:e[3],text:e[4]}})):t.error&&t.error(e&&e.msg)}).catch(function(e){console.error(e),t.error&&t.error()})}};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e){var t,n={container:e.element||document.getElementsByClassName("dplayer")[0],live:!1,autoplay:!1,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!0,hotkey:!0,preload:"metadata",volume:.7,playbackSpeed:[.5,.75,1,1.25,1.5,2],apiBackend:s,video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},flv:{},dash:{},webtorrent:{}}};for(t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t]);return e.video&&!e.video.type&&(e.video.type="auto"),"object"===l(e.danmaku)&&e.danmaku&&!e.danmaku.user&&(e.danmaku.user="DIYgod"),e.subtitle&&(e.subtitle.type||(e.subtitle.type="webvtt"),e.subtitle.fontSize||(e.subtitle.fontSize="20px"),e.subtitle.bottom||(e.subtitle.bottom="40px"),e.subtitle.color||(e.subtitle.color="#fff")),e.video.quality&&(e.video.url=e.video.quality[e.video.defaultQuality].url),e.lang&&(e.lang=e.lang.toLowerCase()),e.contextmenu=e.contextmenu.concat([{text:"Video info",click:function(e){e.infoPanel.triggle()}},{text:"About author",link:"https://diygod.me"},{text:"DPlayer v".concat("1.26.0"),link:"https://github.com/MoePlayer/DPlayer"}]),e},u={"zh-cn":{"Danmaku is loading":"",Top:"",Bottom:"",Rolling:"","Input danmaku, hit Enter":"","About author":"","DPlayer feedback":"","About DPlayer":" DPlayer ",Loop:"",Speed:"","Opacity for danmaku":"",Normal:"","Please input danmaku content!":"","Set danmaku color":"","Set danmaku type":"","Show danmaku":"","Video load failed":"","Danmaku load failed":"","Danmaku send failed":"","Switching to":"","Switched to":"",quality:"",FF:"",REW:"","Unlimited danmaku":"","Send danmaku":"",Setting:"","Full screen":"","Web full screen":"",Send:"",Screenshot:"",AirPlay:"",s:"","Show subtitle":"","Hide subtitle":"",Volume:"",Live:"","Video info":""},"zh-tw":{"Danmaku is loading":"",Top:"",Bottom:"",Rolling:"","Input danmaku, hit Enter":"Enter ","About author":"","DPlayer feedback":"","About DPlayer":" DPlayer ",Loop:"",Speed:"","Opacity for danmaku":"",Normal:"","Please input danmaku content!":"","Set danmaku color":"","Set danmaku type":"","Show danmaku":"","Video load failed":"","Danmaku load failed":"","Danmaku send failed":"","Switching to":"","Switched to":"",quality:"",FF:"",REW:"","Unlimited danmaku":"","Send danmaku":"",Setting:"","Full screen":"","Web full screen":"",Send:"",Screenshot:"",AirPlay:"",s:"","Show subtitle":"","Hide subtitle":"",Volume:"",Live:"","Video info":""}},c=function(e){var t=this;this.lang=e,this.tran=function(e){return u[t.lang]&&u[t.lang][e]?u[t.lang][e]:e}},h=n(17),f=n.n(h),m=n(18),y=n.n(m),g=n(19),v=n.n(g),b=n(20),_=n.n(b),w=n(21),k=n.n(w),S=n(22),x=n.n(S),E=n(23),T=n.n(E),L=n(24),a=n.n(L),r=n(25),h=n.n(r),m=n(26),g=n.n(m),b=n(27),w=n.n(b),S=n(28),E=n.n(S),L=n(29),r=n.n(L),m=n(30),b=n.n(m),S=n(31),L=n.n(S),m=n(32),S=n.n(m),m=n(33),m=n.n(m),A={play:f.a,pause:y.a,volumeUp:v.a,volumeDown:_.a,volumeOff:k.a,full:x.a,fullWeb:T.a,setting:a.a,right:h.a,comment:g.a,commentOff:w.a,send:E.a,pallette:r.a,camera:b.a,subtitle:S.a,loading:m.a,airplay:L.a},L=n(34),R=n.n(L);function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=(O(D.prototype,[{key:"init",value:function(){this.container.innerHTML=R()({options:this.options,index:this.index,tran:this.tran,icons:A,mobile:p.isMobile,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle}}),this.volumeBar=this.container.querySelector(".dplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".dplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".dplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".dplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".dplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".dplayer-volume-icon .dplayer-icon-content"),this.playedBar=this.container.querySelector(".dplayer-played"),this.loadedBar=this.container.querySelector(".dplayer-loaded"),this.playedBarWrap=this.container.querySelector(".dplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".dplayer-bar-time"),this.danmaku=this.container.querySelector(".dplayer-danmaku"),this.danmakuLoading=this.container.querySelector(".dplayer-danloading"),this.video=this.container.querySelector(".dplayer-video-current"),this.bezel=this.container.querySelector(".dplayer-bezel-icon"),this.playButton=this.container.querySelector(".dplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".dplayer-mobile-play"),this.videoWrap=this.container.querySelector(".dplayer-video-wrap"),this.controllerMask=this.container.querySelector(".dplayer-controller-mask"),this.ptime=this.container.querySelector(".dplayer-ptime"),this.settingButton=this.container.querySelector(".dplayer-setting-icon"),this.settingBox=this.container.querySelector(".dplayer-setting-box"),this.mask=this.container.querySelector(".dplayer-mask"),this.loop=this.container.querySelector(".dplayer-setting-loop"),this.loopToggle=this.container.querySelector(".dplayer-setting-loop .dplayer-toggle-setting-input"),this.showDanmaku=this.container.querySelector(".dplayer-setting-showdan"),this.showDanmakuToggle=this.container.querySelector(".dplayer-showdan-setting-input"),this.unlimitDanmaku=this.container.querySelector(".dplayer-setting-danunlimit"),this.unlimitDanmakuToggle=this.container.querySelector(".dplayer-danunlimit-setting-input"),this.speed=this.container.querySelector(".dplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".dplayer-setting-speed-item"),this.danmakuOpacityBar=this.container.querySelector(".dplayer-danmaku-bar-inner"),this.danmakuOpacityBarWrap=this.container.querySelector(".dplayer-danmaku-bar"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(".dplayer-danmaku-bar-wrap"),this.danmakuOpacityBox=this.container.querySelector(".dplayer-setting-danmaku"),this.dtime=this.container.querySelector(".dplayer-dtime"),this.controller=this.container.querySelector(".dplayer-controller"),this.commentInput=this.container.querySelector(".dplayer-comment-input"),this.commentButton=this.container.querySelector(".dplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".dplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".dplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".dplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".dplayer-send-icon"),this.commentSendFill=this.container.querySelector(".dplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".dplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".dplayer-full-icon"),this.webFullButton=this.container.querySelector(".dplayer-full-in-icon"),this.menu=this.container.querySelector(".dplayer-menu"),this.menuItem=this.container.querySelectorAll(".dplayer-menu-item"),this.qualityList=this.container.querySelector(".dplayer-quality-list"),this.camareButton=this.container.querySelector(".dplayer-camera-icon"),this.airplayButton=this.container.querySelector(".dplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".dplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".dplayer-subtitle-icon .dplayer-icon-content"),this.subtitle=this.container.querySelector(".dplayer-subtitle"),this.qualityButton=this.container.querySelector(".dplayer-quality-icon"),this.barPreview=this.container.querySelector(".dplayer-bar-preview"),this.barWrap=this.container.querySelector(".dplayer-bar-wrap"),this.notice=this.container.querySelector(".dplayer-notice"),this.infoPanel=this.container.querySelector(".dplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".dplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".dplayer-info-panel-item-version .dplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".dplayer-info-panel-item-fps .dplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".dplayer-info-panel-item-type .dplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".dplayer-info-panel-item-url .dplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".dplayer-info-panel-item-duration .dplayer-info-panel-item-data"),this.infoDanmakuId=this.container.querySelector(".dplayer-info-panel-item-danmaku-id .dplayer-info-panel-item-data"),this.infoDanmakuApi=this.container.querySelector(".dplayer-info-panel-item-danmaku-api .dplayer-info-panel-item-data"),this.infoDanmakuAmount=this.container.querySelector(".dplayer-info-panel-item-danmaku-amount .dplayer-info-panel-item-data")}}]),D);function D(e){!function(e){if(!(e instanceof D))throw new TypeError("Cannot call a class as a function")}(this),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=(I(B.prototype,[{key:"load",value:function(){var t=this,e=this.options.api.maximum?"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id,"&max=").concat(this.options.api.maximum):"".concat(this.options.api.address,"v3/?id=").concat(this.options.api.id),n=(this.options.api.addition||[]).slice(0);n.push(e),this.events&&this.events.trigger("danmaku_load_start",n),this._readAllEndpoints(n,function(e){t.dan=[].concat.apply([],e).sort(function(e,t){return e.time-t.time}),window.requestAnimationFrame(function(){t.frame()}),t.options.callback(),t.events&&t.events.trigger("danmaku_load_end")})}},{key:"reload",value:function(e){this.options.api=e,this.dan=[],this.clear(),this.load()}},{key:"_readAllEndpoints",value:function(n,i){for(var a=this,r=[],o=0,e=0;e<n.length;++e)!function(t){a.options.apiBackend.read({url:n[t],success:function(e){r[t]=e,++o===n.length&&i(r)},error:function(e){a.options.error(e||a.options.tran("Danmaku load failed")),r[t]=[],++o===n.length&&i(r)}})}(e)}},{key:"send",value:function(e,t){var n=this,e={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:e.text,color:e.color,type:e.type};this.options.apiBackend.send({url:this.options.api.address+"v3/",data:e,success:t,error:function(e){n.options.error(e||n.options.tran("Danmaku send failed"))}}),this.dan.splice(this.danIndex,0,e),this.danIndex++;t={text:this.htmlEncode(e.text),color:e.color,type:e.type,border:"2px solid ".concat(this.options.borderColor)};this.draw(t),this.events&&this.events.trigger("danmaku_send",e)}},{key:"frame",value:function(){var e=this;if(this.dan.length&&!this.paused&&this.showing){for(var t=this.dan[this.danIndex],n=[];t&&this.options.time()>parseFloat(t.time);)n.push(t),t=this.dan[++this.danIndex];this.draw(n)}window.requestAnimationFrame(function(){e.frame()})}},{key:"opacity",value:function(e){if(void 0!==e){for(var t=this.container.getElementsByClassName("dplayer-danmaku-item"),n=0;n<t.length;n++)t[n].style.opacity=e;this._opacity=e,this.events&&this.events.trigger("danmaku_opacity",this._opacity)}return this._opacity}},{key:"draw",value:function(a){var l=this;if(this.showing){var r=this.options.height,d=this.container.offsetWidth,e=this.container.offsetHeight,u=parseInt(e/r),c=function(e){return(d+e)/5},o=function(r,o,e){for(var s=d/c(e),t=function(e){var t=l.danTunnel[o][e+""];if(!t||!t.length)return l.danTunnel[o][e+""]=[r],r.addEventListener("animationend",function(){l.danTunnel[o][e+""].splice(0,1)}),{v:e%u};if("right"!==o)return"continue";for(var n,i=0;i<t.length;i++){var a=(n=t[i],a=a=void 0,a=n.offsetWidth||parseInt(n.style.width),a=n.getBoundingClientRect().right||l.container.getBoundingClientRect().right+a,l.container.getBoundingClientRect().right-a-10);if(a<=d-s*c(parseInt(t[i].style.width))||a<=0)break;if(i===t.length-1)return l.danTunnel[o][e+""].push(r),r.addEventListener("animationend",function(){l.danTunnel[o][e+""].splice(0,1)}),{v:e%u}}},n=0;l.unlimited||n<u;n++){var i=t(n);if("continue"!==i&&"object"===M(i))return i.v}return-1};"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);for(var s=document.createDocumentFragment(),t=0;t<a.length;t++)!function(e){a[e].type=p.number2Type(a[e].type),a[e].color||(a[e].color=16777215);var t=document.createElement("div");t.classList.add("dplayer-danmaku-item"),t.classList.add("dplayer-danmaku-".concat(a[e].type)),a[e].border?t.innerHTML='<span style="border:'.concat(a[e].border,'">').concat(a[e].text,"</span>"):t.innerHTML=a[e].text,t.style.opacity=l._opacity,t.style.color=p.number2Color(a[e].color),t.addEventListener("animationend",function(){l.container.removeChild(t)});var n=l._measure(a[e].text),i=void 0;switch(a[e].type){case"right":0<=(i=o(t,a[e].type,n))&&(t.style.width=n+1+"px",t.style.top=r*i+"px",t.style.transform="translateX(-".concat(d,"px)"));break;case"top":0<=(i=o(t,a[e].type))&&(t.style.top=r*i+"px");break;case"bottom":0<=(i=o(t,a[e].type))&&(t.style.bottom=r*i+"px");break;default:console.error("Can't handled danmaku type: ".concat(a[e].type))}0<=i&&(t.classList.add("dplayer-danmaku-move"),s.appendChild(t))}(t);return this.container.appendChild(s),s}}},{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_measure",value:function(e){var t;return this.context||(t=getComputedStyle(this.container.getElementsByClassName("dplayer-danmaku-item")[0],null),this.context=document.createElement("canvas").getContext("2d"),this.context.font=t.getPropertyValue("font")),this.context.measureText(e).width}},{key:"seek",value:function(){this.clear();for(var e=0;e<this.dan.length;e++){if(this.dan[e].time>=this.options.time()){this.danIndex=e;break}this.danIndex=this.dan.length}}},{key:"clear",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}},{key:"htmlEncode",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;")}},{key:"resize",value:function(){for(var e=this.container.offsetWidth,t=this.container.getElementsByClassName("dplayer-danmaku-item"),n=0;n<t.length;n++)t[n].style.transform="translateX(-".concat(e,"px)")}},{key:"hide",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}},{key:"show",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}},{key:"unlimit",value:function(e){this.unlimited=e}}]),B);function B(e){!function(e){if(!(e instanceof B))throw new TypeError("Cannot call a class as a function")}(this),this.options=e,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(""),this.load()}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=(P(F.prototype,[{key:"on",value:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:"trigger",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)}},{key:"type",value:function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.videoEvents.indexOf(e)?"video":(console.error("Unknown event name: ".concat(e)),null)}}]),F);function F(){!function(e){if(!(e instanceof F))throw new TypeError("Cannot call a class as a function")}(this),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_loaded","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=(N(q.prototype,[{key:"isFullScreen",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("dplayer-fulled")}}},{key:"request",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser",t="browser"===e?"web":"browser",n=this.isFullScreen(t);switch(n||(this.lastScrollPosition=p.getScrollPosition()),e){case"browser":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case"web":this.player.container.classList.add("dplayer-fulled"),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}n&&this.cancel(t)}},{key:"cancel",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen(e)?this.cancel(e):this.request(e)}}]),q);function q(e){var t=this;!function(e){if(!(e instanceof q))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",function(){t.player.resize()}),this.player.events.on("webfullscreen_cancel",function(){t.player.resize(),p.setScrollPosition(t.lastScrollPosition)});function n(){t.player.resize(),t.isFullScreen("browser")?t.player.events.trigger("fullscreen"):(p.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel"))}e=function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e!==t.player.container||(t.player.resize(),e?t.player.events.trigger("fullscreen"):(p.setScrollPosition(t.lastScrollPosition),t.player.events.trigger("fullscreen_cancel")))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",e),document.addEventListener("fullscreenchange",e)):(this.player.container.addEventListener("fullscreenchange",n),this.player.container.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",e),document.addEventListener("MSFullscreenChange",e))}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var G=(V(H.prototype,[{key:"init",value:function(){for(var e in this.storageName){var t=this.storageName[e];this.data[e]=parseFloat(p.storage.get(t)||this.default[e])}}},{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t,p.storage.set(this.storageName[e],t)}}]),H);function H(e){!function(e){if(!(e instanceof H))throw new TypeError("Cannot call a class as a function")}(this),this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show"},this.default={opacity:.7,volume:e.options.hasOwnProperty("volume")?e.options.volume:.7,unlimited:(e.options.danmaku&&e.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=(Y(K.prototype,[{key:"init",value:function(){var n,i=this;this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]&&((n=this.video.textTracks[0]).oncuechange=function(){var e,t=n.activeCues[0];i.container.innerHTML="",t&&((e=document.createElement("div")).appendChild(t.getCueAsHTML()),e=e.innerHTML.split(/\r?\n/).map(function(e){return"<p>".concat(e,"</p>")}).join(""),i.container.innerHTML=e),i.events.trigger("subtitle_change")})}},{key:"show",value:function(){this.container.classList.remove("dplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("dplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}}]),K);function K(e,t,n,i){!function(e){if(!(e instanceof K))throw new TypeError("Cannot call a class as a function")}(this),this.container=e,this.video=t,this.options=n,this.events=i,this.init()}function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $=(X(Q.prototype,[{key:"set",value:function(e,t,n){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[n]=100*t+"%"}},{key:"get",value:function(e){return parseFloat(this.elements[e].style.width)/100}}]),Q);function Q(e){!function(e){if(!(e instanceof Q))throw new TypeError("Cannot call a class as a function")}(this),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar,this.elements.danmaku=e.danmakuOpacityBar}function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var J=(Z(ee.prototype,[{key:"init",value:function(){var t=this;this.types.map(function(e){return"fps"!==e&&t["init".concat(e,"Checker")](),e})}},{key:"initloadingChecker",value:function(){var e,t=this,n=0,i=!1;this.loadingChecker=setInterval(function(){t.enableloadingChecker&&(e=t.player.video.currentTime,i||e!==n||t.player.video.paused||(t.player.container.classList.add("dplayer-loading"),i=!0),i&&n<e&&!t.player.video.paused&&(t.player.container.classList.remove("dplayer-loading"),i=!1),n=e)},100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame(function(){var e;t.enablefpsChecker?(t.initfpsChecker(),t.fpsStart?(t.fpsIndex++,1e3<(e=new Date)-t.fpsStart&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)):(t.fpsStart=new Date,t.fpsIndex=0)):(t.fpsStart=0,t.fpsIndex=0)})}},{key:"initinfoChecker",value:function(){var e=this;this.infoChecker=setInterval(function(){e.enableinfoChecker&&e.player.infoPanel.update()},1e3)}},{key:"enable",value:function(e){this["enable".concat(e,"Checker")]=!0,"fps"===e&&this.initfpsChecker()}},{key:"disable",value:function(e){this["enable".concat(e,"Checker")]=!1}},{key:"destroy",value:function(){var t=this;this.types.map(function(e){return t["enable".concat(e,"Checker")]=!1,t["".concat(e,"Checker")]&&clearInterval(t["".concat(e,"Checker")]),e})}}]),ee);function ee(e){!function(e){if(!(e instanceof ee))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=["loading","info","fps"],this.init()}function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ne=(te(ie.prototype,[{key:"switch",value:function(e){this.container.innerHTML=e,this.container.classList.add("dplayer-bezel-transition")}}]),ie);function ie(e){var t=this;!function(e){if(!(e instanceof ie))throw new TypeError("Cannot call a class as a function")}(this),this.container=e,this.container.addEventListener("animationend",function(){t.container.classList.remove("dplayer-bezel-transition")})}function ae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var re=(ae(oe.prototype,[{key:"resize",value:function(e,t,n){this.container.style.width="".concat(e,"px"),this.container.style.height="".concat(t,"px"),this.container.style.top="".concat(2-t,"px"),this.barWidth=n}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(e){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(e/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(e-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}]),oe);function oe(e){!function(e){if(!(e instanceof oe))throw new TypeError("Cannot call a class as a function")}(this),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('".concat(e.url,"')"),this.events=e.events}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var le=(se(de.prototype,[{key:"initPlayButton",value:function(){var e=this;this.player.template.playButton.addEventListener("click",function(){e.player.toggle()}),this.player.template.mobilePlayButton.addEventListener("click",function(){e.player.toggle()}),p.isMobile?(this.player.template.videoWrap.addEventListener("click",function(){e.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.toggle()})):(this.player.template.videoWrap.addEventListener("click",function(){e.player.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){e.player.toggle()}))}},{key:"initHighlights",value:function(){var i=this;this.player.on("durationchange",function(){if(1!==i.player.video.duration&&i.player.video.duration!==1/0&&i.player.options.highlight){var e=document.querySelectorAll(".dplayer-highlight");[].slice.call(e,0).forEach(function(e){i.player.template.playedBarWrap.removeChild(e)});for(var t,n=0;n<i.player.options.highlight.length;n++)i.player.options.highlight[n].text&&i.player.options.highlight[n].time&&((t=document.createElement("div")).classList.add("dplayer-highlight"),t.style.left=i.player.options.highlight[n].time/i.player.video.duration*100+"%",t.innerHTML='<span class="dplayer-highlight-text">'+i.player.options.highlight[n].text+"</span>",i.player.template.playedBarWrap.insertBefore(t,i.player.template.playedBarTime))}})}},{key:"initThumbnails",value:function(){var e=this;this.player.options.video.thumbnails&&(this.thumbnails=new re({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",function(){e.thumbnails.resize(160,e.player.video.videoHeight/e.player.video.videoWidth*160,e.player.template.barWrap.offsetWidth)}))}},{key:"initPlayedBar",value:function(){function t(e){e=((e.clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(i.player.template.playedBarWrap))/i.player.template.playedBarWrap.clientWidth,e=Math.max(e,0),e=Math.min(e,1),i.player.bar.set("played",e,"width"),i.player.template.ptime.innerHTML=p.secondToTime(e*i.player.video.duration)}function n(e){document.removeEventListener(p.nameMap.dragEnd,n),document.removeEventListener(p.nameMap.dragMove,t),e=((e.clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(i.player.template.playedBarWrap))/i.player.template.playedBarWrap.clientWidth,e=Math.max(e,0),e=Math.min(e,1),i.player.bar.set("played",e,"width"),i.player.seek(i.player.bar.get("played")*i.player.video.duration),i.player.timer.enable("progress")}var i=this;this.player.template.playedBarWrap.addEventListener(p.nameMap.dragStart,function(){i.player.timer.disable("progress"),document.addEventListener(p.nameMap.dragMove,t),document.addEventListener(p.nameMap.dragEnd,n)}),this.player.template.playedBarWrap.addEventListener(p.nameMap.dragMove,function(e){var t;i.player.video.duration&&(t=i.player.template.playedBarWrap.getBoundingClientRect().left,(e=(e.clientX||e.changedTouches[0].clientX)-t)<0||e>i.player.template.playedBarWrap.offsetWidth||(t=i.player.video.duration*(e/i.player.template.playedBarWrap.offsetWidth),p.isMobile&&i.thumbnails&&i.thumbnails.show(),i.thumbnails&&i.thumbnails.move(e),i.player.template.playedBarTime.style.left="".concat(e-(3600<=t?25:20),"px"),i.player.template.playedBarTime.innerText=p.secondToTime(t),i.player.template.playedBarTime.classList.remove("hidden")))}),this.player.template.playedBarWrap.addEventListener(p.nameMap.dragEnd,function(){p.isMobile&&i.thumbnails&&i.thumbnails.hide()}),p.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",function(){i.player.video.duration&&(i.thumbnails&&i.thumbnails.show(),i.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",function(){i.player.video.duration&&(i.thumbnails&&i.thumbnails.hide(),i.player.template.playedBarTime.classList.add("hidden"))}))}},{key:"initFullButton",value:function(){var e=this;this.player.template.browserFullButton.addEventListener("click",function(){e.player.fullScreen.toggle("browser")}),this.player.template.webFullButton.addEventListener("click",function(){e.player.fullScreen.toggle("web")})}},{key:"initVolumeButton",value:function(){function e(e){e=(((e=e||window.event).clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(n.player.template.volumeBarWrap)-5.5)/35,n.player.volume(e)}function t(){document.removeEventListener(p.nameMap.dragEnd,t),document.removeEventListener(p.nameMap.dragMove,e),n.player.template.volumeButton.classList.remove("dplayer-volume-active")}var n=this;this.player.template.volumeBarWrapWrap.addEventListener("click",function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(n.player.template.volumeBarWrap)-5.5)/35;n.player.volume(e)}),this.player.template.volumeBarWrapWrap.addEventListener(p.nameMap.dragStart,function(){document.addEventListener(p.nameMap.dragMove,e),document.addEventListener(p.nameMap.dragEnd,t),n.player.template.volumeButton.classList.add("dplayer-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",function(){n.player.video.muted?(n.player.video.muted=!1,n.player.switchVolumeIcon(),n.player.bar.set("volume",n.player.volume(),"width")):(n.player.video.muted=!0,n.player.template.volumeIcon.innerHTML=A.volumeOff,n.player.bar.set("volume",0,"width"))})}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",function(e){e.target.classList.contains("dplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)})}},{key:"initScreenshotButton",value:function(){var n=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",function(){var t,e=document.createElement("canvas");e.width=n.player.video.videoWidth,e.height=n.player.video.videoHeight,e.getContext("2d").drawImage(n.player.video,0,0,e.width,e.height),e.toBlob(function(e){t=URL.createObjectURL(e);e=document.createElement("a");e.href=t,e.download="DPlayer.png",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(t)}),n.player.events.trigger("screenshot",t)})}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){"available"===e.availability?this.template.airplayButton.disable=!1:this.template.airplayButton.disable=!0,this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var e=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran("Hide subtitle"),e.player.template.subtitleButtonInner.style.opacity="",e.player.user.set("subtitle",1)}),this.player.events.on("subtitle_hide",function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran("Show subtitle"),e.player.template.subtitleButtonInner.style.opacity="0.4",e.player.user.set("subtitle",0)}),this.player.template.subtitleButton.addEventListener("click",function(){e.player.subtitle.toggle()}))}},{key:"setAutoHide",value:function(){var e=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){!e.player.video.played.length||e.player.paused||e.disableAutoHide||e.hide()},3e3)}},{key:"show",value:function(){this.player.container.classList.remove("dplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("dplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("dplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}]),de);function de(e){var t=this;!function(e){if(!(e instanceof de))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,this.autoHideTimer=0,p.isMobile||(this.player.container.addEventListener("mousemove",function(){t.setAutoHide()}),this.player.container.addEventListener("click",function(){t.setAutoHide()}),this.player.on("play",function(){t.setAutoHide()}),this.player.on("pause",function(){t.setAutoHide()})),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),p.isSafari&&this.initAirplayButton(),p.isMobile||this.initVolumeButton()}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ce=(ue(pe.prototype,[{key:"hide",value:function(){var e=this;this.player.template.settingBox.classList.remove("dplayer-setting-box-open"),this.player.template.mask.classList.remove("dplayer-mask-show"),setTimeout(function(){e.player.template.settingBox.classList.remove("dplayer-setting-box-narrow"),e.player.template.settingBox.classList.remove("dplayer-setting-box-speed")},300),this.player.controller.disableAutoHide=!1}},{key:"show",value:function(){this.player.template.settingBox.classList.add("dplayer-setting-box-open"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.controller.disableAutoHide=!0}}]),pe);function pe(e){var t=this;!function(e){if(!(e instanceof pe))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,this.player.template.mask.addEventListener("click",function(){t.hide()}),this.player.template.settingButton.addEventListener("click",function(){t.show()}),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",function(){t.player.template.loopToggle.checked=!t.player.template.loopToggle.checked,t.player.template.loopToggle.checked?t.loop=!0:t.loop=!1,t.hide()}),this.showDanmaku=this.player.user.get("danmaku"),this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener("click",function(){t.player.template.showDanmakuToggle.checked=!t.player.template.showDanmakuToggle.checked,t.player.template.showDanmakuToggle.checked?(t.showDanmaku=!0,t.player.danmaku.show()):(t.showDanmaku=!1,t.player.danmaku.hide()),t.player.user.set("danmaku",t.showDanmaku?1:0),t.hide()}),this.unlimitDanmaku=this.player.user.get("unlimited"),this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener("click",function(){t.player.template.unlimitDanmakuToggle.checked=!t.player.template.unlimitDanmakuToggle.checked,t.player.template.unlimitDanmakuToggle.checked?(t.unlimitDanmaku=!0,t.player.danmaku.unlimit(!0)):(t.unlimitDanmaku=!1,t.player.danmaku.unlimit(!1)),t.player.user.set("unlimited",t.unlimitDanmaku?1:0),t.hide()}),this.player.template.speed.addEventListener("click",function(){t.player.template.settingBox.classList.add("dplayer-setting-box-narrow"),t.player.template.settingBox.classList.add("dplayer-setting-box-speed")});for(var n,i,a=0;a<this.player.template.speedItem.length;a++)!function(e){t.player.template.speedItem[e].addEventListener("click",function(){t.player.speed(t.player.template.speedItem[e].dataset.speed),t.hide()})}(a);this.player.danmaku&&(this.player.on("danmaku_opacity",function(e){t.player.bar.set("danmaku",e,"width"),t.player.user.set("opacity",e)}),this.player.danmaku.opacity(this.player.user.get("opacity")),n=function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130,e=Math.max(e,0);e=Math.min(e,1),t.player.danmaku.opacity(e)},i=function e(){document.removeEventListener(p.nameMap.dragEnd,e),document.removeEventListener(p.nameMap.dragMove,n),t.player.template.danmakuOpacityBox.classList.remove("dplayer-setting-danmaku-active")},this.player.template.danmakuOpacityBarWrapWrap.addEventListener("click",function(e){e=e||window.event,e=((e.clientX||e.changedTouches[0].clientX)-p.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130,e=Math.max(e,0);e=Math.min(e,1),t.player.danmaku.opacity(e)}),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(p.nameMap.dragStart,function(){document.addEventListener(p.nameMap.dragMove,n),document.addEventListener(p.nameMap.dragEnd,i),t.player.template.danmakuOpacityBox.classList.add("dplayer-setting-danmaku-active")}))}function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var fe=(he(me.prototype,[{key:"show",value:function(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add("dplayer-controller-comment"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.container.classList.add("dplayer-show-controller"),this.player.template.commentInput.focus()}},{key:"hide",value:function(){this.player.template.controller.classList.remove("dplayer-controller-comment"),this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.container.classList.remove("dplayer-show-controller"),this.player.controller.disableAutoHide=!1,this.hideSetting()}},{key:"showSetting",value:function(){this.player.template.commentSettingBox.classList.add("dplayer-comment-setting-open")}},{key:"hideSetting",value:function(){this.player.template.commentSettingBox.classList.remove("dplayer-comment-setting-open")}},{key:"toggleSetting",value:function(){this.player.template.commentSettingBox.classList.contains("dplayer-comment-setting-open")?this.hideSetting():this.showSetting()}},{key:"send",value:function(){var e=this;this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\s+|\s+$/g,"")?this.player.danmaku.send({text:this.player.template.commentInput.value,color:p.color2Number(this.player.container.querySelector(".dplayer-comment-setting-color input:checked").value),type:parseInt(this.player.container.querySelector(".dplayer-comment-setting-type input:checked").value)},function(){e.player.template.commentInput.value="",e.hide()}):this.player.notice(this.player.tran("Please input danmaku content!"))}}]),me);function me(e){var t=this;!function(e){if(!(e instanceof me))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,this.player.template.mask.addEventListener("click",function(){t.hide()}),this.player.template.commentButton.addEventListener("click",function(){t.show()}),this.player.template.commentSettingButton.addEventListener("click",function(){t.toggleSetting()}),this.player.template.commentColorSettingBox.addEventListener("click",function(){var e;t.player.template.commentColorSettingBox.querySelector("input:checked+span")&&(e=t.player.template.commentColorSettingBox.querySelector("input:checked").value,t.player.template.commentSettingFill.style.fill=e,t.player.template.commentInput.style.color=e,t.player.template.commentSendFill.style.fill=e)}),this.player.template.commentInput.addEventListener("click",function(){t.hideSetting()}),this.player.template.commentInput.addEventListener("keydown",function(e){13===(e||window.event).keyCode&&t.send()}),this.player.template.commentSendButton.addEventListener("click",function(){t.send()})}var ye=function t(a){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),a.options.hotkey&&document.addEventListener("keydown",function(e){if(a.focus){var t=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==n&&"true"!==n){var i,e=e||window.event;switch(e.keyCode){case 32:e.preventDefault(),a.toggle();break;case 37:if(e.preventDefault(),a.options.live)break;a.seek(a.video.currentTime-5),a.controller.setAutoHide();break;case 39:if(e.preventDefault(),a.options.live)break;a.seek(a.video.currentTime+5),a.controller.setAutoHide();break;case 38:e.preventDefault(),i=a.volume()+.1,a.volume(i);break;case 40:e.preventDefault(),i=a.volume()-.1,a.volume(i)}}}}),document.addEventListener("keydown",function(e){27===(e||window.event).keyCode&&a.fullScreen.isFullScreen("web")&&a.fullScreen.cancel("web")})};function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=(ge(be.prototype,[{key:"show",value:function(e,t){this.player.template.menu.classList.add("dplayer-menu-show");var n=this.player.container.getBoundingClientRect();e+this.player.template.menu.offsetWidth>=n.width?(this.player.template.menu.style.right=n.width-e+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=e+"px",this.player.template.menu.style.right="initial"),t+this.player.template.menu.offsetHeight>=n.height?(this.player.template.menu.style.bottom=n.height-t+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=t+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("dplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}},{key:"hide",value:function(){this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.template.menu.classList.remove("dplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}]),be);function be(e){var n=this;!function(e){if(!(e instanceof be))throw new TypeError("Cannot call a class as a function")}(this),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach(function(e,t){n.player.options.contextmenu[t].click&&e.addEventListener("click",function(){n.player.options.contextmenu[t].click(n.player),n.hide()})}),this.player.container.addEventListener("contextmenu",function(e){var t;n.shown?n.hide():((t=e||window.event).preventDefault(),e=n.player.container.getBoundingClientRect(),n.show(t.clientX-e.left,t.clientY-e.top),n.player.template.mask.addEventListener("click",function(){n.hide()}))})}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var we=(_e(Se.prototype,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("dplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("dplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("dplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.26.0"," ").concat("63275c8"),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration,this.player.options.danmaku&&(this.template.infoDanmakuId.innerHTML=this.player.options.danmaku.id,this.template.infoDanmakuApi.innerHTML=this.player.options.danmaku.api,this.template.infoDanmakuAmount.innerHTML=this.player.danmaku.dan.length)}},{key:"fps",value:function(e){this.template.infoFPS.innerHTML="".concat(e.toFixed(1))}}]),Se),L=n(1),ke=n.n(L);function Se(e){var t=this;!function(e){if(!(e instanceof Se))throw new TypeError("Cannot call a class as a function")}(this),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",function(){t.hide()})}function xe(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function Ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Te=0,Le=[],n=(n=[{key:"version",get:function(){return"1.26.0"}}],Ee((L=Ae).prototype,[{key:"seek",value:function(e){e=Math.max(e,0),this.video.duration&&(e=Math.min(e,this.video.duration)),this.video.currentTime<e?this.notice("".concat(this.tran("FF")," ").concat((e-this.video.currentTime).toFixed(0)," ").concat(this.tran("s"))):this.video.currentTime>e&&this.notice("".concat(this.tran("REW")," ").concat((this.video.currentTime-e).toFixed(0)," ").concat(this.tran("s"))),this.video.currentTime=e,this.danmaku&&this.danmaku.seek(),this.bar.set("played",e/this.video.duration,"width"),this.template.ptime.innerHTML=p.secondToTime(e)}},{key:"play",value:function(e){var t=this;if(this.paused=!1,this.video.paused&&!p.isMobile&&this.bezel.switch(A.play),this.template.playButton.innerHTML=A.pause,this.template.mobilePlayButton.innerHTML=A.pause,e||i.a.resolve(this.video.play()).catch(function(){t.pause()}).then(function(){}),this.timer.enable("loading"),this.container.classList.remove("dplayer-paused"),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var n=0;n<Le.length;n++)this!==Le[n]&&Le[n].pause()}},{key:"pause",value:function(e){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||p.isMobile||this.bezel.switch(A.pause),this.template.playButton.innerHTML=A.play,this.template.mobilePlayButton.innerHTML=A.play,e||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("dplayer-playing"),this.container.classList.add("dplayer-paused"),this.danmaku&&this.danmaku.pause()}},{key:"switchVolumeIcon",value:function(){.95<=this.volume()?this.template.volumeIcon.innerHTML=A.volumeUp:0<this.volume()?this.template.volumeIcon.innerHTML=A.volumeDown:this.template.volumeIcon.innerHTML=A.volumeOff}},{key:"volume",value:function(e,t,n){var i;return e=parseFloat(e),isNaN(e)||(e=Math.max(e,0),e=Math.min(e,1),this.bar.set("volume",e,"width"),i="".concat((100*e).toFixed(0),"%"),this.template.volumeBarWrapWrap.dataset.balloon=i,t||this.user.set("volume",e),n||this.notice("".concat(this.tran("Volume")," ").concat((100*e).toFixed(0),"%")),this.video.volume=e,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()),this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"switchVideo",value:function(e,t){this.pause(),this.video.poster=e.pic||"",this.video.src=e.url,this.initMSE(this.video,e.type||"auto"),t&&(this.template.danmakuLoading.style.display="block",this.bar.set("played",0,"width"),this.bar.set("loaded",0,"width"),this.template.ptime.innerHTML="00:00",this.template.danmaku.innerHTML="",this.danmaku&&this.danmaku.reload({id:t.id,address:t.api,token:t.token,maximum:t.maximum,addition:t.addition,user:t.user}))}},{key:"initMSE",value:function(e,t){var n,i,a,r,o,s,l=this;if(this.type=t,this.options.video.customType&&this.options.video.customType[t])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[t])?this.options.video.customType[t](this.video,this):console.error("Illegal customType: ".concat(t));else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(e.src)?this.type="hls":/.flv(#|\?|$)/i.exec(e.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(e.src)?this.type="dash":this.type="normal"),"hls"===this.type&&(e.canPlayType("application/x-mpegURL")||e.canPlayType("application/vnd.apple.mpegURL"))&&(this.type="normal"),this.type){case"hls":window.Hls?window.Hls.isSupported()?(a=this.options.pluginOptions.hls,n=new window.Hls(a),(this.plugins.hls=n).loadSource(e.src),n.attachMedia(e),this.events.on("destroy",function(){n.destroy(),delete l.plugins.hls})):this.notice("Error: Hls is not supported."):this.notice("Error: Can't find Hls.");break;case"flv":window.flvjs?window.flvjs.isSupported()?(i=window.flvjs.createPlayer(Object.assign(this.options.pluginOptions.flv.mediaDataSource||{},{type:"flv",url:e.src}),this.options.pluginOptions.flv.config),(this.plugins.flvjs=i).attachMediaElement(e),i.load(),this.events.on("destroy",function(){i.unload(),i.detachMediaElement(),i.destroy(),delete l.plugins.flvjs})):this.notice("Error: flvjs is not supported."):this.notice("Error: Can't find flvjs.");break;case"dash":window.dashjs?(r=window.dashjs.MediaPlayer().create().initialize(e,e.src,!1),a=this.options.pluginOptions.dash,r.updateSettings(a),this.plugins.dash=r,this.events.on("destroy",function(){window.dashjs.MediaPlayer().reset(),delete l.plugins.dash})):this.notice("Error: Can't find dashjs.");break;case"webtorrent":window.WebTorrent?window.WebTorrent.WEBRTC_SUPPORT?(this.container.classList.add("dplayer-loading"),r=this.options.pluginOptions.webtorrent,o=new window.WebTorrent(r),this.plugins.webtorrent=o,s=e.src,e.src="",e.preload="metadata",e.addEventListener("durationchange",function(){return l.container.classList.remove("dplayer-loading")},{once:!0}),o.add(s,function(e){e.files.find(function(e){return e.name.endsWith(".mp4")}).renderTo(l.video,{autoplay:l.options.autoplay,controls:!1})}),this.events.on("destroy",function(){o.remove(s),o.destroy(),delete l.plugins.webtorrent})):this.notice("Error: Webtorrent is not supported."):this.notice("Error: Can't find Webtorrent.")}}},{key:"initVideo",value:function(t,e){var n=this;this.initMSE(t,e),this.on("durationchange",function(){1!==t.duration&&t.duration!==1/0&&(n.template.dtime.innerHTML=p.secondToTime(t.duration))}),this.on("progress",function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;n.bar.set("loaded",e,"width")}),this.on("error",function(){n.video.error&&n.tran&&n.notice&&"webtorrent"!==n.type&&n.notice(n.tran("Video load failed"),-1)}),this.on("ended",function(){n.bar.set("played",1,"width"),n.setting.loop?(n.seek(0),n.play()):n.pause(),n.danmaku&&(n.danmaku.danIndex=0)}),this.on("play",function(){n.paused&&n.play(!0)}),this.on("pause",function(){n.paused||n.pause(!0)}),this.on("timeupdate",function(){n.bar.set("played",n.video.currentTime/n.video.duration,"width");var e=p.secondToTime(n.video.currentTime);n.template.ptime.innerHTML!==e&&(n.template.ptime.innerHTML=e)});for(var i=0;i<this.events.videoEvents.length;i++)!function(e){t.addEventListener(n.events.videoEvents[e],function(){n.events.trigger(n.events.videoEvents[e])})}(i);this.volume(this.user.get("volume"),!0,!0),this.options.subtitle&&(this.subtitle=new W(this.template.subtitle,this.video,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}},{key:"switchQuality",value:function(e){var t,n=this;e="string"==typeof e?parseInt(e):e,this.qualityIndex===e||this.switchingQuality||(this.qualityIndex=e,this.switchingQuality=!0,this.quality=this.options.video.quality[e],this.template.qualityButton.innerHTML=this.quality.name,t=this.video.paused,this.video.pause(),e=ke()({current:!1,pic:null,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),e=(new DOMParser).parseFromString(e,"text/html").body.firstChild,this.template.videoWrap.insertBefore(e,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=e,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){n.prevVideo&&(n.video.currentTime===n.prevVideo.currentTime?(n.template.videoWrap.removeChild(n.prevVideo),n.video.classList.add("dplayer-video-current"),t||n.video.play(),n.prevVideo=null,n.notice("".concat(n.tran("Switched to")," ").concat(n.quality.name," ").concat(n.tran("quality"))),n.switchingQuality=!1,n.events.trigger("quality_end")):n.seek(n.prevVideo.currentTime))}))}},{key:"notice",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=i,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",e),0<n&&(this.noticeTime=setTimeout(function(){t.template.notice.style.opacity=0,t.events.trigger("notice_hide")},n))}},{key:"resize",value:function(){this.danmaku&&this.danmaku.resize(),this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(e){this.video.playbackRate=e}},{key:"destroy",value:function(){Le.splice(Le.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy")}}]),Ee(L,n),Ae);function Ae(e){var t=this;!function(e){if(!(e instanceof Ae))throw new TypeError("Cannot call a class as a function")}(this),this.options=d(function(i){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(a),!0).forEach(function(e){var t,n;t=i,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}({preload:"webtorrent"===e.video.type?"none":"metadata"},e)),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new c(this.options.lang).tran,this.events=new j,this.user=new G(this),this.container=this.options.container,this.container.classList.add("dplayer"),this.options.danmaku||this.container.classList.add("dplayer-no-danmaku"),this.options.live&&this.container.classList.add("dplayer-live"),p.isMobile&&this.container.classList.add("dplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("dplayer-arrow"),this.template=new C({container:this.container,options:this.options,index:Te,tran:this.tran}),this.video=this.template.video,this.bar=new $(this.template),this.bezel=new ne(this.template.bezel),this.fullScreen=new z(this),this.controller=new le(this),this.options.danmaku&&(this.danmaku=new U({container:this.template.danmaku,opacity:this.user.get("opacity"),callback:function(){setTimeout(function(){t.template.danmakuLoading.style.display="none",t.options.autoplay&&t.play()},0)},error:function(e){t.notice(e)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return t.video.currentTime},unlimited:this.user.get("unlimited"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events,tran:function(e){return t.tran(e)}}),this.comment=new fe(this)),this.setting=new ce(this),this.plugins={},document.addEventListener("click",function(){t.focus=!1},!0),this.container.addEventListener("click",function(){t.focus=!0},!0),this.paused=!0,this.timer=new J(this),this.hotkey=new ye(this),this.contextmenu=new ve(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new we(this),!this.danmaku&&this.options.autoplay&&this.play(),Te++,Le.push(this)}console.log("\n".concat(" %c DPlayer v","1.26.0"," ").concat("63275c8"," %c http://dplayer.js.org ","\n","\n"),"color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),t.default=n}]).default}).call(this,n(28).setImmediate,n(28).clearImmediate)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}}},function(e,t,n){var i=n(39);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var i=n(42);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(44)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(t=n(43)(!1)).push([e.i,".container {\n  display: flex;\n  flex-direction: column;\n  padding: 50px 0;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n.container #player {\n  max-width: 80%;\n  max-height: 600px;\n  display: none;\n}\n.container .drag-wrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  width: 250px;\n  height: 150px;\n  color: #666;\n  border-radius: 7px;\n  border: 1px dashed rgba(0, 0, 0, 0.3);\n  background-color: rgba(255, 255, 255, 0.3);\n}\n.container .drag-wrap.drag-in {\n  background-color: #ffffff;\n}\n.container .drag-wrap input {\n  display: none;\n}\n.container.is_play .drag-wrap {\n  height: 50px;\n  margin-top: 20px;\n}\n* {\n  margin: 0;\n  padding: 0;\n}\n.btn {\n  display: inline-block;\n  height: 38px;\n  line-height: 38px;\n  padding: 0 18px;\n  background-color: #009688;\n  color: #fff;\n  white-space: nowrap;\n  text-align: center;\n  font-size: 14px;\n  border: none;\n  border-radius: 2px;\n  cursor: pointer;\n  margin-left: 10px;\n}\ncode {\n  color: #e9e9e9;\n  resize: none;\n  width: 100%;\n  padding: 8px;\n  letter-spacing: normal;\n  word-spacing: normal;\n  text-transform: none;\n  text-indent: 0px;\n  text-shadow: none;\n  background-color: #393d49;\n  font-size: 14px;\n  border-radius: 4px;\n}\n.notify-container {\n  box-sizing: border-box;\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 98%;\n  padding-right: 10px;\n  max-width: 450px;\n  display: flex;\n  flex-direction: column;\n}\n.notify-container .notify-wrap {\n  transform: translateX(100%);\n  transition: 0.16s all ease-in-out;\n  margin-top: 16px;\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 1px 7px 14px -5px rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n}\n.notify-container .notify-wrap.info .icon {\n  background-color: hsla(216.1682243, 89.91596639%, 53.33333333%, 0.2);\n}\n.notify-container .notify-wrap.info .icon svg {\n  fill: #1D72F3;\n}\n.notify-container .notify-wrap.info::before {\n  background-color: #1D72F3;\n}\n.notify-container .notify-wrap.load::before {\n  content: none;\n}\n.notify-container .notify-wrap.load .icon {\n  -webkit-animation: tia-rotate 1.6s linear infinite;\n          animation: tia-rotate 1.6s linear infinite;\n}\n.notify-container .notify-wrap.load .icon svg {\n  font-size: 1.2em;\n}\n.notify-container .notify-wrap.load .progress-bar {\n  background-color: #ff4081;\n}\n.notify-container .notify-wrap.warn::before {\n  background-color: #FFC007;\n}\n.notify-container .notify-wrap.warn .icon {\n  background-color: hsla(44.75806452, 100%, 51.37254902%, 0.2);\n}\n.notify-container .notify-wrap.warn .icon svg {\n  fill: #FFC007;\n}\n.notify-container .notify-wrap.error::before {\n  background-color: #ff4081;\n}\n.notify-container .notify-wrap.error .icon {\n  background-color: hsla(339.58115183, 100%, 62.54901961%, 0.2);\n}\n.notify-container .notify-wrap.error .icon svg {\n  font-size: 0.5em;\n}\n.notify-container .notify-wrap.error .icon svg {\n  fill: #ff4081;\n}\n.notify-container .notify-wrap.sucess .icon {\n  background-color: hsla(152.77310924, 47.41035857%, 49.21568627%, 0.2);\n}\n.notify-container .notify-wrap.sucess .icon svg {\n  fill: #42b983;\n}\n.notify-container .notify-wrap.sucess::before {\n  background-color: #42b983;\n}\n.notify-container .notify-wrap .content {\n  flex: 1;\n  border: none;\n  padding: 0 10px;\n}\n.notify-container .notify-wrap .content h3 {\n  line-height: 2;\n}\n.notify-container .notify-wrap .content .msg {\n  margin-bottom: 0.6em;\n}\n.notify-container .notify-wrap .icon {\n  width: 1em;\n  height: 1em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  font-size: 30px;\n  overflow: hidden;\n  border-radius: 50%;\n}\n.notify-container .notify-wrap .icon svg {\n  width: 0.6em;\n  height: 0.6em;\n  fill: #353535;\n}\n.notify-container .notify-wrap .btn {\n  position: absolute;\n  top: 10px;\n  right: 0;\n  background-color: transparent;\n  color: #353535;\n  margin: 0;\n  outline: none;\n}\n.notify-container .notify-wrap .btn svg {\n  width: 1em;\n  height: 1em;\n  fill: #353535;\n}\n.notify-container .notify-wrap::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 4px;\n  height: 100%;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  background-color: #FFC007;\n}\n.notify-container .notify-wrap .progress-bar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 4px;\n  width: 0;\n  border-radius: 2px;\n  transition: 0.4s width linear;\n  background-color: #42b983;\n}\ninput[type=file] {\n  display: none;\n}\nul.animo-wrap {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: -1;\n  width: 100%;\n  height: 100vh;\n  background: linear-gradient(to bottom right, #50a3a2, #53e3a6);\n}\nul.animo-wrap li {\n  position: absolute;\n  width: 60px;\n  height: 60px;\n  background-color: hsla(0, 0%, 100%, 0.15);\n  list-style: none;\n  left: 60px;\n  bottom: -60px;\n  -webkit-animation: square 25s infinite;\n  animation: square 25s infinite;\n  transition-timing-function: linear;\n}\nul.animo-wrap li:nth-of-type(2n) {\n  left: 10%;\n  border-radius: 50%;\n}\nul.animo-wrap li:nth-of-type(old) {\n  left: 20%;\n  width: 90px;\n  height: 90px;\n  -webkit-animation-delay: 2s;\n  animation-delay: 2s;\n  -webkit-animation-duration: 7s;\n  animation-duration: 7s;\n}\nul.animo-wrap li:nth-child(3) {\n  left: 25%;\n  -webkit-animation-delay: 4s;\n  animation-delay: 4s;\n}\nul.animo-wrap li:nth-child(4) {\n  left: 40%;\n  width: 60px;\n  height: 60px;\n  -webkit-animation-duration: 8s;\n  animation-duration: 8s;\n  background-color: hsla(0, 0%, 100%, 0.3);\n}\nul.animo-wrap li:nth-child(5) {\n  left: 70%;\n}\nul.animo-wrap li:nth-child(6) {\n  left: 80%;\n  width: 100px;\n  height: 100px;\n  -webkit-animation-delay: 3s;\n  animation-delay: 3s;\n  background-color: hsla(0, 0%, 100%, 0.2);\n}\nul.animo-wrap li:nth-child(7) {\n  left: 32%;\n  width: 120px;\n  height: 120px;\n  -webkit-animation-delay: 2s;\n  animation-delay: 2s;\n}\nul.animo-wrap li:nth-child(8) {\n  left: 55%;\n  width: 40px;\n  height: 40px;\n  -webkit-animation-delay: 4s;\n  animation-delay: 4s;\n  -webkit-animation-duration: 15s;\n  animation-duration: 15s;\n}\nul.animo-wrap li:nth-child(9) {\n  left: 25%;\n  width: 20px;\n  height: 20px;\n  -webkit-animation-delay: 2s;\n  animation-delay: 2s;\n  -webkit-animation-duration: 12s;\n  animation-duration: 12s;\n  background-color: hsla(0, 0%, 100%, 0.3);\n}\nul.animo-wrap li:nth-child(10) {\n  left: 85%;\n  width: 120px;\n  height: 120px;\n  -webkit-animation-delay: 5s;\n  animation-delay: 5s;\n}\n@-webkit-keyframes square {\n  0% {\n    opacity: 0.5;\n    transform: translateY(0) rotate(0);\n  }\n  50% {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n    transform: translateY(-90vh) rotate(1turn);\n  }\n}\n@keyframes square {\n  0% {\n    opacity: 0.5;\n    transform: translateY(0) rotate(0);\n  }\n  50% {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n    transform: translateY(-90vh) rotate(1turn);\n  }\n}\ndiv.tia-toast {\n  width: 100%;\n  z-index: 1024;\n  transition: all 0.3s ease;\n  background-color: #353535;\n  position: fixed;\n  bottom: -100px;\n  left: 0;\n  color: #e9e9e9;\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n}\ndiv.tia-toast p {\n  flex: 1;\n  padding: 0;\n  margin: 0;\n  padding: 10px;\n}\ndiv.tia-toast .tia-icon {\n  margin-left: 12px;\n  height: 30px;\n  width: 30px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n}\ndiv.tia-toast .tia-icon svg {\n  font-size: 20px;\n  width: 1em;\n  height: 1em;\n  fill: #e9e9e9;\n}\ndiv.tia-toast .tia-icon.load {\n  -webkit-animation: tia-rotate 1.6s linear infinite;\n          animation: tia-rotate 1.6s linear infinite;\n}\ndiv.tia-toast .tia-icon.load svg {\n  font-size: 26px;\n}\ndiv.tia-toast .tia-icon.warn {\n  background-color: hsla(44.75806452, 100%, 51.37254902%, 0.2);\n}\ndiv.tia-toast .tia-icon.warn svg {\n  fill: #FFC007;\n}\ndiv.tia-toast .tia-icon.error {\n  background-color: hsla(339.58115183, 100%, 62.54901961%, 0.2);\n}\ndiv.tia-toast .tia-icon.error svg {\n  font-size: 14px;\n}\ndiv.tia-toast .tia-icon.error svg {\n  fill: #ff4081;\n}\ndiv.tia-toast .tia-icon.sucess {\n  background-color: hsla(152.77310924, 47.41035857%, 49.21568627%, 0.2);\n}\ndiv.tia-toast .tia-icon.sucess svg {\n  fill: #42b983;\n}\ndiv.tia-toast span {\n  background-color: transparent;\n  line-height: 100%;\n  display: flex;\n  cursor: pointer;\n  justify-content: center;\n  align-items: center;\n  color: #42b983;\n  padding: 0 12px;\n}\ndiv.tia-toast span:hover {\n  opacity: 0.9;\n}\n@-webkit-keyframes tia-rotate {\n  0% {\n    transform: rotateZ(0deg);\n  }\n  50% {\n    transform: rotateZ(180deg);\n  }\n  100% {\n    transform: rotateZ(360deg);\n  }\n}\n@keyframes tia-rotate {\n  0% {\n    transform: rotateZ(0deg);\n  }\n  50% {\n    transform: rotateZ(180deg);\n  }\n  100% {\n    transform: rotateZ(360deg);\n  }\n}\n@media (min-width: 600px) {\n  div.tia-toast {\n    border-radius: 6px;\n    width: 500px;\n    left: calc(50% - 250px);\n  }\n  div.tia-toast p {\n    padding: 10px;\n  }\n}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(n){var l=[];return l.toString=function(){return this.map(function(e){var t=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){e=function(e){e=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),e="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(e," */")}(i),t=i.sources.map(function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")});return[n].concat(t).concat([e]).join("\n")}return[n].join("\n")}(e,n);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t}).join("")},l.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var s=[].concat(e[o]);n&&i[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),l.push(s))}},l}},function(e,t,i){var n,a,r,l={},d=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),o=(r={},function(e,t){if("function"==typeof e)return e();if(void 0===r[e]){var n=function(e,t){return(t||document).querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}r[e]=n}return r[e]}),s=null,u=0,c=[],p=i(45);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=l[i.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](i.parts[r]);for(;r<i.parts.length;r++)a.parts.push(b(i.parts[r],t))}else{for(var o=[],r=0;r<i.parts.length;r++)o.push(b(i.parts[r],t));l[i.id]={id:i.id,refs:1,parts:o}}}}function f(e,t){for(var n=[],i={},a=0;a<e.length;a++){var r=e[a],o=t.base?r[0]+t.base:r[0],r={css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(r):n.push(i[o]={id:o,parts:[r]})}return n}function m(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");e=o(e.insertAt.before,n);n.insertBefore(t,e)}}function y(e){null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(e=c.indexOf(e))&&c.splice(e,1))}function g(e){var t,n=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0!==e.attrs.nonce||(t=function(){0;return i.nc}())&&(e.attrs.nonce=t),v(n,e.attrs),m(e,n),n}function v(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function b(t,e){var n,i,a,r,o;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}return a=e.singleton?(o=u++,n=s=s||g(e),i=k.bind(null,n,o,!1),k.bind(null,n,o,!0)):t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=e,o=document.createElement("link"),void 0===r.attrs.type&&(r.attrs.type="text/css"),r.attrs.rel="stylesheet",v(o,r.attrs),m(r,o),i=function(e,t,n){var i=n.css,a=n.sourceMap,n=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||n)&&(i=p(i));a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");a=new Blob([i],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(a),i&&URL.revokeObjectURL(i)}.bind(null,n=o,e),function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(e),i=function(e,t){var n=t.css,t=t.media;t&&e.setAttribute("media",t);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){y(n)}),i(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||i(t=e):a()}}e.exports=function(e,o){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(o=o||{}).attrs="object"==typeof o.attrs?o.attrs:{},o.singleton||"boolean"==typeof o.singleton||(o.singleton=d()),o.insertInto||(o.insertInto="head"),o.insertAt||(o.insertAt="bottom");var s=f(e,o);return h(s,o),function(e){for(var t=[],n=0;n<s.length;n++){var i=s[n];(a=l[i.id]).refs--,t.push(a)}e&&h(f(e,o),o);for(var a,n=0;n<t.length;n++)if(0===(a=t[n]).refs){for(var r=0;r<a.parts.length;r++)a.parts[r]();delete l[a.id]}}};var _,w=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function k(e,t,n,i){n=n?"":i.css;e.styleSheet?e.styleSheet.cssText=w(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){t=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(t)?e:(t=0===t.indexOf("//")?t:0===t.indexOf("/")?n+t:i+t.replace(/^\.\//,""),"url("+JSON.stringify(t)+")")})}},function(e,t,n){"use strict";var i=function(i){var a=i.byteLength,r=0,o=0;this.length=function(){return 8*a},this.bitsAvailable=function(){return 8*a+o},this.loadWord=function(){var e=i.byteLength-a,t=new Uint8Array(4),n=Math.min(4,a);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),r=new DataView(t.buffer).getUint32(0),o=8*n,a-=n},this.skipBits=function(e){var t;e<o||(e-=o,e-=8*(t=Math.floor(e/8)),a-=t,this.loadWord()),r<<=e,o-=e},this.readBits=function(e){var t=Math.min(o,e),n=r>>>32-t;return 0<(o-=t)?r<<=t:0<a&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){for(var e=0;e<o;++e)if(0!=(r&2147483648>>>e))return r<<=e,o-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};e.exports=i},function(e,t,n){e.exports={generator:n(3),probe:n(48),Transmuxer:n(16).Transmuxer,AudioSegmentStream:n(16).AudioSegmentStream,VideoSegmentStream:n(16).VideoSegmentStream,CaptionParser:n(52)}},function(e,t,n){"use strict";var r=n(4).toUnsigned,s=n(4).toHexString,l=n(11),d=n(12),u=n(13),c=n(14),p=n(15),i=function(e){return l(e,["moov","trak"]).reduce(function(e,t){var n,i,a=l(t,["tkhd"])[0];return a?(n=a[0],a=r(a[i=0===n?12:20]<<24|a[1+i]<<16|a[2+i]<<8|a[3+i]),(t=l(t,["mdia","mdhd"])[0])?(i=0===t[0]?12:20,e[a]=r(t[i]<<24|t[1+i]<<16|t[2+i]<<8|t[3+i]),e):null):null},{})},a=function(i,e){var e=l(e,["moof","traf"]),e=[].concat.apply([],e.map(function(n){return l(n,["tfhd"]).map(function(e){var t=r(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),e=i[t]||9e4,t=l(n,["tfdt"]).map(function(e){var t=e[0],n=r(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return 1===t&&(n*=Math.pow(2,32),n+=r(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0];return(t||1/0)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},o=function(e,t){var n,i,a=l(t,["moof","traf"]),r=0,o=0;return a&&a.length&&(n=l(a[0],["tfhd"])[0],t=l(a[0],["trun"])[0],a=l(a[0],["tfdt"])[0],n&&(i=u(n).trackId),a&&(r=p(a).baseMediaDecodeTime),!t||(t=c(t)).samples&&t.samples.length&&(o=t.samples[0].compositionTimeOffset||0)),(r+o)/(e[i]||9e4)},h=function(e){var e=l(e,["moov","trak"]),i=[];return e.forEach(function(e){var t=l(e,["mdia","hdlr"]),n=l(e,["tkhd"]);t.forEach(function(e,t){e=d(e.subarray(8,12)),t=n[t];"vide"===e&&(t=0===(t=new DataView(t.buffer,t.byteOffset,t.byteLength)).getUint8(0)?t.getUint32(12):t.getUint32(20),i.push(t))})}),i},f=function(e){var t=0===e[0]?12:20;return r(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])},n=function(e){var e=l(e,["moov","trak"]),o=[];return e.forEach(function(e){var t={},n=l(e,["tkhd"])[0];n&&(n=(i=new DataView(n.buffer,n.byteOffset,n.byteLength)).getUint8(0),t.id=0===n?i.getUint32(12):i.getUint32(20));var i=l(e,["mdia","hdlr"])[0];i&&(r=d(i.subarray(8,12)),t.type="vide"===r?"video":"soun"===r?"audio":r);var a,r=l(e,["mdia","minf","stbl","stsd"])[0];r&&(r=r.subarray(8),t.codec=d(r.subarray(4,8)),(r=l(r,[t.codec])[0])&&(/^[a-z]vc[1-9]$/i.test(t.codec)?(a=r.subarray(78),"avcC"===d(a.subarray(4,8))&&11<a.length?(t.codec+=".",t.codec+=s(a[9]),t.codec+=s(a[10]),t.codec+=s(a[11])):t.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(t.codec)&&(a=r.subarray(28),"esds"===d(a.subarray(4,8))&&20<a.length&&0!==a[19]?(t.codec+="."+s(a[19]),t.codec+="."+s(a[20]>>>2&63).replace(/^0/,"")):t.codec="mp4a.40.2")));e=l(e,["mdia","mdhd"])[0];e&&(t.timescale=f(e)),o.push(t)}),o};e.exports={findBox:l,parseType:d,timescale:i,startTime:a,compositionStartTime:o,videoTrackIds:h,tracks:n,getTimescaleFromMediaHeader:f}},function(e,t){e.exports=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},function(e,t){function i(e){for(var t=[];e--;)t.push(0);return t}var a,r=[33,16,5,32,164,27],o=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];e.exports=function(){var e,n;return a||(e={96e3:[r,[227,64],i(154),[56]],88200:[r,[231],i(170),[56]],64e3:[r,[248,192],i(240),[56]],48e3:[r,[255,192],i(268),[55,148,128],i(54),[112]],44100:[r,[255,192],i(268),[55,163,128],i(84),[112]],32e3:[r,[255,192],i(268),[55,234],i(226),[112]],24e3:[r,[255,192],i(268),[55,255,128],i(268),[111,112],i(126),[224]],16e3:[r,[255,192],i(268),[55,255,128],i(268),[111,255],i(269),[223,108],i(195),[1,192]],12e3:[o,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,253,128],i(259),[56]],11025:[o,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,255,192],i(268),[55,175,128],i(108),[112]],8e3:[o,i(268),[3,121,16],i(47),[7]]},n=e,a=Object.keys(n).reduce(function(e,t){return e[t]=new Uint8Array(n[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),a}},function(e,t,n){"use strict";function i(e,t,n){for(var i="",a=t;a<n;a++)i+="%"+("00"+e[a].toString(16)).slice(-2);return i}function a(e,t,n){return decodeURIComponent(i(e,t,n))}function p(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var r=n(0),o=n(7),h={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=a(e.data,1,t),e.value=a(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=a(e.data,1,t),e.url=a(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,n=0;n<e.data.length;n++)if(0===e.data[n]){e.owner=(t=e.data,unescape(i(t,0,n)));break}e.privateData=e.data.subarray(n+1),e.data=e.privateData}},s=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},d=0,u=[],c=0;if(s.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,a,r,o,s;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(c=0,u.length=0),0===u.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(u.push(e),c+=e.data.byteLength,1===u.length&&(d=p(e.data.subarray(6,10)),d+=10),!(c<d)){for(t={data:new Uint8Array(d),frames:[],pts:u[0].pts,dts:u[0].dts},a=0;a<d;)t.data.set(u[0].data.subarray(0,d-a),a),a+=u[0].data.byteLength,c-=u[0].data.byteLength,u.shift();n=10,64&t.data[5]&&(n+=4,n+=p(t.data.subarray(10,14)),d-=p(t.data.subarray(16,20)));do{if((i=p(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}while((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=s.id,h[s.id]&&(h[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner&&(o=(1&(r=s.data)[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2,o*=4,o+=3&r[7],s.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s))),t.frames.push(s),n+=10,(n+=i)<d);this.trigger("data",t)}}};s.prototype=new r,e.exports=s},function(e,t,n){"use strict";function u(e,u){var n=h(e,["moof","traf"]),e=h(e,["mdat"]),c={},i=[];return e.forEach(function(e,t){t=n[t];i.push({mdat:e,traf:t})}),i.forEach(function(e){var t,n,i,a,r,o=e.mdat,s=e.traf,l=h(s,["tfhd"]),d=y(l[0]),e=d.trackId,l=h(s,["tfdt"]),l=0<l.length?f(l[0]).baseMediaDecodeTime:0,s=h(s,["trun"]);u===e&&0<s.length&&(s=s,t=l,n=(d=d).defaultSampleDuration||0,i=d.defaultSampleSize||0,a=d.trackId,r=[],s.forEach(function(e){e=m(e).samples;e.forEach(function(e){void 0===e.duration&&(e.duration=n),void 0===e.size&&(e.size=i),e.trackId=a,e.dts=t,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=t+e.compositionTimeOffset,t+=e.duration}),r=r.concat(e)}),o=function(e,t,n){for(var i,a,r=new DataView(e.buffer,e.byteOffset,e.byteLength),o=[],s=0;s+4<e.length;s+=i)if(i=r.getUint32(s),s+=4,!(i<=0))switch(31&e[s]){case 6:var l=e.subarray(s+1,s+1+i),d=function(e,t){for(var n=e,i=0;i<t.length;i++){var a=t[i];if(n<a.size)return a;n-=a.size}return null}(s,t),l={nalUnitType:"sei_rbsp",size:i,data:l,escapedRBSP:p(l),trackId:n};if(d)l.pts=d.pts,l.dts=d.dts,a=d;else{if(!a){console.log("We've encountered a nal unit without data. See mux.js#233.");break}l.pts=a.pts,l.dts=a.dts}o.push(l)}return o}(o,r,e),c[e]||(c[e]=[]),c[e]=c[e].concat(o))}),c}var p=n(23).discardEmulationPreventionBytes,a=n(22).CaptionStream,h=n(11),f=n(15),m=n(14),y=n(13);e.exports=function(){var t,o,s,l,d,n,i=!1;this.isInitialized=function(){return i},this.init=function(e){t=new a,i=!0,n=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/l,e.endTime=e.endPts/l,d.captions.push(e),d.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(s!==e[0]||l!==t[s])},this.parse=function(e,t,n){var i,a;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))s=t[0],l=n[s];else if(null===s||!l)return o.push(e),null;for(;0<o.length;){var r=o.shift();this.parse(r,t,n)}return i=e,a=l,null!==(a=null===(e=s)?null:{seiNals:u(i,e)[e],timescale:a})&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),d):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;n?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){d.captions=[],d.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){o=[],l=s=null,d?this.clearParsedCaptions():d={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},function(e,t,n){e.exports={tag:n(17),Transmuxer:n(54),getFlvHeader:n(57)}},function(e,t,n){"use strict";var f,m,i=n(0),l=n(17),y=n(6),g=n(2),v=n(10).H264Stream,b=n(55),d=n(56),u=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},s=function(e,t){var n=new l(l.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},c=function(e,t){var n,i=new l(l.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},_=function(a){var r,o=[],s=[];_.prototype.init.call(this),this.push=function(e){u(a,e),a&&(a.audioobjecttype=e.audioobjecttype,a.channelcount=e.channelcount,a.samplerate=e.samplerate,a.samplingfrequencyindex=e.samplingfrequencyindex,a.samplesize=e.samplesize,a.extraData=a.audioobjecttype<<11|a.samplingfrequencyindex<<7|a.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),o.push(e)},this.flush=function(){var e,t,n,i=new d;if(0!==o.length){for(n=-1/0;o.length;)e=o.shift(),s.length&&e.pts>=s[0]&&(n=s.shift(),this.writeMetaDataTags(i,n)),(a.extraData!==r||1e3<=e.pts-n)&&(this.writeMetaDataTags(i,e.pts),r=a.extraData,n=e.pts),(t=new l(l.AUDIO_TAG)).pts=e.pts,t.dts=e.dts,t.writeBytes(e.data),i.push(t.finalize());s.length=0,r=null,this.trigger("data",{track:a,tags:i.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,t){var n=new l(l.METADATA_TAG);n.pts=t,n.dts=t,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===a.channelcount),n.writeMetaDataDouble("audiosamplerate",a.samplerate),n.writeMetaDataDouble("audiosamplesize",16),e.push(n.finalize()),(n=new l(l.AUDIO_TAG,!0)).pts=t,n.dts=t,n.view.setUint16(n.position,a.extraData),n.position+=2,n.length=Math.max(n.length,n.position),e.push(n.finalize())},this.onVideoKeyFrame=function(e){s.push(e)}};_.prototype=new i,(m=function(a){var r,o,n=[];m.prototype.init.call(this),this.finishFrame=function(e,t){var n,i;t&&(r&&a&&a.newMetadata&&(t.keyFrame||0===e.length)&&(n=s(r,t.dts).finalize(),i=c(a,t.dts).finalize(),n.metaDataTag=i.metaDataTag=!0,e.push(n),e.push(i),a.newMetadata=!1,this.trigger("keyframe",t.dts)),t.endNalUnit(),e.push(t.finalize()),o=null)},this.push=function(e){u(a,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var e,t=new d;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(e=n.shift()).nalUnitType?(a.newMetadata=!0,r=e.config,a.width=r.width,a.height=r.height,a.sps=[e.data],a.profileIdc=r.profileIdc,a.levelIdc=r.levelIdc,a.profileCompatibility=r.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===e.nalUnitType?(a.newMetadata=!0,a.pps=[e.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===e.nalUnitType?(o&&this.finishFrame(t,o),(o=new l(l.VIDEO_TAG)).pts=e.pts,o.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(e.data);o&&this.finishFrame(t,o),this.trigger("data",{track:a,tags:t.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new i,(f=function(e){var t,n,i,a,r,o,s,l,d,u,c,p,h=this;f.prototype.init.call(this),e=e||{},this.metadataStream=new y.MetadataStream,e.metadataStream=this.metadataStream,t=new y.TransportPacketStream,n=new y.TransportParseStream,i=new y.ElementaryStream,a=new y.TimestampRolloverStream("video"),r=new y.TimestampRolloverStream("audio"),o=new y.TimestampRolloverStream("timed-metadata"),s=new g,l=new v,p=new b(e),t.pipe(n).pipe(i),i.pipe(a).pipe(l),i.pipe(r).pipe(s),i.pipe(o).pipe(this.metadataStream).pipe(p),c=new y.CaptionStream,l.pipe(c).pipe(p),i.on("data",function(e){var t,n,i;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!d&&(p.numberOfTracks++,d=new m(n),l.pipe(d).pipe(p)),i&&!u&&(p.numberOfTracks++,u=new _(i),s.pipe(u).pipe(p),d&&d.on("keyframe",u.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){c.reset()},p.on("data",function(e){h.trigger("data",e)}),p.on("done",function(){h.trigger("done")})}).prototype=new i,e.exports=f},function(e,t,n){"use strict";var n=n(0),i=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};i.prototype=new n,i.prototype.flush=function(e){var t,n,i,a,r={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?a=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts),r.tags.videoTags=this.videoTags,r.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-a,n.startTime/=9e4,n.endTime=n.endPts-a,n.endTime/=9e4,r.captionStreams[n.stream]=!0,r.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(t=this.pendingMetadata[i]).cueTime=t.pts-a,t.cueTime/=9e4,r.metadata.push(t);r.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",r),this.trigger("done")}},e.exports=i},function(e,t,n){"use strict";e.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},function(e,t,n){"use strict";var o=n(17);e.exports=function(e,t,n){var i,a=new Uint8Array(9),r=new DataView(a.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,r.setUint8(0,70),r.setUint8(1,76),r.setUint8(2,86),r.setUint8(3,1),r.setUint8(4,(t?4:0)|(n?1:0)),r.setUint32(5,a.byteLength),e<=0?((i=new Uint8Array(a.byteLength+4)).set(a),i.set([0,0,0,0],a.byteLength)):((n=new o(o.METADATA_TAG)).pts=n.dts=0,n.writeMetaDataDouble("duration",e),n=n.finalize().length,(i=new Uint8Array(a.byteLength+n)).set(a),i.set(r.byteLength,n)),i}},function(e,t,n){e.exports=n(6)},function(e,t,n){e.exports={Transmuxer:n(60)}},function(e,t,n){function d(e){return e.prototype=new i,e.prototype.init.call(e),e}function u(t,n){t.on("data",n.trigger.bind(n,"data")),t.on("done",n.trigger.bind(n,"done")),t.on("partialdone",n.trigger.bind(n,"partialdone")),t.on("endedtimeline",n.trigger.bind(n,"endedtimeline")),t.on("audioTimingInfo",n.trigger.bind(n,"audioTimingInfo")),t.on("videoTimingInfo",n.trigger.bind(n,"videoTimingInfo")),t.on("trackinfo",n.trigger.bind(n,"trackinfo")),t.on("id3Frame",function(e){e.dispatchType=t.metadataStream.dispatchType,e.cueTime=v.videoTsToSeconds(e.pts),n.trigger("id3Frame",e)}),t.on("caption",function(e){n.trigger("caption",e)})}var i=n(0),c=n(6),p=n(19),h=n(61),f=n(62),a=n(5),m=n(8).isLikelyAacData,y=n(2),g=n(25),v=n(1),r=function(o){var s=null,l=!0;o=o||{},r.prototype.init.call(this),o.baseMediaDecodeTime=o.baseMediaDecodeTime||0,this.push=function(e){var t,n,i,a,r;l&&(!(t=m(e))||s&&"aac"===s.type?t||s&&"ts"===s.type||(n=o,(i={type:"ts",tracks:{audio:null,video:null},packet:new c.TransportPacketStream,parse:new c.TransportParseStream,elementary:new c.ElementaryStream,timestampRollover:new c.TimestampRolloverStream,adts:new p.Adts,h264:new p.h264.H264Stream,captionStream:new c.CaptionStream,metadataStream:new c.MetadataStream}).headOfPipeline=i.packet,i.packet.pipe(i.parse).pipe(i.elementary).pipe(i.timestampRollover),i.timestampRollover.pipe(i.h264),i.h264.pipe(i.captionStream),i.timestampRollover.pipe(i.metadataStream),i.timestampRollover.pipe(i.adts),i.elementary.on("data",function(e){if("metadata"===e.type){for(var t=0;t<e.tracks.length;t++)i.tracks[e.tracks[t].type]||(i.tracks[e.tracks[t].type]=e.tracks[t],i.tracks[e.tracks[t].type].timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime);i.tracks.video&&!i.videoSegmentStream&&(i.videoSegmentStream=new f(i.tracks.video,n),i.videoSegmentStream.on("timelineStartInfo",function(e){i.tracks.audio&&!n.keepOriginalTimestamps&&i.audioSegmentStream.setEarliestDts(e.dts-n.baseMediaDecodeTime)}),i.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),i.videoSegmentStream.on("data",function(e){i.trigger("data",{type:"video",data:e})}),i.videoSegmentStream.on("done",i.trigger.bind(i,"done")),i.videoSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone")),i.videoSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline")),i.h264.pipe(i.videoSegmentStream)),i.tracks.audio&&!i.audioSegmentStream&&(i.audioSegmentStream=new h(i.tracks.audio,n),i.audioSegmentStream.on("data",function(e){i.trigger("data",{type:"audio",data:e})}),i.audioSegmentStream.on("done",i.trigger.bind(i,"done")),i.audioSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone")),i.audioSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline")),i.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),i.adts.pipe(i.audioSegmentStream)),i.trigger("trackinfo",{hasAudio:!!i.tracks.audio,hasVideo:!!i.tracks.video})}}),i.captionStream.on("data",function(e){var t=i.tracks.video&&i.tracks.video.timelineStartInfo.pts||0;e.startTime=v.metadataTsToSeconds(e.startPts,t,n.keepOriginalTimestamps),e.endTime=v.metadataTsToSeconds(e.endPts,t,n.keepOriginalTimestamps),i.trigger("caption",e)}),(i=d(i)).metadataStream.on("data",i.trigger.bind(i,"id3Frame")),u(s=i,this)):(a=o,(r={type:"aac",tracks:{audio:null},metadataStream:new c.MetadataStream,aacStream:new g,audioRollover:new c.TimestampRolloverStream("audio"),timedMetadataRollover:new c.TimestampRolloverStream("timed-metadata"),adtsStream:new y(!0)}).headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioRollover).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataRollover).pipe(r.metadataStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||r.audioSegmentStream||(r.tracks.audio=r.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:a.baseMediaDecodeTime},codec:"adts",type:"audio"},r.audioSegmentStream=new h(r.tracks.audio,a),r.audioSegmentStream.on("data",function(e){r.trigger("data",{type:"audio",data:e})}),r.audioSegmentStream.on("partialdone",r.trigger.bind(r,"partialdone")),r.audioSegmentStream.on("done",r.trigger.bind(r,"done")),r.audioSegmentStream.on("endedtimeline",r.trigger.bind(r,"endedtimeline")),r.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream),r.trigger("trackinfo",{hasAudio:!!r.tracks.audio,hasVideo:!!r.tracks.video}))}),(r=d(r)).metadataStream.on("data",r.trigger.bind(r,"id3Frame")),u(s=r,this)),l=!1),s.headOfPipeline.push(e)},this.flush=function(){s&&(l=!0,s.headOfPipeline.flush())},this.partialFlush=function(){s&&s.headOfPipeline.partialFlush()},this.endTimeline=function(){s&&s.headOfPipeline.endTimeline()},this.reset=function(){s&&s.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){o.keepOriginalTimestamps||(o.baseMediaDecodeTime=e),s&&(s.tracks.audio&&(s.tracks.audio.timelineStartInfo.dts=void 0,s.tracks.audio.timelineStartInfo.pts=void 0,a.clearDtsInfo(s.tracks.audio),s.audioRollover&&s.audioRollover.discontinuity()),s.tracks.video&&(s.videoSegmentStream&&(s.videoSegmentStream.gopCache_=[]),s.tracks.video.timelineStartInfo.dts=void 0,s.tracks.video.timelineStartInfo.pts=void 0,a.clearDtsInfo(s.tracks.video)),s.timestampRollover&&s.timestampRollover.discontinuity())},this.setRemux=function(e){o.remux=e,s&&s.coalesceStream&&s.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){s&&s.tracks.audio&&s.audioSegmentStream&&s.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};r.prototype=new i,e.exports=r},function(e,t,n){"use strict";var i=n(0),h=n(3),f=n(21),m=n(5),y=n(1).ONE_SECOND_IN_TS,g=n(26),v=function(a,r){var o=[],s=0,l=0,d=0,u=1/0,c=null,p=null;r=r||{},v.prototype.init.call(this),this.push=function(t){m.collectDtsInfo(a,t),a&&g.forEach(function(e){a[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e},this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){d=e},this.processFrames_=function(){var e,t,n,i;0!==o.length&&0!==(i=f.trimAdtsFramesByEarliestDts(o,a,l)).length&&(a.baseMediaDecodeTime=m.calculateTrackBaseMediaDecodeTime(a,r.keepOriginalTimestamps),f.prefixWithSilence(a,i,d,u),a.samples=f.generateSampleTable(i),t=h.mdat(f.concatenateFrameData(i)),o=[],e=h.moof(s,[a]),s++,a.initSegment=h.initSegment([a]),(n=new Uint8Array(e.byteLength+t.byteLength)).set(e),n.set(t,e.byteLength),m.clearDtsInfo(a),null===c&&(p=c=i[0].pts),p+=i.length*(1024*y/a.samplerate),i={start:c},this.trigger("timingInfo",i),this.trigger("data",{track:a,boxes:n}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:c,end:p}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){m.clearDtsInfo(a),p=c=null},this.reset=function(){this.resetTiming_(),o=[],this.trigger("reset")}};v.prototype=new i,e.exports=v},function(e,t,n){"use strict";var i=n(0),y=n(3),g=n(5),v=n(20),a=n(27),r=function(s,l){var t,n,d,u=0,c=[],p=[],h=null,f=null,m=!0;l=l||{},r.prototype.init.call(this),this.push=function(e){g.collectDtsInfo(s,e),void 0===s.timelineStartInfo.dts&&(s.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],a.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,s.pps=[e.data]),c.push(e)},this.processNals_=function(e){var t;for(c=p.concat(c);c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0!==c.length){var n=v.groupNalsIntoFrames(c);if(n.length)if(p=n[n.length-1],e&&(n.pop(),n.duration-=p.duration,n.nalCount-=p.length,n.byteLength-=p.byteLength),n.length){if(this.trigger("timelineStartInfo",s.timelineStartInfo),m){if(!(d=v.groupFramesIntoGops(n))[0][0].keyFrame){if(!(d=v.extendFirstKeyFrame(d))[0][0].keyFrame)return c=[].concat.apply([],n).concat(p),void(p=[]);(n=[].concat.apply([],d)).duration=d.duration}m=!1}for(null===h&&(h=n[0].pts,f=h),f+=n.duration,this.trigger("timingInfo",{start:h,end:f}),t=0;t<n.length;t++){var i=n[t];s.samples=v.generateSampleTableForFrame(i);var a=y.mdat(v.concatenateNalDataForFrame(i));g.clearDtsInfo(s),g.collectDtsInfo(s,i),s.baseMediaDecodeTime=g.calculateTrackBaseMediaDecodeTime(s,l.keepOriginalTimestamps);var r=y.moof(u,[s]);u++,s.initSegment=y.initSegment([s]);var o=new Uint8Array(r.byteLength+a.byteLength);o.set(r),o.set(a,r.byteLength),this.trigger("data",{track:s,boxes:o,sequence:u,videoFrameDts:i.dts,videoFramePts:i.pts})}c=[]}else c=[]}},this.resetTimingAndConfig_=function(){n=t=void 0,f=h=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),p=[],c=[],m=!0,this.trigger("reset")}};r.prototype=new i,e.exports=r},function(e,t,n){"use strict";function a(e){return new Date(1e3*e-20828448e5)}var c=n(12),i=n(11),p={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:r(e.subarray(78,e.byteLength))}},avcC:function(e){for(var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},r=31&e[5],o=6,s=0;s<r;s++)n=i.getUint16(o),o+=2,a.sps.push(new Uint8Array(e.subarray(o,o+n))),o+=n;for(t=e[o],o++,s=0;s<t;s++)n=i.getUint16(o),o+=2,a.pps.push(new Uint8Array(e.subarray(o,o+n))),o+=n;return a},btrt:function(e){e=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:c(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(c(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:r(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:r(e.subarray(8))}},hdlr:function(e){for(var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:c(e.subarray(8,12)),name:""},n=8,n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){for(var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[],a=0;a+4<e.length;a+=t)if(t=n.getUint32(a),a+=4,t<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[a]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[a]&31)}return i}(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,e={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===e.version?(n+=4,e.creationTime=a(t.getUint32(n)),n+=8,e.modificationTime=a(t.getUint32(n)),n+=4,e.timescale=t.getUint32(n),n+=8):(e.creationTime=a(t.getUint32(n)),n+=4,e.modificationTime=a(t.getUint32(n)),n+=4,e.timescale=t.getUint32(n),n+=4),e.duration=t.getUint32(n),n+=4,n=t.getUint16(n),e.language+=String.fromCharCode(96+(n>>10)),e.language+=String.fromCharCode(96+((992&n)>>5)),e.language+=String.fromCharCode(96+(31&n)),e},mdia:function(e){return{boxes:r(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:r(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),t={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(t.streamDescriptor=r(e.subarray(28))[0]),t},moof:function(e){return{boxes:r(e)}},moov:function(e){return{boxes:r(e)}},mvex:function(e){return{boxes:r(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=a(t.getUint32(n)),n+=8,i.modificationTime=a(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8):(i.creationTime=a(t.getUint32(n)),n+=4,i.modificationTime=a(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4),i.duration=t.getUint32(n),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){for(var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=4;n<e.byteLength;n++)t.samples.push({dependsOn:(48&e[n])>>4,isDependedOn:(12&e[n])>>2,hasRedundancy:3&e[n]});return t},sidx:n(64),smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:r(e)}},stco:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=t.getUint32(4),a=8;i;a+=4,i--)n.chunkOffsets.push(t.getUint32(a));return n},stsc:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=t.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},a=8;n;a+=12,n--)i.sampleToChunks.push({firstChunk:t.getUint32(a),samplesPerChunk:t.getUint32(a+4),sampleDescriptionIndex:t.getUint32(a+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:r(e.subarray(8))}},stsz:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},i=12;i<e.byteLength;i+=4)n.entries.push(t.getUint32(i));return n},stts:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=t.getUint32(4),a=8;i;a+=8,i--)n.timeToSamples.push({sampleCount:t.getUint32(a),sampleDelta:t.getUint32(a+4)});return n},styp:function(e){return p.ftyp(e)},tfdt:n(15),tfhd:n(13),tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=a(t.getUint32(n)),n+=8,i.modificationTime=a(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8):(i.creationTime=a(t.getUint32(n)),n+=4,i.modificationTime=a(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/65536,i},traf:function(e){return{boxes:r(e)}},trak:function(e){return{boxes:r(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:n(14),"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},r=function(e){for(var t,n,i,a,r,o=0,s=[],l=new ArrayBuffer(e.length),d=new Uint8Array(l),u=0;u<e.length;++u)d[u]=e[u];for(t=new DataView(l);o<e.byteLength;)n=t.getUint32(o),i=c(e.subarray(o+4,o+8)),a=1<n?o+n:e.byteLength,(r=(p[i]||function(e){return{data:e}})(e.subarray(o+8,a))).size=n,r.type=i,s.push(r),o=a;return s},o=function(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(i,e){return a+i.type+"\n"+Object.keys(i).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",n=i[e];if(n instanceof Uint8Array||n instanceof Uint32Array){e=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return e?1===e.length?t+"<"+e.join("").slice(1)+">":t+"<\n"+e.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(i.boxes?"\n"+o(i.boxes,t+1):"")}).join("\n")};e.exports={inspect:r,textify:o,parseType:c,findBox:i,parseTraf:p.traf,parseTfdt:p.tfdt,parseHdlr:p.hdlr,parseTfhd:p.tfhd,parseTrun:p.trun,parseSidx:p.sidx}},function(e,t){e.exports=function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},i=t.getUint16(22),a=24;i;a+=12,i--)n.references.push({referenceType:(128&e[a])>>>7,referencedSize:2147483647&t.getUint32(a),subsegmentDuration:t.getUint32(a+4),startsWithSap:!!(128&e[a+8]),sapType:(112&e[a+8])>>>4,sapDeltaTime:268435455&t.getUint32(a+8)});return n}},function(e,t,n){"use strict";function a(e){for(var t,n=[];0<e.byteLength;)t=0,n.push("0x"+("00"+e[+t].toString(16)).slice(-2).toUpperCase()),e=e.subarray(1);return n.join(" ")}function i(e,t){var n,i=e[0]&parseInt("00001111",2);return(t=t||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(e[0]&parseInt("11110000",2))>>>4],7==(t.codecID=i)?(n=e.subarray(1),i=t,e=n[1]&parseInt("01111111",2)<<16|n[2]<<8|n[3],(i=i||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][n[0]],i.CompositionTime=n[1]&parseInt("10000000",2)?-e:e,1===n[0]?i.nalUnitTypeRaw=a(n.subarray(4,100)):i.data=a(n.subarray(4)),i):t}function r(e,t){var n=(e[0]&parseInt("11110000",2))>>>4;return(t=t||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][n],t.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10==n?(n=e.subarray(1),(e=(e=t)||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][n[0]],e.data=a(n.subarray(1)),e):t}function o(e){var t={tagType:s[(t=e)[0]],dataSize:t[1]<<16|t[2]<<8|t[3],timestamp:t[7]<<24|t[4]<<16|t[5]<<8|t[6],streamID:t[8]<<16|t[9]<<8|t[10]};switch(e[0]){case 8:r(e.subarray(11),t);break;case 9:i(e.subarray(11),t)}return t}var s={8:"audio",9:"video",18:"metadata"};e.exports={inspectTag:o,inspect:function(e){var t,n,i=9,a=[];for(i+=4;i<e.byteLength;)t=e[i+1]<<16,t|=e[i+2]<<8,t|=e[i+3],t+=11,n=e.subarray(i,i+t),a.push(o(n)),i+=4+t;return a},textify:function(e){return JSON.stringify(e,null,2)}}},function(e,t,n){"use strict";var a=n(7),r=n(24).handleRollover,y={};y.ts=n(67),y.aac=n(8);function o(e,t,n){for(var i,a,r,o,s=0,l=188,d=!1;l<=e.byteLength;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s++,l++;else{if(i=e.subarray(s,l),"pes"===y.ts.parseType(i,t.pid)&&(a=y.ts.parsePesType(i,t.table),r=y.ts.parsePayloadUnitStartIndicator(i),"audio"===a&&r&&(o=y.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),d=!0)),d)break;s+=188,l+=188}for(s=(l=e.byteLength)-188,d=!1;0<=s;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s--,l--;else{if(i=e.subarray(s,l),"pes"===y.ts.parseType(i,t.pid)&&(a=y.ts.parsePesType(i,t.table),r=y.ts.parsePayloadUnitStartIndicator(i),"audio"===a&&r&&(o=y.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),d=!0)),d)break;s-=188,l-=188}}function s(e){var t,n={pid:null,table:null},i={};for(t in!function(e,t){for(var n,i=0,a=188;a<e.byteLength;)if(71!==e[i]||71!==e[a])i++,a++;else{switch(n=e.subarray(i,a),y.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=y.ts.parsePat(n));break;case"pmt":t.table||(t.table=y.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=188,a+=188}}(e,n),n.table)if(n.table.hasOwnProperty(t))switch(n.table[t]){case a.H264_STREAM_TYPE:i.video=[],function(e,t,n){for(var i,a,r,o,s,l,d,u,c,p=0,h=188,f=!1,m={data:[],size:0};h<e.byteLength;)if(71!==e[p]||71!==e[h])p++,h++;else{if(i=e.subarray(p,h),a=y.ts.parseType(i,t.pid),"pes"===a)if(r=y.ts.parsePesType(i,t.table),o=y.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(o&&!f&&(s=y.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),f=!0),!n.firstKeyFrame)){if(o&&0!==m.size){for(l=new Uint8Array(m.size),d=0;m.data.length;)u=m.data.shift(),l.set(u,d),d+=u.byteLength;y.ts.videoPacketContainsKeyFrame(l)&&((c=y.ts.parsePesTime(l))?(n.firstKeyFrame=c,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")),m.size=0}m.data.push(i),m.size+=i.byteLength}if(f&&n.firstKeyFrame)break;p+=188,h+=188}for(p=(h=e.byteLength)-188,f=!1;0<=p;)if(71!==e[p]||71!==e[h])p--,h--;else{if(i=e.subarray(p,h),"pes"===(a=y.ts.parseType(i,t.pid))&&(r=y.ts.parsePesType(i,t.table),o=y.ts.parsePayloadUnitStartIndicator(i),"video"===r&&o&&(s=y.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),f=!0)),f)break;p-=188,h-=188}}(e,n,i),0===i.video.length&&delete i.video;break;case a.ADTS_STREAM_TYPE:i.audio=[],o(e,n,i),0===i.audio.length&&delete i.audio}return i}var d=n(1).ONE_SECOND_IN_TS;e.exports={inspect:function(e,t){var n,i,a=(y.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,a=null,r=null,o=0,s=0;3<=e.length-s;){switch(y.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=y.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=y.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=y.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=y.aac.parseSampleRate(t)),i++,s+=o;break;default:s++}if(n)return null}if(null===a||null===r)return null;var l=d/a;return{audio:[{type:"audio",dts:r,pts:r},{type:"audio",dts:r+1024*i*l,pts:r+1024*i*l}]}}:s)(e);return a&&(a.audio||a.video)?(e=t,(t=a).audio&&t.audio.length&&(void 0===(n=e)&&(n=t.audio[0].dts),t.audio.forEach(function(e){e.dts=r(e.dts,n),e.pts=r(e.pts,n),e.dtsTime=e.dts/d,e.ptsTime=e.pts/d})),t.video&&t.video.length&&(void 0===(i=e)&&(i=t.video[0].dts),t.video.forEach(function(e){e.dts=r(e.dts,i),e.pts=r(e.pts,i),e.dtsTime=e.dts/d,e.ptsTime=e.pts/d}),t.firstKeyFrame&&((t=t.firstKeyFrame).dts=r(t.dts,i),t.pts=r(t.pts,i),t.dtsTime=t.dts/d,t.ptsTime=t.dts/d)),a):null},parseAudioPes_:o}},function(e,t,n){"use strict";function i(e){var t=31&e[1];return t<<=8,t|=e[2]}function s(e){return!!(64&e[1])}function l(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function o(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var a=n(7);e.exports={parseType:function(e,t){e=i(e);return 0===e?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=s(e),n=4+l(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=s(e),i=4+l(e);if(n&&(i+=e[i]+1),1&e[i+5]){for(var a=3+((15&e[i+1])<<8|e[i+2])-4,r=12+((15&e[i+10])<<8|e[i+11]);r<a;){var o=i+r;t[(31&e[o+1])<<8|e[o+2]]=e[o],r+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:s,parsePesType:function(e,t){switch(t[i(e)]){case a.H264_STREAM_TYPE:return"video";case a.ADTS_STREAM_TYPE:return"audio";case a.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!s(e))return null;var t=4+l(e);if(t>=e.byteLength)return null;var n=null,i=e[t+7];return 192&i&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+l(e),n=e.subarray(t),i=0,a=0,r=!1;a<n.byteLength-3;a++)if(1===n[a+2]){i=a+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(a+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[a+3])&&(r=!0);i++,1!==n[i]&&i<n.length;);a=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[a+3])&&(r=!0),a=i-2,i+=3;break;default:i+=3}return n=n.subarray(a),i-=a,a=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[a+3])&&(r=!0),r}}},function(e,t,n){(function(e,f){!function(n,i){"use strict";var a,r,o,s,l,d,t,u,e;function c(e){delete r[e]}function p(e){if(o)setTimeout(p,0,e);else{var t=r[e];if(t){o=!0;try{!function(e){var t=e.callback;switch((e=e.args).length){case 0:t();break;case 1:t(e[0]);break;case 2:t(e[0],e[1]);break;case 3:t(e[0],e[1],e[2]);break;default:t.apply(i,e)}}(t)}finally{c(e),o=!1}}}}function h(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(u)&&p(+e.data.slice(u.length))}n.setImmediate||(a=1,o=!(r={}),s=n.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&e.setTimeout?e:n,l="[object process]"==={}.toString.call(n.process)?function(e){f.nextTick(function(){p(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(u="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",h,!1):n.attachEvent("onmessage",h),function(e){n.postMessage(u+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){t.port2.postMessage(e)}):s&&"onreadystatechange"in s.createElement("script")?(d=s.documentElement,function(e){var t=s.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,d.removeChild(t),t=null},d.appendChild(t)}):function(e){setTimeout(p,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return e={callback:e,args:t},r[a]=e,l(a),a++},e.clearImmediate=c)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(9),n(69))},function(e,t){var n,i,e=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var s,l=[],d=!1,u=-1;function c(){d&&s&&(d=!1,s.length?l=s.concat(l):u=-1,l.length&&p())}function p(){if(!d){var e=o(c);d=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||d||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"load",function(){return a}),n.d(o,"play",function(){return u}),n.d(o,"pause",function(){return c}),n.d(o,"fast_rewind",function(){return p}),n.d(o,"fast_forward",function(){return h}),n.d(o,"menu",function(){return f}),n.d(o,"left",function(){return m}),n.d(o,"right",function(){return y}),n.d(o,"info",function(){return g}),n.d(o,"warn",function(){return v}),n.d(o,"sucess",function(){return b}),n.d(o,"error",function(){return _});var t=n(29),s=n.n(t),t=(n(41),n(30)),i=n.n(t),t=n(31),r=n.n(t),t=n(32),l=n.n(t),t=n(33),d=n.n(t),a='<svg t="1561855857132" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5530" width="200" height="200"><path d="M512 0a51.2 51.2 0 0 1 51.2 51.2v153.6a51.2 51.2 0 0 1-102.4 0V51.2a51.2 51.2 0 0 1 51.2-51.2z m362.0352 149.9648a51.2 51.2 0 0 1 0 72.3968L765.44 330.9568a51.2 51.2 0 0 1-72.3968-72.3968l108.544-108.5952a51.2 51.2 0 0 1 72.448 0zM1024 512a51.2 51.2 0 0 1-51.2 51.2h-153.6a51.2 51.2 0 0 1 0-102.4h153.6a51.2 51.2 0 0 1 51.2 51.2z m-149.9648 362.0352a51.2 51.2 0 0 1-72.3968 0l-108.5952-108.5952a51.2 51.2 0 0 1 72.3968-72.3968l108.5952 108.544a51.2 51.2 0 0 1 0 72.448zM512 1024a51.2 51.2 0 0 1-51.2-51.2v-153.6a51.2 51.2 0 0 1 102.4 0v153.6a51.2 51.2 0 0 1-51.2 51.2z m-362.0352-149.9648a51.2 51.2 0 0 1 0-72.3968l108.5952-108.5952a51.2 51.2 0 1 1 72.3968 72.3968l-108.544 108.5952a51.2 51.2 0 0 1-72.448 0zM0 512a51.2 51.2 0 0 1 51.2-51.2h153.6a51.2 51.2 0 1 1 0 102.4H51.2a51.2 51.2 0 0 1-51.2-51.2z m149.9648-362.0352a51.2 51.2 0 0 1 72.3968 0L330.9568 258.56A51.2 51.2 0 1 1 258.56 330.9568L150.016 222.4128a51.2 51.2 0 0 1 0-72.448z" p-id="5531"></path></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 31"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z"></path></svg>',h='<svg style="transform:rotate(180deg)" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z"></path></svg>',f='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 22 32"><path d="M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"></path></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>',y='<svg style="transform:rotate(180deg)" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>',g='<svg version="1.1" class="toast__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><g><g id="info"><g><path d="M10,16c1.105,0,2,0.895,2,2v8c0,1.105-0.895,2-2,2H8v4h16v-4h-1.992c-1.102,0-2-0.895-2-2L20,12H8     v4H10z"></path><circle cx="16" cy="4" r="4"></circle></g></g></g></svg>',v='<svg version="1.1" class="toast__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 301.691 301.691" style="enable-background:new 0 0 301.691 301.691;" xml:space="preserve"><g><polygon points="119.151,0 129.6,218.406 172.06,218.406 182.54,0  "></polygon><rect x="130.563" y="261.168" width="40.525" height="40.523"></rect></g></svg>',b='<svg version="1.1" class="toast__svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0    c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7    C514.5,101.703,514.499,85.494,504.502,75.496z"></path></g></g></svg>',_='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.642 15.642" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 15.642 15.642"><path fill-rule="evenodd" d="M8.882,7.821l6.541-6.541c0.293-0.293,0.293-0.768,0-1.061  c-0.293-0.293-0.768-0.293-1.061,0L7.821,6.76L1.28,0.22c-0.293-0.293-0.768-0.293-1.061,0c-0.293,0.293-0.293,0.768,0,1.061  l6.541,6.541L0.22,14.362c-0.293,0.293-0.293,0.768,0,1.061c0.147,0.146,0.338,0.22,0.53,0.22s0.384-0.073,0.53-0.22l6.541-6.541  l6.541,6.541c0.147,0.146,0.338,0.22,0.53,0.22c0.192,0,0.384-0.073,0.53-0.22c0.293-0.293,0.293-0.768,0-1.061L8.882,7.821z"></path></svg>';function w(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var S=document.createElement("div");S.className="notify-container",document.body.appendChild(S);function x(e){return new E(e)}var E=function(){function a(e,t,n,i){l()(this,a),this._CB=[];i={title:t,icon:n,duration:i};if("string"==typeof e)i.content=e;else{if("object"!=r()(e))return Promise.reject("Option Error!");i=k(k({},i),e)}return this.init(i)}return d()(a,[{key:"init",value:function(e){var n=this,t=e.title,i=void 0===t?"":t,a=e.content,t=e.icon,t=void 0===t?"info":t,e=e.duration,e=void 0===e?4500:e,r=document.createElement("div");r.className="notify-wrap "+t,r.innerHTML='<i class="icon">'.concat(o[t],'</i><div class="content"><h3 class="title">').concat(i,'</h3><div class="msg">').concat(a,'</div></div><button class="btn">').concat(_,'</button><div class="progress-bar"></div>'),S.append(r),(this.Dom=r).getElementsByClassName("btn")[0].onclick=function(e){var t;for(n.hide();t=n._CB.shift();)t(e)},this._hide=!1,this.$pro_dom=r.getElementsByClassName("progress-bar")[0],setTimeout(function(){return r.style.transform="translateX(0)"},0),e&&setTimeout(function(){return n.hide()},e)}},{key:"hide",value:function(){var e=this;if(this._hide)return!1;this.Dom.style.transform="translateX("+this.Dom.offsetWidth+"px)",setTimeout(function(){return S.removeChild(e.Dom)},300),this._hide=!0}},{key:"onProgress",value:function(e){this.$pro_dom&&(this.$pro_dom.style.width=e+"%")}},{key:"then",value:function(e){return this._CB.push(e),this}}]),a}();x.test=function(e){return x({content:e,duration:0})},x.load=function(e,t){return x({content:e,title:t,icon:"load",duration:2<arguments.length&&void 0!==arguments[2]?arguments[2]:0})},x.warn=function(e,t,n){return x({content:e,title:t,icon:"warn",duration:n})},x.error=function(e,t,n){return x({content:e,title:t,icon:"error",duration:n})},x.sucess=function(e,t,n){return x({content:e,title:t,icon:"sucess",duration:n})};var T=x,t=n(34),L=n.n(t),t=n(18),A=n.n(t),t=n(35),t=n.n(t),R="",O=document.getElementById("player"),C=document.getElementsByClassName("drag-wrap")[0],D={flv:"flv",mp4:"",avi:"",ogm:"",webm:"",wmv:"",mkv:"",mov:"",mpeg:"",m4v:"",ts:""},M=new t.a({container:O,video:{},screenshot:!0,autoplay:!0});function I(e,t){t=1<arguments.length&&void 0!==t?t:"";R=e,M.switchVideo({url:e,type:t}),O.style.display="block",document.getElementsByClassName("container")[0].className="container is_play"}function U(e){var t=e.target,e=e.dataTransfer;URL.revokeObjectURL(R);function n(e){i.hide(),T.sucess("".concat(e)),t.value=""}var i=T.load("~, ~",""),e=t.files||e.files||[],a=s()(e,1)[0];if(a){var r,o,e=a.name.split(".").pop().toLowerCase();return-1==Object.keys(D).indexOf(e)?(r="!",i.hide(),T.error(r),void(t.value="")):"ts"==e?(o=a,new Promise(function(e,t){var n=new FileReader;n.readAsArrayBuffer(o),n.onload=function(){return e(n.result)},n.onerror=t}).then(function(e){return t=e,s=function(){return n(a.name),0},e=new Uint8Array(t),l=[],d=0,u=null,(t=new A.a.mp4.Transmuxer).on("data",function(e){l.push(e),d+=e.data.byteLength,u=e.initSegment}),t.on("done",function(){var e=0,t=new Uint8Array((null===u||void 0===u?void 0:u.byteLength)+d);t.set(u,0);for(var n,i,a,r=0,o=e+=null===u||void 0===u?void 0:u.byteLength;r<l.length;r++)t.set(l[r].data,o),o+=null===(n=l[r])||void 0===n?void 0:n.byteLength;l=[],d=0,A.a.mp4.tools.inspect(t),i=t,a=new MediaSource,I(URL.createObjectURL(a)),a.addEventListener("sourceopen",function(){a.duration=0;var e=a.addSourceBuffer('video/mp4;codecs="avc1.64001f,mp4a.40.5"'),t=console.log;e.addEventListener("updatestart",t),e.addEventListener("updateend",t),e.addEventListener("error",t),e.appendBuffer(i)}),s()}),t.push(e),void t.flush();var t,s,l,d,u})):(I(URL.createObjectURL(a),D[e]),void n(a.name))}}M.on("screenshot",function(){return T(", ")}),function(e){e.$upload=U,e.flvjs=L.a;e=e.document.body;null!=e&&e.addEventListener("dragenter",function(){return C.className="drag-wrap drag-in"},!1),null!=e&&e.addEventListener("dragover",function(e){return e.preventDefault()},!1),null!=e&&e.addEventListener("dragleave",function(){return C.className="drag-wrap"},!1),null!=C&&C.addEventListener("dragenter",function(){return C.className="drag-wrap"},!1),null!=e&&e.addEventListener("dragend",function(e){return console.log(e)},!1),null!=e&&e.addEventListener("drop",function(e){e.preventDefault(),C.className="drag-wrap",U(e)},!1)}(window)}]);